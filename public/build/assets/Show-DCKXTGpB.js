import{j as e,S as E,x as i,A as d}from"./app-BMIA6nir.js";import{A as I}from"./AppLayout-DbMk6clK.js";import{C as o,a as m,b as x,c as h}from"./card-BAsSN-2Z.js";import{B as a}from"./createLucideIcon-Cg8jdX0w.js";import{B as l,U as B}from"./x-C3KwZK3B.js";import{T as F,a as R,b as D,c as f,d as L,e as j}from"./table-DqBb-9tC.js";import{u as P}from"./useTranslate-ER5gAOX6.js";import{t as c}from"./index-Dj2TB_RL.js";import{A as U}from"./arrow-left-UX2kDF52.js";import{R as u}from"./refresh-cw-CkrxGXg9.js";import{S as N}from"./send-C-AP4C9s.js";import{C as p}from"./circle-check-big-DCsv6rXk.js";import{C as v}from"./circle-x-D-Fm_LhT.js";import{D as T}from"./download-CNZP3fGS.js";import{S as $}from"./square-pen-CReBrXbl.js";import{M as H}from"./mail-CApE3o7R.js";import{P as M}from"./phone-347MTOqH.js";import{F as g}from"./file-text-D25AipK4.js";import{D as z}from"./dollar-sign-Cli0KufN.js";import{C as A}from"./clock-BTinGqFV.js";import{T as k}from"./triangle-alert-BWIpgUmg.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";function Me({quotation:s}){const{t:r}=P(),_=()=>{d.post(route("finance.quotations.send",s.id),{},{onSuccess:()=>{c.success(r("finance.quotation_sent","Quotation sent successfully"))},onError:()=>{c.error(r("common.error_occurred","An error occurred"))}})},y=()=>{d.post(route("finance.quotations.accept",s.id),{},{onSuccess:()=>{c.success(r("finance.quotation_accepted","Quotation accepted successfully"))},onError:()=>{c.error(r("common.error_occurred","An error occurred"))}})},w=()=>{d.post(route("finance.quotations.reject",s.id),{},{onSuccess:()=>{c.success(r("finance.quotation_rejected","Quotation rejected"))},onError:()=>{c.error(r("common.error_occurred","An error occurred"))}})},b=()=>{confirm(r("finance.confirm_convert_to_invoice","Are you sure you want to convert this quotation to an invoice?"))&&d.post(route("finance.quotations.convert-to-invoice",s.id),{},{onSuccess:()=>{c.success(r("finance.quotation_converted","Quotation converted to invoice successfully"))},onError:()=>{c.error(r("common.error_occurred","An error occurred"))}})},t=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:s.currency}).format(n),C=n=>{switch(n){case"accepted":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"expired":return"bg-orange-100 text-orange-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=n=>{switch(n){case"accepted":return e.jsx(p,{className:"h-4 w-4"});case"sent":return e.jsx(N,{className:"h-4 w-4"});case"rejected":return e.jsx(v,{className:"h-4 w-4"});case"expired":return e.jsx(k,{className:"h-4 w-4"});case"draft":return e.jsx(g,{className:"h-4 w-4"});default:return e.jsx(g,{className:"h-4 w-4"})}},Q=()=>s.is_expired?e.jsxs(l,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"}),r("finance.expired","Expired")]}):s.days_until_expiry<=3&&s.status==="sent"?e.jsxs(l,{variant:"outline",className:"flex items-center gap-1 text-orange-600",children:[e.jsx(A,{className:"h-3 w-3"}),r("finance.expires_in_days","Expires in {{days}} days",{days:s.days_until_expiry})]}):null;return e.jsxs(I,{title:`${r("finance.quotation","Quotation")} ${s.quotation_number}`,breadcrumbs:[{label:r("finance.title","Finance"),href:"/finance"},{label:r("finance.quotations","Quotations"),href:"/finance/quotations"},{label:s.quotation_number}],children:[e.jsx(E,{title:`${r("finance.quotation","Quotation")} ${s.quotation_number}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(i,{href:route("finance.quotations.index"),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),r("common.back","Back")]})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[r("finance.quotation","Quotation")," ",s.quotation_number]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(l,{className:C(s.status),variant:"secondary",children:[S(s.status),e.jsx("span",{className:"ml-1",children:s.status})]}),s.is_converted&&e.jsxs(l,{variant:"outline",children:[e.jsx(u,{className:"h-3 w-3 mr-1"}),r("finance.converted","Converted")]}),Q(),e.jsx("span",{className:"text-muted-foreground",children:"â€¢"}),e.jsxs("span",{className:"text-muted-foreground",children:[r("finance.expires","Expires"),": ",new Date(s.expiry_date).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status==="draft"&&e.jsxs(a,{onClick:_,children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),r("finance.send_quotation","Send Quotation")]}),s.status==="sent"&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{onClick:y,variant:"default",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),r("finance.accept","Accept")]}),e.jsxs(a,{onClick:w,variant:"outline",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),r("finance.reject","Reject")]})]}),s.can_convert_to_invoice&&e.jsxs(a,{onClick:b,variant:"default",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),r("finance.convert_to_invoice","Convert to Invoice")]}),e.jsx(a,{variant:"outline",asChild:!0,children:e.jsxs(i,{href:route("finance.quotations.pdf",s.id),target:"_blank",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),r("finance.download_pdf","Download PDF")]})}),["draft","sent"].includes(s.status)&&e.jsx(a,{variant:"outline",asChild:!0,children:e.jsxs(i,{href:route("finance.quotations.edit",s.id),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),r("common.edit","Edit")]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),r("finance.lead_information","Lead Information")]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.lead.name}),s.lead.company&&e.jsx("p",{className:"text-muted-foreground",children:s.lead.company})]}),e.jsxs("div",{className:"grid gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.lead.email})]}),s.lead.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.lead.phone})]})]})]})})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),r("finance.quotation_items","Quotation Items")]})}),e.jsxs(h,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(F,{children:[e.jsx(R,{children:e.jsxs(D,{children:[e.jsx(f,{children:r("finance.description","Description")}),e.jsx(f,{className:"text-center",children:r("finance.quantity","Qty")}),e.jsx(f,{className:"text-right",children:r("finance.unit_price","Unit Price")}),e.jsx(f,{className:"text-right",children:r("finance.total","Total")})]})}),e.jsx(L,{children:s.items.map(n=>e.jsxs(D,{children:[e.jsx(j,{className:"font-medium",children:n.description}),e.jsx(j,{className:"text-center",children:n.quantity}),e.jsx(j,{className:"text-right",children:t(n.unit_price)}),e.jsx(j,{className:"text-right font-medium",children:t(n.total_price)})]},n.id))})]})}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[r("finance.subtotal","Subtotal"),":"]}),e.jsx("span",{className:"font-medium",children:t(s.subtotal)})]}),s.tax_amount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[r("finance.tax","Tax"),":"]}),e.jsx("span",{className:"font-medium",children:t(s.tax_amount)})]}),s.discount_amount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[r("finance.discount","Discount"),":"]}),e.jsxs("span",{className:"font-medium",children:["-",t(s.discount_amount)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[e.jsxs("span",{children:[r("finance.total","Total"),":"]}),e.jsx("span",{children:t(s.total_amount)})]})]})]})]}),(s.notes||s.terms)&&e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(x,{children:r("finance.additional_information","Additional Information")})}),e.jsxs(h,{className:"space-y-4",children:[s.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:r("finance.notes","Notes")}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:s.notes})]}),s.terms&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:r("finance.terms","Terms & Conditions")}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:s.terms})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),r("finance.quotation_summary","Quotation Summary")]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:[r("finance.issue_date","Issue Date"),":"]}),e.jsx("span",{children:new Date(s.issue_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:[r("finance.expiry_date","Expiry Date"),":"]}),e.jsx("span",{children:new Date(s.expiry_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:[r("finance.currency","Currency"),":"]}),e.jsx("span",{children:s.currency})]}),e.jsxs("div",{className:"flex justify-between font-medium pt-2 border-t",children:[e.jsxs("span",{children:[r("finance.total_amount","Total Amount"),":"]}),e.jsx("span",{children:t(s.total_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:[r("common.status","Status"),":"]}),e.jsxs(l,{className:C(s.status),variant:"secondary",children:[S(s.status),e.jsx("span",{className:"ml-1",children:s.status})]})]})]}),s.status==="sent"&&s.days_until_expiry<=7&&!s.is_expired&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:r("finance.expires_soon","Expires in {{days}} days",{days:s.days_until_expiry})})]})})}),s.is_converted&&s.converted_to_invoice&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:r("finance.converted_to_invoice","Converted to Invoice")}),e.jsx(i,{href:route("finance.invoices.show",s.converted_to_invoice.id),className:"text-xs text-green-600 hover:text-green-800 underline",children:s.converted_to_invoice.invoice_number})]})]})})}),e.jsxs("div",{className:"pt-4 border-t space-y-2",children:[s.status==="draft"&&e.jsxs(a,{onClick:_,className:"w-full",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),r("finance.send_quotation","Send Quotation")]}),s.status==="sent"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{onClick:y,className:"w-full",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),r("finance.accept_quotation","Accept Quotation")]}),e.jsxs(a,{onClick:w,variant:"outline",className:"w-full",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),r("finance.reject_quotation","Reject Quotation")]})]}),s.can_convert_to_invoice&&e.jsxs(a,{onClick:b,className:"w-full",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),r("finance.convert_to_invoice","Convert to Invoice")]}),e.jsx(a,{variant:"outline",asChild:!0,className:"w-full",children:e.jsxs(i,{href:route("finance.quotations.pdf",s.id),target:"_blank",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),r("finance.download_pdf","Download PDF")]})})]})]})]})})]})]})]})}export{Me as default};
