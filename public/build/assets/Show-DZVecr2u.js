import{u as S,j as e,S as F,x as p}from"./app-BMIA6nir.js";import{u as B,A as L}from"./AppLayout-DbMk6clK.js";import{C as a,a as d,b as m,d as x,c as l}from"./card-BAsSN-2Z.js";import{B as n}from"./createLucideIcon-Cg8jdX0w.js";import{B as c}from"./x-C3KwZK3B.js";import{T as P,a as z,b as g,c as u}from"./tabs-YflTNJKH.js";import{T as E}from"./triangle-alert-BWIpgUmg.js";import{C as U}from"./calendar-DTsvo4Hi.js";import{U as A}from"./users-3SuyoAg3.js";import{T}from"./target-DIhftedx.js";import{C as H}from"./clock-BTinGqFV.js";import{F as $}from"./file-text-D25AipK4.js";import{P as C}from"./plus-BjPf5uI-.js";import{E as R}from"./eye-DdivFxyT.js";import{D as q}from"./download-CNZP3fGS.js";import{S as M}from"./square-pen-CReBrXbl.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./useTranslate-ER5gAOX6.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";function Ae({auth:O,project:r,task:s}){var y,v,b,w;const o=S(),{hasPermission:h}=B(),j=t=>{switch(t){case"pending":return"bg-gray-100 text-gray-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"on-hold":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=t=>{switch(t){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},D=t=>t?new Date(t).toLocaleDateString():"No due date",_=(t,i)=>!t||i==="completed"?!1:new Date(t)<new Date,f=((y=s.time_logs)==null?void 0:y.reduce((t,i)=>t+i.hours,0))||0;return e.jsxs(L,{title:`${s.title} - ${r.name}`,renderHeader:()=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[r.name," • Task"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{href:o("projects.tasks.index",r.id),children:e.jsx(n,{variant:"outline",children:"Back to Tasks"})}),h("projects.tasks.edit")&&e.jsx(p,{href:o("projects.tasks.edit",[r.id,s.id]),children:e.jsxs(n,{children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Edit Task"]})})]})]}),children:[e.jsx(F,{title:`${s.title} - ${r.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(a,{children:[e.jsx(d,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[s.title,e.jsx(c,{variant:"outline",className:j(s.status),children:s.status}),e.jsx(c,{variant:"outline",className:N(s.priority),children:s.priority}),_(s.due_date,s.status)&&e.jsx(E,{className:"h-5 w-5 text-red-500"})]}),e.jsx(x,{className:"mt-2",children:s.description||"No description provided"})]})})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.due_date&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Due: ",D(s.due_date)]})]}),s.assignee&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Assigned to: ",s.assignee.name]})]}),s.milestone&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Milestone: ",s.milestone.name]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Hours: ",f.toFixed(1)," / ",s.estimated_hours||0]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Files: ",((v=s.files)==null?void 0:v.length)||0]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Dependencies: ",((b=s.dependencies)==null?void 0:b.length)||0]})]})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(t=>e.jsxs(c,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:t.color}}),t.name]},t.id))})]})]})})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs(a,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Task Stats"})}),e.jsxs(l,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),e.jsx(c,{variant:"outline",className:j(s.status),children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Priority"}),e.jsx(c,{variant:"outline",className:N(s.priority),children:s.priority})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Estimated"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.estimated_hours||0,"h"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Logged"}),e.jsxs("span",{className:"text-sm font-medium",children:[f.toFixed(1),"h"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Dependencies"}),e.jsx("span",{className:"text-sm font-medium",children:((w=s.dependencies)==null?void 0:w.length)||0})]})]})]})})]}),e.jsxs(P,{defaultValue:"dependencies",className:"w-full",children:[e.jsxs(z,{children:[e.jsx(g,{value:"dependencies",children:"Dependencies"}),e.jsx(g,{value:"files",children:"Files"}),e.jsx(g,{value:"time-logs",children:"Time Logs"})]}),e.jsx(u,{value:"dependencies",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(m,{children:"Dependencies"}),e.jsx(x,{children:"Tasks that must be completed before this one"})]}),e.jsx(l,{children:s.dependencies&&s.dependencies.length>0?e.jsx("div",{className:"space-y-3",children:s.dependencies.map(t=>{var i;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(p,{href:o("projects.tasks.show",[r.id,t.id]),className:"font-medium text-blue-600 hover:underline",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:((i=t.assignee)==null?void 0:i.name)||"Unassigned"})]}),e.jsx(c,{variant:"outline",className:j(t.status),children:t.status})]},t.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No dependencies for this task"})})]})}),e.jsx(u,{value:"files",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Files"}),e.jsx(x,{children:"Files attached to this task"})]}),h("projects.files.create")&&e.jsxs(n,{size:"sm",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Upload File"]})]}),e.jsx(l,{children:s.files&&s.files.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.files.map(t=>{var i;return e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[t.file_size_formatted," • ",t.category]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Uploaded by ",(i=t.uploader)==null?void 0:i.name]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(R,{className:"h-3 w-3"})}),e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(q,{className:"h-3 w-3"})})]})]})})},t.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No files attached to this task"})})]})}),e.jsx(u,{value:"time-logs",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Time Logs"}),e.jsx(x,{children:"Time tracked for this task"})]}),h("projects.time-logs.create")&&e.jsxs(n,{size:"sm",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Log Time"]})]}),e.jsx(l,{children:s.time_logs&&s.time_logs.length>0?e.jsx("div",{className:"space-y-3",children:s.time_logs.map(t=>{var i;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(i=t.user)==null?void 0:i.name," • ",new Date(t.logged_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:[t.hours,"h"]}),t.is_billable&&e.jsx("p",{className:"text-xs text-green-600",children:"Billable"})]})]},t.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No time logged for this task"})})]})})]})]})})})]})}export{Ae as default};
