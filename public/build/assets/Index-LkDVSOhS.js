import{r as S,u as K,j as e,S as O,A as i,x as k}from"./app-BMIA6nir.js";import{A as G,P as p}from"./AppLayout-DbMk6clK.js";import{C as u,a as D,b as T,c as j,d as J}from"./card-BAsSN-2Z.js";import{B as c}from"./createLucideIcon-Cg8jdX0w.js";import{I as W}from"./input-Bg5GDATO.js";import{S as A,a as E,b as P,c as z,d as h}from"./select-B6KOX9nY.js";import{B as M}from"./x-C3KwZK3B.js";import{C as X}from"./checkbox-B8CiFAgv.js";import{D as Y,a as Z,b as $,c as n,g as F}from"./NotificationComponent-CHA3vjZG.js";import{u as ee}from"./useTranslate-ER5gAOX6.js";import{U as se}from"./upload-DoO0wQwa.js";import{P as B}from"./plus-BjPf5uI-.js";import{F as te}from"./funnel-v8IwREza.js";import{S as ae}from"./search-_p1CX5vB.js";import{T as L}from"./trash-2-DZc0jDKK.js";import{S as V}from"./star-D4SUxlZH.js";import{E as re}from"./ellipsis-DJ3pNpl6.js";import{E as I}from"./eye-DdivFxyT.js";import{S as U}from"./square-pen-CReBrXbl.js";import{C as ie}from"./copy-XqgUo3o3.js";import{D as ce}from"./download-CNZP3fGS.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./bell-5VRgJnzP.js";function ns({templates:m,categories:N,filters:o}){var b;const{t}=ee(),[d,f]=S.useState([]),[w,H]=S.useState(o.search||""),a=K(),y=()=>{i.get(a("cms.templates.index"),{...o,search:w},{preserveState:!0,replace:!0})},C=(s,r)=>{i.get(a("cms.templates.index"),{...o,[s]:r||void 0},{preserveState:!0,replace:!0})},v=s=>{d.length!==0&&i.post(a("cms.templates.bulk-action"),{action:s,template_ids:d},{onSuccess:()=>{f([])}})},l=(s,r)=>{switch(r){case"edit":i.visit(a("cms.templates.edit",s));break;case"view":i.visit(a("cms.templates.show",s));break;case"preview":i.visit(a("cms.templates.preview",s));break;case"duplicate":i.post(a("cms.templates.duplicate",s));break;case"set-default":i.post(a("cms.templates.set-default",s));break;case"export":window.open(a("cms.templates.export",s),"_blank");break;case"delete":confirm(t("cms.confirm_delete_template","Are you sure you want to delete this template?"))&&i.delete(a("cms.templates.destroy",s));break}},Q=s=>new Date(s).toLocaleDateString();return e.jsxs(G,{children:[e.jsx(O,{title:t("cms.templates","Templates")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t("cms.templates","Templates")}),e.jsx("p",{className:"text-muted-foreground",children:t("cms.templates_description","Manage page templates and layouts")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",asChild:!0,children:e.jsxs("label",{htmlFor:"import-template",className:"cursor-pointer",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),t("cms.import_template","Import Template")]})}),e.jsx("input",{id:"import-template",type:"file",accept:".json",className:"hidden",onChange:s=>{var r;if((r=s.target.files)!=null&&r[0]){const x=new FormData;x.append("template_file",s.target.files[0]),i.post(a("cms.templates.import"),x)}}}),e.jsx(c,{asChild:!0,children:e.jsxs(k,{href:a("cms.templates.create"),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),t("cms.create_template","Create Template")]})})]})]}),e.jsxs(u,{children:[e.jsx(D,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),t("common.filters","Filters")]})}),e.jsx(j,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{placeholder:t("cms.search_templates","Search templates..."),value:w,onChange:s=>H(s.target.value),onKeyPress:s=>s.key==="Enter"&&y()}),e.jsx(c,{variant:"outline",onClick:y,children:e.jsx(ae,{className:"h-4 w-4"})})]})}),e.jsxs(A,{value:o.category||"all",onValueChange:s=>C("category",s==="all"?"":s),children:[e.jsx(E,{children:e.jsx(P,{placeholder:t("cms.all_categories","All categories")})}),e.jsxs(z,{children:[e.jsx(h,{value:"all",children:t("cms.all_categories","All categories")}),Object.entries(N).map(([s,r])=>e.jsx(h,{value:s,children:r},s))]})]}),e.jsxs(A,{value:o.status||"all",onValueChange:s=>C("status",s==="all"?"":s),children:[e.jsx(E,{children:e.jsx(P,{placeholder:t("cms.all_statuses","All statuses")})}),e.jsxs(z,{children:[e.jsx(h,{value:"all",children:t("cms.all_statuses","All statuses")}),e.jsx(h,{value:"active",children:t("cms.active","Active")}),e.jsx(h,{value:"inactive",children:t("cms.inactive","Inactive")})]})]})]})})]}),d.length>0&&e.jsx(u,{children:e.jsx(j,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.length," ",t("cms.templates_selected","templates selected")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>v("activate"),children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),t("cms.activate","Activate")]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>v("deactivate"),children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),t("cms.deactivate","Deactivate")]}),e.jsxs(c,{variant:"destructive",size:"sm",onClick:()=>v("delete"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),t("common.delete","Delete")]})]})]})})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:(b=m.data)==null?void 0:b.map(s=>{var r,x,_;return e.jsxs(u,{className:"group hover:shadow-md transition-shadow",children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{checked:d.includes(s.id),onCheckedChange:R=>{f(R?g=>[...g,s.id]:g=>g.filter(q=>q!==s.id))}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(T,{className:"flex items-center gap-2",children:[s.name,s.is_default&&e.jsx(V,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),e.jsx(J,{children:s.description})]})]}),e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsxs($,{align:"end",children:[e.jsxs(n,{onClick:()=>l(s.id,"view"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),t("common.view","View")]}),e.jsxs(n,{onClick:()=>l(s.id,"edit"),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),t("common.edit","Edit")]}),e.jsxs(n,{onClick:()=>l(s.id,"preview"),children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),t("cms.preview","Preview")]}),e.jsx(F,{}),e.jsxs(n,{onClick:()=>l(s.id,"duplicate"),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),t("cms.duplicate","Duplicate")]}),e.jsxs(n,{onClick:()=>l(s.id,"export"),children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),t("cms.export","Export")]}),!s.is_default&&e.jsxs(n,{onClick:()=>l(s.id,"set-default"),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),t("cms.set_as_default","Set as Default")]}),e.jsx(F,{}),e.jsxs(n,{onClick:()=>l(s.id,"delete"),className:"text-destructive",disabled:(((r=s.usage_stats)==null?void 0:r.total_pages)||0)>0,children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),t("common.delete","Delete")]})]})]})]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center border",children:e.jsx(p,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:t("cms.category","Category")}),e.jsx(M,{variant:"outline",children:N[s.category]||s.category})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:t("cms.status","Status")}),e.jsx(M,{variant:s.is_active?"default":"secondary",children:s.is_active?t("cms.active","Active"):t("cms.inactive","Inactive")})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:t("cms.pages_using","Pages using")}),e.jsx("span",{className:"font-medium",children:((x=s.usage_stats)==null?void 0:x.total_pages)||0})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:t("cms.created_by","Created by")}),e.jsx("span",{children:((_=s.created_by)==null?void 0:_.name)||"Unknown"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:t("cms.created_at","Created")}),e.jsx("span",{children:Q(s.created_at)})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(c,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>l(s.id,"preview"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),t("cms.preview","Preview")]}),e.jsxs(c,{size:"sm",className:"flex-1",onClick:()=>l(s.id,"edit"),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),t("common.edit","Edit")]})]})]})})]},s.id)})}),m.data.length===0&&e.jsx(u,{children:e.jsxs(j,{className:"text-center py-8",children:[e.jsx(p,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:t("cms.no_templates_found","No templates found")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:t("cms.create_first_template","Create your first template to get started")}),e.jsx(c,{asChild:!0,children:e.jsxs(k,{href:a("cms.templates.create"),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),t("cms.create_template","Create Template")]})})]})}),m.links&&m.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",m.from||0," to ",m.to||0," of ",m.total||0," results"]}),e.jsx("div",{className:"flex gap-2",children:m.links.map((s,r)=>e.jsx(c,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&i.visit(s.url),dangerouslySetInnerHTML:{__html:s.label}},r))})]})]})]})}export{ns as default};
