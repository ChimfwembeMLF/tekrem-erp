import{j as e,S as A,x as o}from"./app-BMIA6nir.js";import{C as S}from"./CustomerLayout-7LFTkDxI.js";import{C as r,a as t,b as i,c as a,d as g}from"./card-BAsSN-2Z.js";import{B as x,X as w,U as _}from"./x-C3KwZK3B.js";import{B as l}from"./createLucideIcon-Cg8jdX0w.js";import{S as j}from"./separator-DnQonHW9.js";import{A as F}from"./arrow-left-UX2kDF52.js";import{D as v}from"./download-CNZP3fGS.js";import{C as b}from"./index-BN56TOeV.js";import{D as Q}from"./dollar-sign-Cli0KufN.js";import{C as U}from"./calendar-DTsvo4Hi.js";import{C}from"./clock-BTinGqFV.js";import{F as D}from"./file-text-D25AipK4.js";import{B}from"./building-DIkCZBBP.js";import{M as p}from"./mail-CApE3o7R.js";import{P as k}from"./phone-347MTOqH.js";import"./avatar-DdiG0YBt.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";import"./NotificationComponent-CHA3vjZG.js";import"./index-BeGDJhOY.js";import"./index-DgfI6AGt.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";import"./sheet-1SUjjT9Y.js";import"./users-3SuyoAg3.js";import"./log-out-B525vUfE.js";import"./message-square-32k9udjC.js";function ne({quotation:s}){const h=c=>{switch(c){case"accepted":return"secondary";case"pending":return"default";case"rejected":return"destructive";case"expired":return"outline";case"draft":return"outline";default:return"outline"}},n=c=>new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),d=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c),m=()=>new Date(s.valid_until)<new Date,f=()=>s.status==="pending"&&!m(),u=()=>{window.open(route("customer.finance.quotations.download",s.id),"_blank")},N=()=>{confirm("Are you sure you want to accept this quotation?")&&(window.location.href=route("customer.finance.quotations.accept",s.id))},y=()=>{confirm("Are you sure you want to reject this quotation?")&&(window.location.href=route("customer.finance.quotations.reject",s.id))};return e.jsxs(S,{children:[e.jsx(A,{title:`Quotation ${s.quotation_number}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{href:route("customer.finance.index"),children:e.jsxs(l,{variant:"outline",size:"sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Back to Finance"]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Quotation ",s.quotation_number]}),e.jsx(x,{variant:h(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),m()&&s.status==="pending"&&e.jsx(x,{variant:"destructive",children:"Expired"})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Issued on ",n(s.issue_date)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",onClick:u,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),f()&&e.jsxs(e.Fragment,{children:[e.jsxs(l,{variant:"outline",onClick:y,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Reject"]}),e.jsxs(l,{onClick:N,children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Accept"]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(r,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Amount"}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:d(s.total_amount)})})]}),e.jsxs(r,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Issue Date"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-lg font-bold",children:n(s.issue_date)})})]}),e.jsxs(r,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Valid Until"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:`text-lg font-bold ${m()?"text-destructive":""}`,children:n(s.valid_until)})})]}),e.jsxs(r,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Status"}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx(x,{variant:h(s.status),className:"text-sm",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})})]})]}),s.status==="pending"&&m()&&e.jsx(r,{className:"border-destructive",children:e.jsxs(a,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("p",{className:"font-medium",children:"This quotation has expired"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Please contact us to request a new quotation or extend the validity period."})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(r,{children:[e.jsx(t,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Quotation Details"}),e.jsx(g,{children:"Complete breakdown of proposed services and pricing"})]}),s.company.logo&&e.jsx("img",{src:s.company.logo,alt:s.company.name,className:"h-12 w-auto"})]})}),e.jsxs(a,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"From"]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{className:"font-medium",children:s.company.name}),s.company.address&&e.jsx("p",{children:s.company.address}),(s.company.city||s.company.state||s.company.zip)&&e.jsx("p",{children:[s.company.city,s.company.state,s.company.zip].filter(Boolean).join(", ")}),s.company.country&&e.jsx("p",{children:s.company.country}),s.company.email&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(p,{className:"h-3 w-3"}),s.company.email]}),s.company.phone&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"}),s.company.phone]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),"Quote For"]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{className:"font-medium",children:s.client.name}),s.client.address&&e.jsx("p",{children:s.client.address}),(s.client.city||s.client.state||s.client.zip)&&e.jsx("p",{children:[s.client.city,s.client.state,s.client.zip].filter(Boolean).join(", ")}),s.client.country&&e.jsx("p",{children:s.client.country}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(p,{className:"h-3 w-3"}),s.client.email]}),s.client.phone&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"}),s.client.phone]})]})]})]}),e.jsx(j,{className:"my-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Proposed Services"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium",children:"Description"}),e.jsx("th",{className:"text-right p-3 font-medium",children:"Qty"}),e.jsx("th",{className:"text-right p-3 font-medium",children:"Unit Price"}),e.jsx("th",{className:"text-right p-3 font-medium",children:"Total"})]})}),e.jsx("tbody",{children:s.items.map(c=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:c.description}),e.jsx("td",{className:"p-3 text-right",children:c.quantity}),e.jsx("td",{className:"p-3 text-right",children:d(c.unit_price)}),e.jsx("td",{className:"p-3 text-right font-medium",children:d(c.total)})]},c.id))})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:d(s.subtotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax:"}),e.jsx("span",{children:d(s.tax_amount)})]}),e.jsx(j,{}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:d(s.total_amount)})]})]})})]}),(s.notes||s.terms)&&e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"my-6"}),e.jsxs("div",{className:"space-y-4",children:[s.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})]}),s.terms&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Terms & Conditions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.terms})]})]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[f()&&e.jsxs(r,{className:"border-primary",children:[e.jsxs(t,{children:[e.jsx(i,{className:"text-primary",children:"Action Required"}),e.jsx(g,{children:"Please review and respond to this quotation"})]}),e.jsxs(a,{className:"space-y-3",children:[e.jsxs(l,{onClick:N,className:"w-full",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Accept Quotation"]}),e.jsxs(l,{variant:"outline",onClick:y,className:"w-full",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Reject Quotation"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Valid until ",n(s.valid_until)]})]})]}),e.jsxs(r,{children:[e.jsx(t,{children:e.jsx(i,{children:"Quick Actions"})}),e.jsxs(a,{className:"space-y-2",children:[e.jsxs(l,{variant:"outline",className:"w-full justify-start",onClick:u,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),e.jsx(o,{href:route("customer.communications.create"),className:"block",children:e.jsxs(l,{variant:"outline",className:"w-full justify-start",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Ask Questions"]})}),e.jsx(o,{href:route("customer.support.create"),className:"block",children:e.jsxs(l,{variant:"outline",className:"w-full justify-start",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Request Changes"]})})]})]}),e.jsxs(r,{children:[e.jsx(t,{children:e.jsx(i,{children:"Quotation Information"})}),e.jsxs(a,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quotation Number"}),e.jsx("p",{className:"font-medium",children:s.quotation_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Issue Date"}),e.jsx("p",{className:"font-medium",children:n(s.issue_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Valid Until"}),e.jsx("p",{className:`font-medium ${m()?"text-destructive":""}`,children:n(s.valid_until)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(x,{variant:h(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})]})]})]})]})]})]})}export{ne as default};
