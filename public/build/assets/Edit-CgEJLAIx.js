import{G as q,j as e,S as V,x as w}from"./app-BMIA6nir.js";import{A as I,a as P}from"./AppLayout-DbMk6clK.js";import{C as g,a as f,b as _,c as y,d as O}from"./card-BAsSN-2Z.js";import{B as N}from"./createLucideIcon-Cg8jdX0w.js";import{I as p}from"./input-Bg5GDATO.js";import{L as c}from"./label-CM6YsqH1.js";import{T as U}from"./textarea-CP26afIU.js";import{S as x,a as h,b as u,c as j,d as m}from"./select-B6KOX9nY.js";import{u as Y}from"./useTranslate-ER5gAOX6.js";import{t as B}from"./index-Dj2TB_RL.js";import{A as z}from"./arrow-left-UX2kDF52.js";import{D as G}from"./dollar-sign-Cli0KufN.js";import{B as H}from"./building-DIkCZBBP.js";import{C as R}from"./calendar-DTsvo4Hi.js";import{T as $}from"./target-DIhftedx.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./x-C3KwZK3B.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function ze({budget:n,accounts:v,categories:E,periodTypes:F,statuses:T}){var D;const{t:s}=Y(),{data:a,setData:i,put:A,processing:b,errors:r}=q({account_id:n.account_id.toString(),category_id:((D=n.category_id)==null?void 0:D.toString())||"",name:n.name,description:n.description||"",amount:n.amount.toString(),period_type:n.period_type,start_date:n.start_date,end_date:n.end_date,status:n.status}),k=t=>{t.preventDefault(),A(route("finance.budgets.update",n.id),{onSuccess:()=>{B.success(s("finance.budget_updated","Budget updated successfully"))},onError:()=>{B.error(s("common.error_occurred","An error occurred"))}})},C=(t,d)=>{if(!t)return"";const o=new Date(t);let l=new Date(o);switch(d){case"weekly":l.setDate(o.getDate()+7);break;case"monthly":l.setMonth(o.getMonth()+1);break;case"quarterly":l.setMonth(o.getMonth()+3);break;case"yearly":l.setFullYear(o.getFullYear()+1);break;default:l.setMonth(o.getMonth()+1)}return l.toISOString().split("T")[0]},M=t=>{if(i("period_type",t),a.start_date){const d=C(a.start_date,t);i("end_date",d)}},L=t=>{if(i("start_date",t),t){const d=C(t,a.period_type);i("end_date",d)}},S=v.find(t=>t.id.toString()===a.account_id);return e.jsxs(I,{title:s("finance.edit_budget","Edit Budget"),breadcrumbs:[{label:s("finance.title","Finance"),href:"/finance"},{label:s("finance.budgets","Budgets"),href:"/finance/budgets"},{label:n.name,href:`/finance/budgets/${n.id}`},{label:s("common.edit","Edit")}],children:[e.jsx(V,{title:s("finance.edit_budget","Edit Budget")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(w,{href:route("finance.budgets.show",n.id),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),s("common.back","Back")]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s("finance.edit_budget","Edit Budget")}),e.jsxs("p",{className:"text-muted-foreground",children:[s("finance.edit_budget_description","Update budget information")," - ",n.name]})]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),s("finance.budget_details","Budget Details")]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"name",children:[s("finance.budget_name","Budget Name")," *"]}),e.jsx(p,{id:"name",placeholder:s("finance.budget_name_placeholder","Enter budget name..."),value:a.name,onChange:t=>i("name",t.target.value),required:!0}),r.name&&e.jsx("p",{className:"text-sm text-red-600",children:r.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:s("finance.description","Description")}),e.jsx(U,{id:"description",placeholder:s("finance.budget_description_placeholder","Describe the purpose of this budget..."),value:a.description,onChange:t=>i("description",t.target.value),rows:3}),r.description&&e.jsx("p",{className:"text-sm text-red-600",children:r.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"amount",children:[s("finance.budget_amount","Budget Amount")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"amount",type:"number",min:"0",step:"0.01",placeholder:"0.00",value:a.amount,onChange:t=>i("amount",t.target.value),className:"pl-8",required:!0})]}),S&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Currency: ",S.currency]}),r.amount&&e.jsx("p",{className:"text-sm text-red-600",children:r.amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"status",children:[s("common.status","Status")," *"]}),e.jsxs(x,{value:a.status,onValueChange:t=>i("status",t),children:[e.jsx(h,{children:e.jsx(u,{})}),e.jsx(j,{children:Object.entries(T).map(([t,d])=>e.jsx(m,{value:t,children:d},t))})]}),r.status&&e.jsx("p",{className:"text-sm text-red-600",children:r.status})]})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),s("finance.account_category","Account & Category")]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"account_id",children:[s("finance.account","Account")," *"]}),e.jsxs(x,{value:a.account_id,onValueChange:t=>i("account_id",t),children:[e.jsx(h,{children:e.jsx(u,{placeholder:s("finance.select_account","Select account")})}),e.jsx(j,{children:v.map(t=>e.jsx(m,{value:t.id.toString(),children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.type," - ",t.currency]})]})},t.id))})]}),r.account_id&&e.jsx("p",{className:"text-sm text-red-600",children:r.account_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"category_id",children:s("finance.category","Category")}),e.jsxs(x,{value:a.category_id,onValueChange:t=>i("category_id",t),children:[e.jsx(h,{children:e.jsx(u,{placeholder:s("finance.select_category","Select category (optional)")})}),e.jsxs(j,{children:[e.jsx(m,{value:"none",children:s("finance.no_category","No category")}),E.map(t=>e.jsx(m,{value:t.id.toString(),children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]})},t.id))]})]}),r.category_id&&e.jsx("p",{className:"text-sm text-red-600",children:r.category_id})]})]})]})]}),e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),s("finance.budget_period","Budget Period")]}),e.jsx(O,{children:s("finance.budget_period_description","Define the time period for this budget")})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"period_type",children:[s("finance.period_type","Period Type")," *"]}),e.jsxs(x,{value:a.period_type,onValueChange:M,children:[e.jsx(h,{children:e.jsx(u,{})}),e.jsx(j,{children:Object.entries(F).map(([t,d])=>e.jsx(m,{value:t,children:d},t))})]}),r.period_type&&e.jsx("p",{className:"text-sm text-red-600",children:r.period_type})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"start_date",children:[s("finance.start_date","Start Date")," *"]}),e.jsx(p,{id:"start_date",type:"date",value:a.start_date,onChange:t=>L(t.target.value),required:!0}),r.start_date&&e.jsx("p",{className:"text-sm text-red-600",children:r.start_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"end_date",children:[s("finance.end_date","End Date")," *"]}),e.jsx(p,{id:"end_date",type:"date",value:a.end_date,onChange:t=>i("end_date",t.target.value),required:!0}),r.end_date&&e.jsx("p",{className:"text-sm text-red-600",children:r.end_date})]})]}),a.start_date&&a.end_date&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:s("finance.budget_duration","Budget Duration")})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[new Date(a.start_date).toLocaleDateString()," - ",new Date(a.end_date).toLocaleDateString()," ","(",Math.ceil((new Date(a.end_date).getTime()-new Date(a.start_date).getTime())/(1e3*60*60*24))," days)"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(N,{type:"button",variant:"outline",asChild:!0,children:e.jsx(w,{href:route("finance.budgets.show",n.id),children:s("common.cancel","Cancel")})}),e.jsx(N,{type:"submit",disabled:b,children:b?s("common.saving","Saving..."):s("finance.update_budget","Update Budget")})]})]})]})]})}export{ze as default};
