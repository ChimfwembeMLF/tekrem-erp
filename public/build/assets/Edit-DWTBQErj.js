import{r as v,G as L,j as e,S as B,x as _}from"./app-BMIA6nir.js";import{A as U}from"./AppLayout-DbMk6clK.js";import{C as H,a as O,b as R,d as z,c as G}from"./card-BAsSN-2Z.js";import{B as x}from"./createLucideIcon-Cg8jdX0w.js";import{I as f}from"./input-Bg5GDATO.js";import{L as o}from"./label-CM6YsqH1.js";import{T as K}from"./textarea-CP26afIU.js";import{S as l,a as m,b as p,c as u,d}from"./select-B6KOX9nY.js";import{u as M}from"./useTranslate-ER5gAOX6.js";import{t as C}from"./index-Dj2TB_RL.js";import{A as S,a as T}from"./alert-CNp8ZuHk.js";import{A as P}from"./arrow-left-UX2kDF52.js";import{C as q}from"./NotificationComponent-CHA3vjZG.js";import{C as w}from"./circle-alert-DVIk47WR.js";import{S as J}from"./save-D6UyxhH5.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./x-C3KwZK3B.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./bell-5VRgJnzP.js";function Pe({transaction:n,accounts:j,categories:h,transactionTypes:A,statuses:E}){var N,b;const{t:a}=M(),[F,g]=v.useState(h),{data:s,setData:c,put:V,processing:y,errors:r}=L({type:n.type,amount:n.amount.toString(),description:n.description,transaction_date:n.transaction_date,account_id:n.account_id.toString(),category_id:((N=n.category_id)==null?void 0:N.toString())||"",transfer_to_account_id:((b=n.transfer_to_account_id)==null?void 0:b.toString())||"",reference_number:n.reference_number||"",status:n.status});v.useEffect(()=>{if(s.type){const t=h.filter(i=>i.type===s.type||i.type==="both");g(t),s.category_id&&!t.find(i=>i.id.toString()===s.category_id)&&c("category_id","")}else g(h)},[s.type,h]);const D=j.filter(t=>t.id.toString()!==s.account_id),k=t=>{t.preventDefault(),V(route("finance.transactions.update",n.id),{onSuccess:()=>{C.success(a("finance.transaction_updated","Transaction updated successfully"))},onError:i=>{C.error(a("finance.update_error","Error updating transaction"))}})},I=t=>{c(i=>({...i,type:t,category_id:"",transfer_to_account_id:t==="transfer"?i.transfer_to_account_id:""}))};return e.jsxs(U,{title:a("finance.edit_transaction","Edit Transaction"),children:[e.jsx(B,{title:a("finance.edit_transaction","Edit Transaction")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(_,{href:route("finance.transactions.index"),children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),a("common.back","Back")]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:a("finance.edit_transaction","Edit Transaction")}),e.jsx("p",{className:"text-muted-foreground",children:a("finance.edit_transaction_description","Update the transaction details")})]})]}),e.jsxs(H,{children:[e.jsxs(O,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),a("finance.transaction_details","Transaction Details")]}),e.jsx(z,{children:a("finance.edit_transaction_details_description","Modify the transaction information below")})]}),e.jsx(G,{children:e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"type",children:[a("finance.transaction_type","Transaction Type")," *"]}),e.jsxs(l,{value:s.type,onValueChange:I,children:[e.jsx(m,{className:r.type?"border-red-500":"",children:e.jsx(p,{placeholder:a("finance.select_transaction_type","Select transaction type")})}),e.jsx(u,{children:Object.entries(A).map(([t,i])=>e.jsx(d,{value:t,children:i},t))})]}),r.type&&e.jsx("p",{className:"text-sm text-red-600",children:r.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"amount",children:[a("finance.amount","Amount")," *"]}),e.jsx(f,{id:"amount",type:"number",step:"0.01",min:"0.01",value:s.amount,onChange:t=>c("amount",t.target.value),placeholder:"0.00",className:r.amount?"border-red-500":""}),r.amount&&e.jsx("p",{className:"text-sm text-red-600",children:r.amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"account_id",children:[a("finance.account","Account")," *"]}),e.jsxs(l,{value:s.account_id,onValueChange:t=>c("account_id",t),children:[e.jsx(m,{className:r.account_id?"border-red-500":"",children:e.jsx(p,{placeholder:a("finance.select_account","Select account")})}),e.jsx(u,{children:j.map(t=>e.jsxs(d,{value:t.id.toString(),children:[t.name," (",t.currency,")"]},t.id))})]}),r.account_id&&e.jsx("p",{className:"text-sm text-red-600",children:r.account_id})]}),s.type==="transfer"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"transfer_to_account_id",children:[a("finance.transfer_to_account","Transfer To Account")," *"]}),e.jsxs(l,{value:s.transfer_to_account_id,onValueChange:t=>c("transfer_to_account_id",t),children:[e.jsx(m,{className:r.transfer_to_account_id?"border-red-500":"",children:e.jsx(p,{placeholder:a("finance.select_destination_account","Select destination account")})}),e.jsx(u,{children:D.map(t=>e.jsxs(d,{value:t.id.toString(),children:[t.name," (",t.currency,")"]},t.id))})]}),r.transfer_to_account_id&&e.jsx("p",{className:"text-sm text-red-600",children:r.transfer_to_account_id})]}),s.type&&s.type!=="transfer"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"category_id",children:a("finance.category","Category")}),e.jsxs(l,{value:s.category_id,onValueChange:t=>c("category_id",t),children:[e.jsx(m,{className:r.category_id?"border-red-500":"",children:e.jsx(p,{placeholder:a("finance.select_category","Select category")})}),e.jsxs(u,{children:[e.jsx(d,{value:"none",children:a("common.no_category","No Category")}),F.map(t=>e.jsx(d,{value:t.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.color}}),t.name]})},t.id))]})]}),r.category_id&&e.jsx("p",{className:"text-sm text-red-600",children:r.category_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"transaction_date",children:[a("finance.transaction_date","Transaction Date")," *"]}),e.jsx(f,{id:"transaction_date",type:"date",value:s.transaction_date,onChange:t=>c("transaction_date",t.target.value),className:r.transaction_date?"border-red-500":""}),r.transaction_date&&e.jsx("p",{className:"text-sm text-red-600",children:r.transaction_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"status",children:[a("common.status","Status")," *"]}),e.jsxs(l,{value:s.status,onValueChange:t=>c("status",t),children:[e.jsx(m,{className:r.status?"border-red-500":"",children:e.jsx(p,{placeholder:a("finance.select_status","Select status")})}),e.jsx(u,{children:Object.entries(E).map(([t,i])=>e.jsx(d,{value:t,children:i},t))})]}),r.status&&e.jsx("p",{className:"text-sm text-red-600",children:r.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"reference_number",children:a("finance.reference_number","Reference Number")}),e.jsx(f,{id:"reference_number",type:"text",value:s.reference_number,onChange:t=>c("reference_number",t.target.value),placeholder:a("finance.reference_number_placeholder","e.g., INV-001, CHK-123"),className:r.reference_number?"border-red-500":""}),r.reference_number&&e.jsx("p",{className:"text-sm text-red-600",children:r.reference_number})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"description",children:[a("common.description","Description")," *"]}),e.jsx(K,{id:"description",value:s.description,onChange:t=>c("description",t.target.value),placeholder:a("finance.transaction_description_placeholder","Enter transaction description"),rows:3,className:r.description?"border-red-500":""}),r.description&&e.jsx("p",{className:"text-sm text-red-600",children:r.description})]}),s.status==="pending"&&e.jsxs(S,{children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx(T,{children:a("finance.pending_transaction_note","Pending transactions will not affect account balances until marked as completed.")})]}),n.status!==s.status&&e.jsxs(S,{children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx(T,{children:a("finance.status_change_note","Changing the status will recalculate account balances.")})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-6 border-t",children:[e.jsxs(x,{type:"submit",disabled:y,children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),y?a("common.updating","Updating..."):a("finance.update_transaction","Update Transaction")]}),e.jsx(x,{type:"button",variant:"outline",asChild:!0,children:e.jsx(_,{href:route("finance.transactions.index"),children:a("common.cancel","Cancel")})}),e.jsx(x,{type:"button",variant:"outline",asChild:!0,children:e.jsx(_,{href:route("finance.transactions.show",n.id),children:a("common.view","View Transaction")})})]})]})})]})]})]})}export{Pe as default};
