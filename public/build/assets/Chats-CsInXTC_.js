import{r as j,j as e,S as C,x as i,A as o}from"./app-BMIA6nir.js";import{C as b}from"./CustomerLayout-7LFTkDxI.js";import{C as m,c as d}from"./card-BAsSN-2Z.js";import{B as r}from"./createLucideIcon-Cg8jdX0w.js";import{I as A}from"./input-Bg5GDATO.js";import{B as T}from"./x-C3KwZK3B.js";import{S as k,a as M,b as _,c as L,d as n}from"./select-B6KOX9nY.js";import{u as D}from"./useTranslate-ER5gAOX6.js";import{A as I}from"./arrow-left-UX2kDF52.js";import{P as f}from"./plus-BjPf5uI-.js";import{S as B}from"./search-_p1CX5vB.js";import{M as g}from"./message-circle-CVsRMw7b.js";import{U as P}from"./users-3SuyoAg3.js";import{C as E}from"./clock-BTinGqFV.js";import"./avatar-DdiG0YBt.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";import"./NotificationComponent-CHA3vjZG.js";import"./index-BN56TOeV.js";import"./index-BeGDJhOY.js";import"./index-DgfI6AGt.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";import"./sheet-1SUjjT9Y.js";import"./log-out-B525vUfE.js";import"./message-square-32k9udjC.js";import"./file-text-D25AipK4.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";function he({chats:l,filters:x}){const{t}=D(),[c,v]=j.useState(x.search||""),[u,N]=j.useState(x.status||""),h=()=>{o.get(route("customer.communications.chats"),{search:c,status:u},{preserveState:!0,replace:!0})},y=(s,a)=>{N(a),o.get(route("customer.communications.chats"),{search:c,status:a==="all"?"":a},{preserveState:!0,replace:!0})},w=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},S=s=>{const a=new Date(s),p=(new Date().getTime()-a.getTime())/(1e3*60*60);return p<24?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):p<168?a.toLocaleDateString([],{weekday:"short"}):a.toLocaleDateString([],{month:"short",day:"numeric"})};return e.jsxs(b,{children:[e.jsx(C,{title:"Chat Conversations"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t("Chat Conversations")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("Manage your chat conversations with our support team")})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(i,{href:route("customer.communications.index"),children:e.jsxs(r,{variant:"outline",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),t("All Communications")]})}),e.jsx(i,{href:route("customer.communications.create"),children:e.jsxs(r,{children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),t("New Request")]})})]})]}),e.jsx(m,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(A,{placeholder:t("Search conversations..."),value:c,onChange:s=>v(s.target.value),onKeyPress:s=>s.key==="Enter"&&h(),className:"pl-10"})]})}),e.jsx("div",{className:"sm:w-48",children:e.jsxs(k,{value:u||"all",onValueChange:s=>y("status",s),children:[e.jsx(M,{children:e.jsx(_,{placeholder:t("All Statuses")})}),e.jsxs(L,{children:[e.jsx(n,{value:"all",children:t("All Statuses")}),e.jsx(n,{value:"active",children:t("Active")}),e.jsx(n,{value:"pending",children:t("Pending")}),e.jsx(n,{value:"closed",children:t("Closed")})]})]})}),e.jsx(r,{onClick:h,children:t("Search")})]})})}),e.jsx("div",{className:"space-y-4",children:l.data.length>0?l.data.map(s=>{var a;return e.jsx(m,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(d,{className:"p-4",children:e.jsx(i,{href:route("customer.communications.chats.show",s.id),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"h-6 w-6 text-blue-600"})}),s.unread_count&&s.unread_count>0&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:s.unread_count})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:w(s.status),children:t(s.status.charAt(0).toUpperCase()+s.status.slice(1))}),e.jsx("span",{className:"text-xs text-gray-500",children:S(s.updated_at)})]})]}),s.lastMessage&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:[((a=s.lastMessage.user)==null?void 0:a.name)&&e.jsxs("span",{className:"font-medium",children:[s.lastMessage.user.name,": "]}),s.lastMessage.message]}),e.jsxs("div",{className:"flex items-center mt-2 space-x-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),s.participants.length," ",t("participants")]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),t("Created")," ",new Date(s.created_at).toLocaleDateString()]})]})]})]})})})})},s.id)}):e.jsx(m,{children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:t("No conversations found")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t("You haven't started any chat conversations yet.")}),e.jsx(i,{href:route("customer.communications.create"),children:e.jsxs(r,{children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),t("Start a Conversation")]})})]})})}),l.last_page>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex space-x-2",children:l.links.map((s,a)=>e.jsx(r,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&o.get(s.url),disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label}},a))})})]})]})}export{he as default};
