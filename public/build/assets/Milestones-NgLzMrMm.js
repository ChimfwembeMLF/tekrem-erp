import{u as v,j as e,S as w,x as b}from"./app-BMIA6nir.js";import{C as y}from"./CustomerLayout-7LFTkDxI.js";import{C as a,a as c,b as i,c as d,d as C}from"./card-BAsSN-2Z.js";import{B as l}from"./x-C3KwZK3B.js";import{B as _}from"./createLucideIcon-Cg8jdX0w.js";import{P as k}from"./progress-BgfGBUAj.js";import{A as P}from"./arrow-left-UX2kDF52.js";import{T as x}from"./target-DIhftedx.js";import{C as j}from"./circle-check-big-DCsv6rXk.js";import{C as n}from"./clock-BTinGqFV.js";import{C as p}from"./circle-alert-DVIk47WR.js";import{C as T}from"./calendar-DTsvo4Hi.js";import{U as D}from"./users-3SuyoAg3.js";import{P as B}from"./pause-DQg-zhyH.js";import"./avatar-DdiG0YBt.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";import"./NotificationComponent-CHA3vjZG.js";import"./index-BN56TOeV.js";import"./index-BeGDJhOY.js";import"./index-DgfI6AGt.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";import"./sheet-1SUjjT9Y.js";import"./log-out-B525vUfE.js";import"./message-square-32k9udjC.js";import"./file-text-D25AipK4.js";function ae({project:m,milestones:r}){const f=v(),o=s=>{switch(s){case"completed":return"secondary";case"in_progress":return"default";case"pending":return"outline";case"cancelled":return"destructive";default:return"outline"}},N=s=>{switch(s){case"completed":return e.jsx(j,{className:"h-4 w-4"});case"in_progress":return e.jsx(n,{className:"h-4 w-4"});case"pending":return e.jsx(B,{className:"h-4 w-4"});case"cancelled":return e.jsx(p,{className:"h-4 w-4"});default:return e.jsx(n,{className:"h-4 w-4"})}},g=s=>{switch(s){case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}},u=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),h=(s,t)=>t==="completed"?!1:new Date(s)<new Date;return e.jsxs(y,{children:[e.jsx(w,{title:`${m.name} - Milestones`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{href:f("customer.projects.show",m.id),children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Back to Project"]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[m.name," - Milestones"]}),e.jsx("p",{className:"text-muted-foreground",children:"Track key project milestones and their progress"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(a,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Milestones"}),e.jsx(x,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.length})})]}),e.jsxs(a,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Completed"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.filter(s=>s.status==="completed").length})})]}),e.jsxs(a,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(n,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.filter(s=>s.status==="in_progress").length})})]}),e.jsxs(a,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(p,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.filter(s=>h(s.due_date,s.status)).length})})]})]}),e.jsxs(a,{children:[e.jsxs(c,{children:[e.jsx(i,{children:"Project Milestones"}),e.jsx(C,{children:"Key milestones and their current progress"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-6",children:r.length>0?r.map(s=>e.jsxs("div",{className:"p-6 border rounded-lg",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.name}),e.jsxs(l,{variant:o(s.status),children:[N(s.status),e.jsx("span",{className:"ml-1 capitalize",children:s.status.replace("_"," ")})]}),e.jsx(l,{variant:g(s.priority),className:"text-xs",children:s.priority}),h(s.due_date,s.status)&&e.jsx(l,{variant:"destructive",className:"text-xs",children:"Overdue"})]}),e.jsx("p",{className:"text-muted-foreground mb-4",children:s.description})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.progress,"%"]})]}),e.jsx(k,{value:s.progress,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",u(s.due_date)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(x,{className:"h-4 w-4"}),e.jsxs("span",{children:["Tasks: ",s.completed_tasks_count,"/",s.tasks_count]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(n,{className:"h-4 w-4"}),e.jsxs("span",{children:["Created: ",u(s.created_at)]})]})]}),s.tasks.length>0&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Associated Tasks"}),e.jsxs("div",{className:"grid gap-2",children:[s.tasks.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:t.title}),e.jsx(l,{variant:o(t.status),className:"text-xs",children:t.status.replace("_"," ")})]}),t.assignedTo&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(D,{className:"h-3 w-3"}),t.assignedTo.name]})]},t.id)),s.tasks.length>5&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:["+",s.tasks.length-5," more tasks"]})]})]})]},s.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(x,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No milestones found"}),e.jsx("p",{className:"text-muted-foreground",children:"No milestones have been defined for this project yet."})]})})})]})]})]})}export{ae as default};
