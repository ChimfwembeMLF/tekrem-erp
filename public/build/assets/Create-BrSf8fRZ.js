import{u as F,r as S,j as e,S as k,A as y}from"./app-BMIA6nir.js";import{A as O}from"./AppLayout-DbMk6clK.js";import{C as o,a as r,b as d,d as g,c as p}from"./card-BAsSN-2Z.js";import{B as u}from"./createLucideIcon-Cg8jdX0w.js";import{I as C}from"./input-Bg5GDATO.js";import{L as n}from"./label-CM6YsqH1.js";import{T as x}from"./textarea-CP26afIU.js";import{S as E,a as D,b as J,c as I,d as L}from"./select-B6KOX9nY.js";import{S as b}from"./switch-_qD_kSA5.js";import{S as B}from"./separator-DnQonHW9.js";import{A as P,a as H}from"./alert-CNp8ZuHk.js";import{u as M}from"./useTranslate-ER5gAOX6.js";import{t as h}from"./index-Dj2TB_RL.js";import{A as V}from"./arrow-left-UX2kDF52.js";import{E as z}from"./eye-DdivFxyT.js";import{S as R}from"./save-D6UyxhH5.js";import{T as $}from"./triangle-alert-BWIpgUmg.js";import{C as q}from"./code-CCW4zUdR.js";import{S as G}from"./sheet-1SUjjT9Y.js";import"./useTypedPage-hmuARwun.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./x-C3KwZK3B.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function Qe({categories:w,errors:s}){const{t}=M(),f=F(),[v,m]=S.useState(!1),[c,N]=S.useState({name:"",slug:"",description:"",content:"",category:"",is_active:!0,is_default:!1,fields:"{}",settings:"{}"}),i=(a,l)=>{if(N(j=>({...j,[a]:l})),a==="name"&&!c.slug){const j=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");N(A=>({...A,slug:j}))}},_=async a=>{a.preventDefault(),m(!0);try{try{JSON.parse(c.fields),JSON.parse(c.settings)}catch{h.error(t("cms.invalid_json","Invalid JSON format in fields or settings")),m(!1);return}y.post(f("cms.templates.store"),{...c,fields:JSON.parse(c.fields),settings:JSON.parse(c.settings)},{onSuccess:()=>{h.success(t("cms.template_created","Template created successfully"))},onError:l=>{console.error("Validation errors:",l),h.error(t("cms.template_creation_failed","Failed to create template"))},onFinish:()=>{m(!1)}})}catch(l){console.error("Error creating template:",l),h.error(t("cms.template_creation_failed","Failed to create template")),m(!1)}},T=()=>{const a={...c,content:c.content||"<p>Preview content...</p>"};sessionStorage.setItem("template_preview",JSON.stringify(a)),window.open("/cms/templates/preview","_blank")};return e.jsxs(O,{children:[e.jsx(k,{title:t("cms.create_template","Create Template")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>y.visit(f("cms.templates.index")),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),t("common.back","Back")]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t("cms.create_template","Create Template")}),e.jsx("p",{className:"text-muted-foreground",children:t("cms.create_template_description","Create a new page template")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:"outline",onClick:T,disabled:!c.content,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),t("cms.preview","Preview")]}),e.jsxs(u,{onClick:_,disabled:v||!c.name||!c.content,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),v?t("common.saving","Saving..."):t("common.save","Save")]})]})]}),Object.keys(s||{}).length>0&&e.jsxs(P,{variant:"destructive",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx(H,{children:t("common.validation_errors","Please fix the validation errors below")})]}),e.jsx("form",{onSubmit:_,className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(o,{children:[e.jsxs(r,{children:[e.jsx(d,{children:t("cms.basic_information","Basic Information")}),e.jsx(g,{children:t("cms.template_basic_info_desc","Enter the basic template details")})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"name",children:[t("cms.template_name","Template Name")," *"]}),e.jsx(C,{id:"name",value:c.name,onChange:a=>i("name",a.target.value),placeholder:t("cms.enter_template_name","Enter template name"),className:s!=null&&s.name?"border-destructive":""}),(s==null?void 0:s.name)&&e.jsx("p",{className:"text-sm text-destructive",children:s.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"slug",children:t("cms.slug","Slug")}),e.jsx(C,{id:"slug",value:c.slug,onChange:a=>i("slug",a.target.value),placeholder:t("cms.auto_generated","Auto-generated from name"),className:s!=null&&s.slug?"border-destructive":""}),(s==null?void 0:s.slug)&&e.jsx("p",{className:"text-sm text-destructive",children:s.slug})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:t("cms.description","Description")}),e.jsx(x,{id:"description",value:c.description,onChange:a=>i("description",a.target.value),placeholder:t("cms.template_description_placeholder","Describe this template..."),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"category",children:[t("cms.category","Category")," *"]}),e.jsxs(E,{value:c.category,onValueChange:a=>i("category",a),children:[e.jsx(D,{className:s!=null&&s.category?"border-destructive":"",children:e.jsx(J,{placeholder:t("cms.select_category","Select a category")})}),e.jsx(I,{children:Object.entries(w).map(([a,l])=>e.jsx(L,{value:a,children:l},a))})]}),(s==null?void 0:s.category)&&e.jsx("p",{className:"text-sm text-destructive",children:s.category})]})]})]}),e.jsxs(o,{children:[e.jsxs(r,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),t("cms.template_content","Template Content")]}),e.jsx(g,{children:t("cms.template_content_desc","Enter the HTML/Blade template content")})]}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"content",children:[t("cms.content","Content")," *"]}),e.jsx(x,{id:"content",value:c.content,onChange:a=>i("content",a.target.value),placeholder:t("cms.template_content_placeholder","Enter your template HTML/Blade content..."),rows:15,className:`font-mono text-sm ${s!=null&&s.content?"border-destructive":""}`}),(s==null?void 0:s.content)&&e.jsx("p",{className:"text-sm text-destructive",children:s.content})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsx(r,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),t("cms.template_settings","Template Settings")]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:t("cms.active","Active")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("cms.template_active_desc","Make this template available for use")})]}),e.jsx(b,{checked:c.is_active,onCheckedChange:a=>i("is_active",a)})]}),e.jsx(B,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:t("cms.default_template","Default Template")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("cms.default_template_desc","Set as the default template for new pages")})]}),e.jsx(b,{checked:c.is_default,onCheckedChange:a=>i("is_default",a)})]})]})]}),e.jsxs(o,{children:[e.jsxs(r,{children:[e.jsx(d,{children:t("cms.advanced_settings","Advanced Settings")}),e.jsx(g,{children:t("cms.advanced_settings_desc","JSON configuration for fields and settings")})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"fields",children:t("cms.template_fields","Template Fields")}),e.jsx(x,{id:"fields",value:c.fields,onChange:a=>i("fields",a.target.value),placeholder:'{"field_name": {"type": "text", "label": "Field Label"}}',rows:4,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("cms.json_format","JSON format")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"settings",children:t("cms.template_settings_json","Template Settings")}),e.jsx(x,{id:"settings",value:c.settings,onChange:a=>i("settings",a.target.value),placeholder:'{"layout": "app", "cache_enabled": true}',rows:4,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("cms.json_format","JSON format")})]})]})]})]})]})})]})]})}export{Qe as default};
