import{u as y,j as e,S as v}from"./app-BMIA6nir.js";import{A as b}from"./AppLayout-DbMk6clK.js";import{B as j}from"./createLucideIcon-Cg8jdX0w.js";import{C as i,a as c,b as m,c as l}from"./card-BAsSN-2Z.js";import{U as p,B as n}from"./x-C3KwZK3B.js";import{u as w}from"./useTranslate-ER5gAOX6.js";import{C as d}from"./clock-BTinGqFV.js";import{S as u}from"./shield-DwKJ9Ble.js";import{U as x}from"./users-3SuyoAg3.js";import{A as k}from"./arrow-left-UX2kDF52.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";function he({user:t,roleHistory:a}){w();const o=y(),h=s=>{switch(s){case"admin":return"destructive";case"manager":return"default";case"staff":return"secondary";case"customer":return"outline";default:return"secondary"}},f=s=>{switch(s){case"assigned":return e.jsx(x,{className:"h-4 w-4 text-green-600"});case"removed":return e.jsx(x,{className:"h-4 w-4 text-red-600"});case"current":return e.jsx(u,{className:"h-4 w-4 text-blue-600"});default:return e.jsx(d,{className:"h-4 w-4 text-gray-600"})}},N=s=>{switch(s){case"assigned":return"text-green-600";case"removed":return"text-red-600";case"current":return"text-blue-600";default:return"text-gray-600"}};return e.jsxs(b,{title:`Role History - ${t.name}`,renderHeader:()=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:o("admin.roles.user-assignment"),children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Back to User Assignment"]})}),e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:["Role History - ",t.name]})]})}),children:[e.jsx(v,{title:`Role History - ${t.name}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"User Information"]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-16 w-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(p,{className:"h-8 w-8 text-gray-400"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.email}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["User ID: #",t.id]})]})]})})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-5 w-5"}),"Role History Timeline",e.jsxs(n,{variant:"secondary",children:[a.length," entries"]})]})}),e.jsx(l,{children:a.length>0?e.jsx("div",{className:"space-y-6",children:a.map((s,g)=>e.jsxs("div",{className:"relative",children:[g<a.length-1&&e.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-16 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-full flex items-center justify-center",children:f(s.action)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:`text-sm font-medium ${N(s.action)}`,children:s.action==="current"?"Current Roles":s.action==="assigned"?"Roles Assigned":s.action==="removed"?"Roles Removed":"Role Change"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(s.changed_at).toLocaleString()})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.roles.length>0?s.roles.map(r=>e.jsx(n,{variant:h(r.name),children:r.name},r.id)):e.jsx(n,{variant:"outline",children:"No roles"})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Changed by: ",s.changed_by]}),s.roles.length>0&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-300",children:[e.jsx("strong",{children:"Role descriptions:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:s.roles.map(r=>e.jsxs("li",{children:["â€¢ ",e.jsxs("strong",{children:[r.name,":"]})," ",r.description||"No description available"]},r.id))})]})]})})]})]},g))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No role history available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This user has no recorded role changes."})]})})]}),a.length>0&&a[0].action==="current"&&e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Current Role Summary"]})}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Active Roles"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a[0].roles.map(s=>e.jsx(n,{variant:h(s.name),children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Role Count"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a[0].roles.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a[0].roles.length===1?"role assigned":"roles assigned"})]})]})})]}),e.jsx(i,{children:e.jsx(l,{className:"p-6",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(j,{asChild:!0,children:e.jsxs("a",{href:o("admin.roles.user-assignment"),children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),"Manage User Roles"]})})})})})]})})]})}export{he as default};
