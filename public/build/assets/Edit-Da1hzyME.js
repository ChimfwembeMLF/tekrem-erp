import{u as B,G as M,j as e,S as R,x as q}from"./app-BMIA6nir.js";import{A as z}from"./AppLayout-DbMk6clK.js";import{C as x,a as j,b as u,d as g,c as v}from"./card-BAsSN-2Z.js";import{B as w}from"./createLucideIcon-Cg8jdX0w.js";import{I as N}from"./input-Bg5GDATO.js";import{L as a}from"./label-CM6YsqH1.js";import{T as G}from"./textarea-CP26afIU.js";import{S as c,a as o,b as m,c as p,d as r}from"./select-B6KOX9nY.js";import{C as $}from"./checkbox-B8CiFAgv.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./x-C3KwZK3B.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./useTranslate-ER5gAOX6.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function Me({auth:I,project:_,task:d,milestones:H,staffUsers:V,availableTasks:y,tags:f}){var D,b,F,T,E;const C=B(),{data:t,setData:l,put:L,processing:S,errors:i}=M({title:d.title||"",description:d.description||"",status:d.status||"pending",priority:d.priority||"medium",due_date:d.due_date||"",estimated_hours:((D=d.estimated_hours)==null?void 0:D.toString())||"",milestone_id:((b=d.milestone_id)==null?void 0:b.toString())||"empty",assigned_to:((F=d.assigned_to)==null?void 0:F.toString())||"empty",dependencies:((T=d.dependencies)==null?void 0:T.map(s=>s.id))||[],tags:((E=d.tags)==null?void 0:E.map(s=>s.id))||[]}),A=s=>{s.preventDefault();const n={...t,milestone_id:t.milestone_id==="empty"?"":t.milestone_id,assigned_to:t.assigned_to==="empty"?"":t.assigned_to};L(C("projects.tasks.update",[_.id,d.id]),{data:n})},P=s=>{const n=t.dependencies;n.includes(s)?l("dependencies",n.filter(h=>h!==s)):l("dependencies",[...n,s])},U=s=>{const n=t.tags;n.includes(s)?l("tags",n.filter(h=>h!==s)):l("tags",[...n,s])};return e.jsxs(z,{title:`Edit ${d.title}`,renderHeader:()=>e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:["Edit Task: ",d.title]}),children:[e.jsx(R,{title:`Edit ${d.title}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsx("form",{onSubmit:A,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsxs(j,{children:[e.jsx(u,{children:"Task Information"}),e.jsx(g,{children:"Update the task details"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"title",children:["Task Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{id:"title",value:t.title,onChange:s=>l("title",s.target.value),placeholder:"Enter task title"}),i.title&&e.jsx("p",{className:"text-red-500 text-sm",children:i.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"description",children:"Description"}),e.jsx(G,{id:"description",value:t.description,onChange:s=>l("description",s.target.value),placeholder:"Describe the task requirements and acceptance criteria",rows:4}),i.description&&e.jsx("p",{className:"text-red-500 text-sm",children:i.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"status",children:"Status"}),e.jsxs(c,{value:t.status,onValueChange:s=>l("status",s),children:[e.jsx(o,{children:e.jsx(m,{})}),e.jsxs(p,{children:[e.jsx(r,{value:"pending",children:"Pending"}),e.jsx(r,{value:"in-progress",children:"In Progress"}),e.jsx(r,{value:"completed",children:"Completed"}),e.jsx(r,{value:"on-hold",children:"On Hold"}),e.jsx(r,{value:"cancelled",children:"Cancelled"})]})]}),i.status&&e.jsx("p",{className:"text-red-500 text-sm",children:i.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"priority",children:["Priority ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(c,{value:t.priority,onValueChange:s=>l("priority",s),children:[e.jsx(o,{children:e.jsx(m,{})}),e.jsxs(p,{children:[e.jsx(r,{value:"low",children:"Low"}),e.jsx(r,{value:"medium",children:"Medium"}),e.jsx(r,{value:"high",children:"High"}),e.jsx(r,{value:"critical",children:"Critical"})]})]}),i.priority&&e.jsx("p",{className:"text-red-500 text-sm",children:i.priority})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"due_date",children:"Due Date"}),e.jsx(N,{id:"due_date",type:"date",value:t.due_date,onChange:s=>l("due_date",s.target.value)}),i.due_date&&e.jsx("p",{className:"text-red-500 text-sm",children:i.due_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"estimated_hours",children:"Estimated Hours"}),e.jsx(N,{id:"estimated_hours",type:"number",step:"0.5",value:t.estimated_hours,onChange:s=>l("estimated_hours",s.target.value),placeholder:"0"}),i.estimated_hours&&e.jsx("p",{className:"text-red-500 text-sm",children:i.estimated_hours})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"milestone_id",children:"Milestone"}),e.jsxs(c,{value:t.milestone_id,onValueChange:s=>l("milestone_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select milestone"})}),e.jsxs(p,{children:[e.jsx(r,{value:"empty",children:"No milestone"}),H.map(s=>e.jsx(r,{value:s.id.toString(),children:s.name},s.id))]})]}),i.milestone_id&&e.jsx("p",{className:"text-red-500 text-sm",children:i.milestone_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"assigned_to",children:"Assigned To"}),e.jsxs(c,{value:t.assigned_to,onValueChange:s=>l("assigned_to",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select assignee"})}),e.jsxs(p,{children:[e.jsx(r,{value:"empty",children:"No assignee"}),V.map(s=>e.jsx(r,{value:s.id.toString(),children:s.name},s.id))]})]}),i.assigned_to&&e.jsx("p",{className:"text-red-500 text-sm",children:i.assigned_to})]})]})]})]}),y.length>0&&e.jsxs(x,{children:[e.jsxs(j,{children:[e.jsx(u,{children:"Dependencies"}),e.jsx(g,{children:"Select tasks that must be completed before this one"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:`task-${s.id}`,checked:t.dependencies.includes(s.id),onCheckedChange:()=>P(s.id)}),e.jsx(a,{htmlFor:`task-${s.id}`,className:"text-sm",children:s.title})]},s.id))}),i.dependencies&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:i.dependencies})]})]}),f.length>0&&e.jsxs(x,{children:[e.jsxs(j,{children:[e.jsx(u,{children:"Tags"}),e.jsx(g,{children:"Select tags to categorize this task"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:`tag-${s.id}`,checked:t.tags.includes(s.id),onCheckedChange:()=>U(s.id)}),e.jsxs(a,{htmlFor:`tag-${s.id}`,className:"text-sm flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),s.name]})]},s.id))}),i.tags&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:i.tags})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(q,{href:C("projects.tasks.show",[_.id,d.id]),children:e.jsx(w,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(w,{type:"submit",disabled:S,children:S?"Updating...":"Update Task"})]})]})})})})]})}export{Me as default};
