import{r as V,G as L,j as e,S as O,x as D}from"./app-BMIA6nir.js";import{A as q,R as z}from"./AppLayout-DbMk6clK.js";import{C as u,a as j,b as f,c as g,d as G}from"./card-BAsSN-2Z.js";import{B as p}from"./createLucideIcon-Cg8jdX0w.js";import{I as m}from"./input-Bg5GDATO.js";import{L as c}from"./label-CM6YsqH1.js";import{T as I}from"./textarea-CP26afIU.js";import{S as N,a as _,b as v,c as y,d as x}from"./select-B6KOX9nY.js";import{u as M}from"./useTranslate-ER5gAOX6.js";import{t as E}from"./index-Dj2TB_RL.js";import{A as P}from"./arrow-left-UX2kDF52.js";import{T as k}from"./trending-up-00s2SIxN.js";import{D as H}from"./dollar-sign-Cli0KufN.js";import{B as J}from"./building-DIkCZBBP.js";import{D as X}from"./download-CNZP3fGS.js";import{U as $}from"./upload-DoO0wQwa.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./x-C3KwZK3B.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./file-text-D25AipK4.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function He({expense:i,accounts:C,categories:w,statuses:R}){var F;const{t:s}=M(),[h,A]=V.useState(null),{data:a,setData:n,put:T,processing:b,errors:r}=L({account_id:i.account_id.toString(),category_id:((F=i.category_id)==null?void 0:F.toString())||"",title:i.title,description:i.description||"",amount:i.amount.toString(),expense_date:i.expense_date,vendor:i.vendor||"",status:i.status,receipt:null}),B=t=>{var l;const d=((l=t.target.files)==null?void 0:l[0])||null;A(d),n("receipt",d)},U=t=>{t.preventDefault();const d=new FormData;Object.entries(a).forEach(([l,o])=>{o!=null&&(l==="receipt"&&o instanceof File?d.append(l,o):d.append(l,o.toString()))}),T(route("finance.expenses.update",i.id),{data:d,forceFormData:!0,onSuccess:()=>{E.success(s("finance.expense_updated","Expense updated successfully"))},onError:()=>{E.error(s("common.error_occurred","An error occurred"))}})},S=C.find(t=>t.id.toString()===a.account_id);return e.jsxs(q,{title:s("finance.edit_expense","Edit Expense"),breadcrumbs:[{label:s("finance.title","Finance"),href:"/finance"},{label:s("finance.expenses","Expenses"),href:"/finance/expenses"},{label:i.expense_number,href:`/finance/expenses/${i.id}`},{label:s("common.edit","Edit")}],children:[e.jsx(O,{title:s("finance.edit_expense","Edit Expense")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(D,{href:route("finance.expenses.show",i.id),children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),s("common.back","Back")]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s("finance.edit_expense","Edit Expense")}),e.jsxs("p",{className:"text-muted-foreground",children:[s("finance.edit_expense_description","Update expense information")," - ",i.expense_number]})]})]}),e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(u,{children:[e.jsx(j,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),s("finance.expense_details","Expense Details")]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"title",children:[s("finance.title","Title")," *"]}),e.jsx(m,{id:"title",placeholder:s("finance.expense_title_placeholder","Enter expense title..."),value:a.title,onChange:t=>n("title",t.target.value),required:!0}),r.title&&e.jsx("p",{className:"text-sm text-red-600",children:r.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:s("finance.description","Description")}),e.jsx(I,{id:"description",placeholder:s("finance.expense_description_placeholder","Describe the expense..."),value:a.description,onChange:t=>n("description",t.target.value),rows:3}),r.description&&e.jsx("p",{className:"text-sm text-red-600",children:r.description})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"amount",children:[s("finance.amount","Amount")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(m,{id:"amount",type:"number",min:"0",step:"0.01",placeholder:"0.00",value:a.amount,onChange:t=>n("amount",t.target.value),className:"pl-8",required:!0})]}),S&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Currency: ",S.currency]}),r.amount&&e.jsx("p",{className:"text-sm text-red-600",children:r.amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"expense_date",children:[s("finance.expense_date","Expense Date")," *"]}),e.jsx(m,{id:"expense_date",type:"date",value:a.expense_date,onChange:t=>n("expense_date",t.target.value),required:!0}),r.expense_date&&e.jsx("p",{className:"text-sm text-red-600",children:r.expense_date})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"vendor",children:s("finance.vendor","Vendor")}),e.jsx(m,{id:"vendor",placeholder:s("finance.vendor_placeholder","Vendor or supplier name..."),value:a.vendor,onChange:t=>n("vendor",t.target.value)}),r.vendor&&e.jsx("p",{className:"text-sm text-red-600",children:r.vendor})]})]})]}),e.jsxs(u,{children:[e.jsx(j,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),s("finance.account_category","Account & Category")]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"account_id",children:[s("finance.account","Account")," *"]}),e.jsxs(N,{value:a.account_id,onValueChange:t=>n("account_id",t),children:[e.jsx(_,{children:e.jsx(v,{placeholder:s("finance.select_account","Select account")})}),e.jsx(y,{children:C.map(t=>e.jsx(x,{value:t.id.toString(),children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.type," - ",t.currency]})]})},t.id))})]}),r.account_id&&e.jsx("p",{className:"text-sm text-red-600",children:r.account_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"category_id",children:s("finance.category","Category")}),e.jsxs(N,{value:a.category_id,onValueChange:t=>n("category_id",t),children:[e.jsx(_,{children:e.jsx(v,{placeholder:s("finance.select_category","Select category (optional)")})}),e.jsxs(y,{children:[e.jsx(x,{value:"none",children:s("finance.no_category","No category")}),w.map(t=>e.jsx(x,{value:t.id.toString(),children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]})},t.id))]})]}),r.category_id&&e.jsx("p",{className:"text-sm text-red-600",children:r.category_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"status",children:[s("common.status","Status")," *"]}),e.jsxs(N,{value:a.status,onValueChange:t=>n("status",t),children:[e.jsx(_,{children:e.jsx(v,{})}),e.jsx(y,{children:Object.entries(R).map(([t,d])=>e.jsx(x,{value:t,children:d},t))})]}),r.status&&e.jsx("p",{className:"text-sm text-red-600",children:r.status})]})]})]})]}),e.jsxs(u,{children:[e.jsxs(j,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),s("finance.receipt","Receipt")]}),e.jsx(G,{children:s("finance.receipt_description","Upload a receipt or supporting document for this expense")})]}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[i.receipt_url&&e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s("finance.current_receipt","Current Receipt")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("finance.receipt_uploaded","Receipt file uploaded")})]}),e.jsx(p,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:i.receipt_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),s("common.download","Download")]})})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"receipt",children:i.receipt_url?s("finance.replace_receipt","Replace Receipt File"):s("finance.receipt_file","Receipt File")}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m,{id:"receipt",type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:B,className:"flex-1"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),h&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:h.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),r.receipt&&e.jsx("p",{className:"text-sm text-red-600",children:r.receipt}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("finance.receipt_formats","Supported formats: JPG, PNG, PDF, DOC, DOCX (Max 10MB)")})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(p,{type:"button",variant:"outline",asChild:!0,children:e.jsx(D,{href:route("finance.expenses.show",i.id),children:s("common.cancel","Cancel")})}),e.jsx(p,{type:"submit",disabled:b,children:b?s("common.saving","Saving..."):s("finance.update_expense","Update Expense")})]})]})]})]})}export{He as default};
