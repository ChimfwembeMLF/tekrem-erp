import{u as w,r as x,j as e,S as L,A as b}from"./app-BMIA6nir.js";import{A as k,L as A}from"./AppLayout-DbMk6clK.js";import{C as l,a as o,b as n,d as U,c as m}from"./card-BAsSN-2Z.js";import{B as j}from"./createLucideIcon-Cg8jdX0w.js";import{I as S}from"./input-Bg5GDATO.js";import{L as p}from"./label-CM6YsqH1.js";import{T as F}from"./textarea-CP26afIU.js";import{S as E,a as I,b as P,c as D,d as O}from"./select-B6KOX9nY.js";import{S as B}from"./switch-_qD_kSA5.js";import{A as q,a as V}from"./alert-CNp8ZuHk.js";import{u as z}from"./useTranslate-ER5gAOX6.js";import{t as a}from"./index-Dj2TB_RL.js";import{A as H}from"./arrow-left-UX2kDF52.js";import{T as W}from"./test-tube-BGKhckqE.js";import{S as J}from"./save-D6UyxhH5.js";import{T as K}from"./triangle-alert-BWIpgUmg.js";import{E as M}from"./external-link-DiDOWbPw.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./x-C3KwZK3B.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function Xe({statusCodes:f,errors:r}){const{t:s}=z(),h=w(),[_,g]=x.useState(!1),[v,N]=x.useState(!1),[i,C]=x.useState({from_url:"",to_url:"",status_code:301,description:"",is_active:!0}),d=(t,c)=>{C(u=>({...u,[t]:c}))},y=async t=>{t.preventDefault(),g(!0),b.post(h("cms.redirects.store"),i,{onSuccess:()=>{a.success(s("cms.redirect_created","Redirect created successfully"))},onError:c=>{console.error("Validation errors:",c),a.error(s("cms.redirect_creation_failed","Failed to create redirect"))},onFinish:()=>{g(!1)}})},T=async()=>{var t;if(!i.from_url){a.error(s("cms.enter_from_url","Please enter a source URL to test"));return}N(!0);try{const u=await(await fetch(h("cms.redirects.test"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({url:i.from_url})})).json();u.success?a.success(s("cms.redirect_test_success","Redirect test completed successfully")):a.error(u.message||s("cms.redirect_test_failed","Redirect test failed"))}catch{a.error(s("cms.redirect_test_error","Error testing redirect"))}finally{N(!1)}},R=t=>t?!t.startsWith("http")&&!t.startsWith("/")?"/"+t:t:"";return e.jsxs(k,{children:[e.jsx(L,{title:s("cms.create_redirect","Create Redirect")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>b.visit(h("cms.redirects.index")),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),s("common.back","Back")]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s("cms.create_redirect","Create Redirect")}),e.jsx("p",{className:"text-muted-foreground",children:s("cms.create_redirect_description","Create a new URL redirect")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(j,{variant:"outline",onClick:T,disabled:v||!i.from_url,children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),v?s("cms.testing","Testing..."):s("cms.test","Test")]}),e.jsxs(j,{onClick:y,disabled:_||!i.from_url||!i.to_url,children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),_?s("common.saving","Saving..."):s("common.save","Save")]})]})]}),Object.keys(r||{}).length>0&&e.jsxs(q,{variant:"destructive",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx(V,{children:s("common.validation_errors","Please fix the validation errors below")})]}),e.jsx("form",{onSubmit:y,className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(l,{children:[e.jsxs(o,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),s("cms.redirect_details","Redirect Details")]}),e.jsx(U,{children:s("cms.redirect_details_desc","Configure the source and destination URLs")})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"from_url",children:[s("cms.from_url","From URL")," *"]}),e.jsx(S,{id:"from_url",value:i.from_url,onChange:t=>d("from_url",R(t.target.value)),placeholder:"/old-page or https://example.com/old-page",className:r!=null&&r.from_url?"border-destructive":""}),(r==null?void 0:r.from_url)&&e.jsx("p",{className:"text-sm text-destructive",children:r.from_url}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("cms.from_url_help","The URL that should be redirected. Can be relative (/page) or absolute (https://example.com/page)")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"to_url",children:[s("cms.to_url","To URL")," *"]}),e.jsx(S,{id:"to_url",value:i.to_url,onChange:t=>d("to_url",t.target.value),placeholder:"/new-page or https://example.com/new-page",className:r!=null&&r.to_url?"border-destructive":""}),(r==null?void 0:r.to_url)&&e.jsx("p",{className:"text-sm text-destructive",children:r.to_url}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("cms.to_url_help","The destination URL where users should be redirected")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"status_code",children:[s("cms.status_code","Status Code")," *"]}),e.jsxs(E,{value:i.status_code.toString(),onValueChange:t=>d("status_code",parseInt(t)),children:[e.jsx(I,{className:r!=null&&r.status_code?"border-destructive":"",children:e.jsx(P,{placeholder:s("cms.select_status_code","Select status code")})}),e.jsx(D,{children:Object.entries(f).map(([t,c])=>e.jsxs(O,{value:t,children:[t," - ",c]},t))})]}),(r==null?void 0:r.status_code)&&e.jsx("p",{className:"text-sm text-destructive",children:r.status_code}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("cms.status_code_help","301 for permanent redirects, 302 for temporary redirects")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"description",children:s("cms.description","Description")}),e.jsx(F,{id:"description",value:i.description,onChange:t=>d("description",t.target.value),placeholder:s("cms.redirect_description_placeholder","Optional description for this redirect..."),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("cms.description_help","Optional description to help identify this redirect")})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(n,{children:s("cms.redirect_settings","Redirect Settings")})}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(p,{children:s("cms.active","Active")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("cms.redirect_active_desc","Enable this redirect")})]}),e.jsx(B,{checked:i.is_active,onCheckedChange:t=>d("is_active",t)})]})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(n,{children:s("cms.status_code_info","Status Code Information")})}),e.jsxs(m,{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"301 - Permanent Redirect"}),e.jsx("p",{className:"text-muted-foreground",children:s("cms.status_301_desc","Use for permanently moved content. Search engines will transfer ranking to the new URL.")})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"302 - Temporary Redirect"}),e.jsx("p",{className:"text-muted-foreground",children:s("cms.status_302_desc","Use for temporarily moved content. Search engines will keep the original URL in their index.")})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"307 - Temporary Redirect"}),e.jsx("p",{className:"text-muted-foreground",children:s("cms.status_307_desc","Similar to 302 but preserves the request method and body.")})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"308 - Permanent Redirect"}),e.jsx("p",{className:"text-muted-foreground",children:s("cms.status_308_desc","Similar to 301 but preserves the request method and body.")})]})]})]}),i.from_url&&i.to_url&&e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(n,{children:s("cms.redirect_preview","Redirect Preview")})}),e.jsx(m,{className:"space-y-3",children:e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:i.from_url}),e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:"text-muted-foreground",children:"→"}),e.jsx("span",{className:"font-medium",children:i.to_url})]}),e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:["HTTP ",i.status_code," - ",f[i.status_code]]})]})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(n,{children:s("cms.best_practices","Best Practices")})}),e.jsxs(m,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["• ",s("cms.redirect_tip_1","Use 301 redirects for permanently moved content")]}),e.jsxs("p",{children:["• ",s("cms.redirect_tip_2","Avoid redirect chains (A→B→C)")]}),e.jsxs("p",{children:["• ",s("cms.redirect_tip_3","Test redirects before publishing")]}),e.jsxs("p",{children:["• ",s("cms.redirect_tip_4","Monitor redirect performance regularly")]})]})]})]})]})})]})]})}export{Xe as default};
