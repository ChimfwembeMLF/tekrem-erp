import{r as u,j as e,u as ye,G as we,S as Ce,x as $}from"./app-BMIA6nir.js";import{A as Se}from"./AppLayout-DbMk6clK.js";import{c as U,P as L,u as K,a as Y,B as w}from"./createLucideIcon-Cg8jdX0w.js";import{C as T,a as E,b as P,d as G,c as M,e as _e}from"./card-BAsSN-2Z.js";import{I as X}from"./input-Bg5GDATO.js";import{L as h}from"./label-CM6YsqH1.js";import{T as W}from"./textarea-CP26afIU.js";import{S as _,a as R,b as A,c as k,d as y}from"./select-B6KOX9nY.js";import{u as Re,c as O,a as Ae}from"./index-BN56TOeV.js";import{c as Z}from"./index-DdwO_6Rs.js";import{d as J,R as ke,I as Ie,j as Te}from"./NotificationComponent-CHA3vjZG.js";import{b as Ee}from"./index-BeGDJhOY.js";import{u as Pe}from"./index-BDIc0y8N.js";import{P as Ge}from"./index-DgfI6AGt.js";import{X as Q,B as S}from"./x-C3KwZK3B.js";import{u as ee}from"./useTranslate-ER5gAOX6.js";import{u as se}from"./useCRMAI-B7cAha5-.js";import{B as F}from"./bot-COuCQh0r.js";import{S as Me}from"./sparkles-Csmgo_ih.js";import{M as Fe}from"./mail-CApE3o7R.js";import{C as Le}from"./circle-check-big-DCsv6rXk.js";import{C as z}from"./copy-XqgUo3o3.js";import{C as te}from"./clock-BTinGqFV.js";import{T as Be}from"./target-DIhftedx.js";import{P as ze}from"./progress-BgfGBUAj.js";import{M as q}from"./message-square-32k9udjC.js";import{T as D}from"./triangle-alert-BWIpgUmg.js";import{T as qe}from"./trending-up-00s2SIxN.js";import{S as De}from"./smile-DTiT-A4G.js";import{S as Oe}from"./save-D6UyxhH5.js";import{A as Ve}from"./arrow-left-UX2kDF52.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./users-3SuyoAg3.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-DwXxsQvB.js";import"./index-DTi2vEM4.js";import"./bell-5VRgJnzP.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Ke=U("frown",Ue);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],I=U("heart",He);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Xe=U("meh",$e);var H="Radio",[Ye,ae]=Z(H),[We,Ze]=Ye(H),re=u.forwardRef((s,o)=>{const{__scopeRadio:t,name:j,checked:c=!1,required:l,disabled:m,value:N="on",onCheck:n,form:x,...i}=s,[v,b]=u.useState(null),g=K(o,C=>b(C)),a=u.useRef(!1),p=v?x||!!v.closest("form"):!0;return e.jsxs(We,{scope:t,checked:c,disabled:m,children:[e.jsx(L.button,{type:"button",role:"radio","aria-checked":c,"data-state":le(c),"data-disabled":m?"":void 0,disabled:m,value:N,...i,ref:g,onClick:O(s.onClick,C=>{c||n==null||n(),p&&(a.current=C.isPropagationStopped(),a.current||C.stopPropagation())})}),p&&e.jsx(ce,{control:v,bubbles:!a.current,name:j,value:N,checked:c,required:l,disabled:m,form:x,style:{transform:"translateX(-100%)"}})]})});re.displayName=H;var ne="RadioIndicator",ie=u.forwardRef((s,o)=>{const{__scopeRadio:t,forceMount:j,...c}=s,l=Ze(ne,t);return e.jsx(Ge,{present:j||l.checked,children:e.jsx(L.span,{"data-state":le(l.checked),"data-disabled":l.disabled?"":void 0,...c,ref:o})})});ie.displayName=ne;var Je="RadioBubbleInput",ce=u.forwardRef(({__scopeRadio:s,control:o,checked:t,bubbles:j=!0,...c},l)=>{const m=u.useRef(null),N=K(m,l),n=Pe(t),x=Ae(o);return u.useEffect(()=>{const i=m.current;if(!i)return;const v=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(v,"checked").set;if(n!==t&&g){const a=new Event("click",{bubbles:j});g.call(i,t),i.dispatchEvent(a)}},[n,t,j]),e.jsx(L.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...c,tabIndex:-1,ref:N,style:{...c.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ce.displayName=Je;function le(s){return s?"checked":"unchecked"}var Qe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],B="RadioGroup",[es,mt]=Z(B,[J,ae]),oe=J(),de=ae(),[ss,ts]=es(B),me=u.forwardRef((s,o)=>{const{__scopeRadioGroup:t,name:j,defaultValue:c,value:l,required:m=!1,disabled:N=!1,orientation:n,dir:x,loop:i=!0,onValueChange:v,...b}=s,g=oe(t),a=Ee(x),[p,C]=Re({prop:l,defaultProp:c??null,onChange:v,caller:B});return e.jsx(ss,{scope:t,name:j,required:m,disabled:N,value:p,onValueChange:C,children:e.jsx(ke,{asChild:!0,...g,orientation:n,dir:a,loop:i,children:e.jsx(L.div,{role:"radiogroup","aria-required":m,"aria-orientation":n,"data-disabled":N?"":void 0,dir:a,...b,ref:o})})})});me.displayName=B;var xe="RadioGroupItem",ue=u.forwardRef((s,o)=>{const{__scopeRadioGroup:t,disabled:j,...c}=s,l=ts(xe,t),m=l.disabled||j,N=oe(t),n=de(t),x=u.useRef(null),i=K(o,x),v=l.value===c.value,b=u.useRef(!1);return u.useEffect(()=>{const g=p=>{Qe.includes(p.key)&&(b.current=!0)},a=()=>b.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",a),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",a)}},[]),e.jsx(Ie,{asChild:!0,...N,focusable:!m,active:v,children:e.jsx(re,{disabled:m,required:l.required,checked:v,...n,...c,name:l.name,ref:i,onCheck:()=>l.onValueChange(c.value),onKeyDown:O(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:O(c.onFocus,()=>{var g;b.current&&((g=x.current)==null||g.click())})})})});ue.displayName=xe;var as="RadioGroupIndicator",pe=u.forwardRef((s,o)=>{const{__scopeRadioGroup:t,...j}=s,c=de(t);return e.jsx(ie,{...c,...j,ref:o})});pe.displayName=as;var he=me,je=ue,rs=pe;const ge=u.forwardRef(({className:s,...o},t)=>e.jsx(he,{className:Y("grid gap-2",s),...o,ref:t}));ge.displayName=he.displayName;const V=u.forwardRef(({className:s,...o},t)=>e.jsx(je,{ref:t,className:Y("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...o,children:e.jsx(rs,{className:"flex items-center justify-center",children:e.jsx(Te,{className:"h-2.5 w-2.5 fill-current text-current"})})}));V.displayName=je.displayName;function ns({onTemplateGenerated:s,onClose:o,leadData:t={},context:j={}}){ee();const{generateEmailTemplate:c,loading:l}=se(),[m,N]=u.useState(""),[n,x]=u.useState(""),[i,v]=u.useState(null),b=[{value:"initial_outreach",label:"Initial Outreach"},{value:"follow_up",label:"Follow-up"},{value:"meeting_request",label:"Meeting Request"},{value:"proposal_follow_up",label:"Proposal Follow-up"},{value:"thank_you",label:"Thank You"},{value:"check_in",label:"Check-in"},{value:"product_demo",label:"Product Demo Invitation"},{value:"case_study_share",label:"Case Study Sharing"},{value:"event_invitation",label:"Event Invitation"},{value:"nurture_sequence",label:"Nurture Sequence"}],g=async()=>{if(!m)return;const f={...j,custom_context:n},d=await c(m,t,f);d&&v(d)},a=()=>{i&&(s(i),o())},p=f=>{navigator.clipboard.writeText(f)},C=f=>{switch(f){case"professional":return"bg-blue-100 text-blue-800";case"friendly":return"bg-green-100 text-green-800";case"formal":return"bg-purple-100 text-purple-800";case"casual":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(T,{className:"border-green-200 bg-green-50/50",children:[e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-green-600"}),e.jsx(P,{className:"text-green-700",children:"AI Email Template Generator"})]}),e.jsx(w,{variant:"ghost",size:"sm",onClick:o,className:"h-6 w-6 p-0 text-green-600 hover:text-green-800",children:e.jsx(Q,{className:"h-4 w-4"})})]}),e.jsx(G,{children:"Generate personalized email templates using AI"})]}),e.jsxs(M,{className:"space-y-4",children:[i?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Email Template Generated"}),e.jsx(S,{className:C(i.tone),variant:"secondary",children:i.tone})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-sm font-medium",children:"Subject Line"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>p(i.subject),className:"h-6 w-6 p-0",children:e.jsx(z,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"bg-gray-50 rounded p-3",children:e.jsx("p",{className:"text-sm font-medium",children:i.subject})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-sm font-medium",children:"Email Body"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>p(i.body),className:"h-6 w-6 p-0",children:e.jsx(z,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"bg-gray-50 rounded p-3 max-h-64 overflow-y-auto",children:e.jsx("pre",{className:"text-sm whitespace-pre-wrap font-sans",children:i.body})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Call to Action"}),e.jsx("div",{className:"bg-blue-50 rounded p-3",children:e.jsx("p",{className:"text-sm font-medium text-blue-800",children:i.call_to_action})})]}),i.placeholders.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Placeholders to Customize"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.placeholders.map((f,d)=>e.jsx(S,{variant:"outline",className:"text-xs",children:f},d))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4 text-blue-600"}),e.jsx(h,{className:"text-sm font-medium",children:"Best Send Time"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.best_send_time})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4 text-purple-600"}),e.jsx(h,{className:"text-sm font-medium",children:"Tone"})]}),e.jsx(S,{className:C(i.tone),variant:"secondary",children:i.tone})]})]}),i.follow_up_suggestions.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Follow-up Suggestions"}),e.jsx("ul",{className:"text-sm space-y-1",children:i.follow_up_suggestions.map((f,d)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600",children:"•"}),e.jsx("span",{children:f})]},d))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{onClick:a,className:"flex-1",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Use This Template"]}),e.jsx(w,{variant:"outline",onClick:()=>v(null),children:"Generate New"})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"purpose",children:"Email Purpose *"}),e.jsxs(_,{value:m,onValueChange:N,children:[e.jsx(R,{children:e.jsx(A,{placeholder:"Select email purpose"})}),e.jsx(k,{children:b.map(f=>e.jsx(y,{value:f.value,children:f.label},f.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"custom-context",children:"Additional Context (Optional)"}),e.jsx(W,{id:"custom-context",placeholder:"Add any specific context, recent interactions, or special requirements...",value:n,onChange:f=>x(f.target.value),rows:3})]}),t.name&&e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",t.name]}),t.company&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Company:"})," ",t.company]}),t.position&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Position:"})," ",t.position]}),t.source&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Source:"})," ",t.source]})]})]})]}),e.jsx(w,{onClick:g,disabled:!m||l,className:"w-full",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating Template..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Generate Email Template"]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center pt-2 border-t",children:"Powered by Mistral AI"})]})]})}function is({analysis:s,onDismiss:o,loading:t=!1}){ee();const j=n=>{switch(n){case"positive":return e.jsx(De,{className:"h-5 w-5 text-green-600"});case"negative":return e.jsx(Ke,{className:"h-5 w-5 text-red-600"});case"neutral":return e.jsx(Xe,{className:"h-5 w-5 text-gray-600"});default:return e.jsx(q,{className:"h-5 w-5 text-gray-600"})}},c=n=>{switch(n){case"positive":return"bg-green-100 text-green-800";case"negative":return"bg-red-100 text-red-800";case"neutral":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},l=n=>{switch(n){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=n=>{switch(n){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},N=n=>{switch(n){case"satisfied":return"bg-green-100 text-green-800";case"neutral":return"bg-yellow-100 text-yellow-800";case"dissatisfied":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return t?e.jsxs(T,{className:"border-purple-200 bg-purple-50/50",children:[e.jsxs(E,{className:"pb-3",children:[e.jsxs(P,{className:"flex items-center gap-2 text-purple-700",children:[e.jsx(F,{className:"h-5 w-5 animate-pulse"}),"AI Sentiment Analysis"]}),e.jsx(G,{children:"Analyzing communication sentiment..."})]}),e.jsx(M,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 animate-pulse text-purple-600"}),e.jsx("span",{className:"text-sm text-purple-600",children:"Analyzing sentiment..."})]})})]}):e.jsxs(T,{className:"border-purple-200 bg-purple-50/50",children:[e.jsxs(E,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-purple-600"}),e.jsx(P,{className:"text-purple-700",children:"AI Sentiment Analysis"})]}),e.jsx(w,{variant:"ghost",size:"sm",onClick:o,className:"h-6 w-6 p-0 text-purple-600 hover:text-purple-800",children:e.jsx(Q,{className:"h-4 w-4"})})]}),e.jsx(G,{children:"AI-powered communication sentiment and tone analysis"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[j(s.sentiment),e.jsxs("div",{children:[e.jsx(S,{className:c(s.sentiment),variant:"secondary",children:s.sentiment}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[Math.round(s.confidence*100),"% confidence"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Math.round(s.sentiment_score*100)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Sentiment Score"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Sentiment Strength"}),e.jsxs("span",{className:"font-medium",children:[Math.round(Math.abs(s.sentiment_score)*100),"%"]})]}),e.jsx(ze,{value:Math.abs(s.sentiment_score)*100,className:"h-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(q,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Tone"})]}),e.jsx(S,{variant:"outline",className:"text-xs",children:s.tone})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(te,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Urgency"})]}),e.jsx(S,{className:l(s.urgency),variant:"secondary",children:s.urgency})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(I,{className:"h-4 w-4 text-pink-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Satisfaction"})]}),e.jsx(S,{className:N(s.satisfaction),variant:"secondary",children:s.satisfaction})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(D,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Priority"})]}),e.jsx(S,{className:m(s.priority),variant:"secondary",children:s.priority})]})]}),s.key_emotions.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-pink-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Key Emotions"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.key_emotions.map((n,x)=>e.jsx(S,{variant:"outline",className:"text-xs",children:n},x))})]}),s.buying_signals.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Buying Signals"})]}),e.jsx("ul",{className:"text-xs space-y-1",children:s.buying_signals.map((n,x)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600",children:"•"}),e.jsx("span",{children:n})]},x))})]}),s.concerns.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Concerns"})]}),e.jsx("ul",{className:"text-xs space-y-1",children:s.concerns.map((n,x)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-600",children:"•"}),e.jsx("span",{children:n})]},x))})]}),s.risk_indicators.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Risk Indicators"})]}),e.jsx("ul",{className:"text-xs space-y-1",children:s.risk_indicators.map((n,x)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-600",children:"•"}),e.jsx("span",{children:n})]},x))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Recommended Response Approach"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.recommended_response})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center pt-2 border-t",children:"Powered by Mistral AI"})]})]})}function xt({auth:s,clients:o,leads:t,communicableType:j,communicableId:c}){const l=ye(),{analyzeSentiment:m,loading:N}=se(),[n,x]=u.useState(!1),[i,v]=u.useState(!1),[b,g]=u.useState(null),{data:a,setData:p,post:C,processing:f,errors:d}=we({type:"note",content:"",subject:"",communication_date:new Date().toISOString().slice(0,16),direction:"outbound",status:"completed",communicable_type:j||"",communicable_id:c||""}),fe=r=>{r.preventDefault(),C(l("crm.communications.store"))},Ne=async()=>{if(!a.content.trim())return;const r=await m(a.content,a.type);r&&(g(r),v(!0))},ve=r=>{p("subject",r.subject),p("content",r.body)},be=()=>a.communicable_type==="App\\Models\\Client"&&a.communicable_id?o.find(r=>r.id.toString()===a.communicable_id.toString()):a.communicable_type==="App\\Models\\Lead"&&a.communicable_id?t.find(r=>r.id.toString()===a.communicable_id.toString()):null;return e.jsxs(Se,{title:"Add Communication",renderHeader:()=>e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{href:l("crm.communications.index"),children:e.jsxs(w,{variant:"outline",size:"sm",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Back to Communications"]})}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Add Communication"})]})}),children:[e.jsx(Ce,{title:"Add Communication"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx(T,{children:e.jsxs("form",{onSubmit:fe,children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(P,{children:"Add New Communication"}),e.jsx(G,{children:"Record a new communication with a client or lead"})]}),e.jsxs("div",{className:"flex gap-2",children:[a.type==="email"&&e.jsxs(w,{type:"button",variant:"outline",size:"sm",onClick:()=>x(!0),className:"text-green-600 border-green-200 hover:bg-green-50",children:[e.jsx(F,{className:"h-4 w-4 mr-1"}),"Generate Email"]}),a.content.trim()&&e.jsxs(w,{type:"button",variant:"outline",size:"sm",onClick:Ne,disabled:N,className:"text-purple-600 border-purple-200 hover:bg-purple-50",children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"Analyze Sentiment"]})]})]})}),e.jsxs(M,{className:"space-y-6",children:[n&&e.jsx(ns,{onTemplateGenerated:ve,onClose:()=>x(!1),leadData:be(),context:{communication_type:a.type}}),i&&b&&e.jsx(is,{analysis:b,onDismiss:()=>v(!1),loading:N}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{htmlFor:"type",children:["Communication Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(_,{value:a.type,onValueChange:r=>p("type",r),children:[e.jsx(R,{children:e.jsx(A,{placeholder:"Select type"})}),e.jsxs(k,{children:[e.jsx(y,{value:"email",children:"Email"}),e.jsx(y,{value:"call",children:"Phone Call"}),e.jsx(y,{value:"meeting",children:"Meeting"}),e.jsx(y,{value:"note",children:"Note"})]})]}),d.type&&e.jsx("p",{className:"text-red-500 text-sm",children:d.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{htmlFor:"communication_date",children:["Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(X,{id:"communication_date",type:"datetime-local",value:a.communication_date,onChange:r=>p("communication_date",r.target.value)}),d.communication_date&&e.jsx("p",{className:"text-red-500 text-sm",children:d.communication_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"subject",children:"Subject"}),e.jsx(X,{id:"subject",value:a.subject,onChange:r=>p("subject",r.target.value)}),d.subject&&e.jsx("p",{className:"text-red-500 text-sm",children:d.subject})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"status",children:"Status"}),e.jsxs(_,{value:a.status,onValueChange:r=>p("status",r),children:[e.jsx(R,{children:e.jsx(A,{placeholder:"Select status"})}),e.jsxs(k,{children:[e.jsx(y,{value:"completed",children:"Completed"}),e.jsx(y,{value:"scheduled",children:"Scheduled"}),e.jsx(y,{value:"cancelled",children:"Cancelled"})]})]}),d.status&&e.jsx("p",{className:"text-red-500 text-sm",children:d.status})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Direction"}),e.jsxs(ge,{value:a.direction,onValueChange:r=>p("direction",r),className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{value:"inbound",id:"inbound"}),e.jsx(h,{htmlFor:"inbound",children:"Inbound"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{value:"outbound",id:"outbound"}),e.jsx(h,{htmlFor:"outbound",children:"Outbound"})]})]}),d.direction&&e.jsx("p",{className:"text-red-500 text-sm",children:d.direction})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{children:["Related To ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"communicable_type",children:"Type"}),e.jsxs(_,{value:a.communicable_type,onValueChange:r=>p("communicable_type",r),disabled:!!j,children:[e.jsx(R,{children:e.jsx(A,{placeholder:"Select type"})}),e.jsxs(k,{children:[e.jsx(y,{value:"App\\Models\\Client",children:"Client"}),e.jsx(y,{value:"App\\Models\\Lead",children:"Lead"})]})]}),d.communicable_type&&e.jsx("p",{className:"text-red-500 text-sm",children:d.communicable_type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"communicable_id",children:"Name"}),e.jsxs(_,{value:a.communicable_id.toString(),onValueChange:r=>p("communicable_id",r),disabled:!!c,children:[e.jsx(R,{children:e.jsx(A,{placeholder:"Select name"})}),e.jsx(k,{children:a.communicable_type==="App\\Models\\Client"?o.map(r=>e.jsx(y,{value:r.id.toString(),children:r.name},r.id)):a.communicable_type==="App\\Models\\Lead"?t.map(r=>e.jsx(y,{value:r.id.toString(),children:r.name},r.id)):null})]}),d.communicable_id&&e.jsx("p",{className:"text-red-500 text-sm",children:d.communicable_id})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{htmlFor:"content",children:["Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(W,{id:"content",value:a.content,onChange:r=>p("content",r.target.value),rows:6}),d.content&&e.jsx("p",{className:"text-red-500 text-sm",children:d.content})]})]}),e.jsxs(_e,{className:"flex justify-end gap-3",children:[e.jsx($,{href:l("crm.communications.index"),children:e.jsx(w,{type:"button",variant:"outline",children:"Cancel"})}),e.jsxs(w,{type:"submit",disabled:f,children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),f?"Saving...":"Save Communication"]})]})]})})})})]})}export{xt as default};
