import{u as z,r as L,j as e,S as U,x as p,A as h}from"./app-BMIA6nir.js";import{A as $}from"./AppLayout-DbMk6clK.js";import{C as y,a as b,b as N,c as C}from"./card-BAsSN-2Z.js";import{B as m}from"./createLucideIcon-Cg8jdX0w.js";import{I as S}from"./input-Bg5GDATO.js";import{B as w}from"./x-C3KwZK3B.js";import{S as u,a as f,b as j,c as g,d as n}from"./select-B6KOX9nY.js";import{T as W,a as X,b as _,c as t,d as Z,e as i}from"./table-DqBb-9tC.js";import{D as q,a as G,b as J,c as T}from"./NotificationComponent-CHA3vjZG.js";import{u as K}from"./useTranslate-ER5gAOX6.js";import{t as M}from"./index-Dj2TB_RL.js";import{S as O}from"./sheet-1SUjjT9Y.js";import{P as Q}from"./plus-BjPf5uI-.js";import{F as Y}from"./funnel-v8IwREza.js";import{S as ee}from"./search-_p1CX5vB.js";import{S as se}from"./smartphone-BqGcJ2Wh.js";import{E as ae}from"./ellipsis-DJ3pNpl6.js";import{E as re}from"./eye-DdivFxyT.js";import{R as k}from"./refresh-cw-CkrxGXg9.js";import{C as A}from"./circle-x-D-Fm_LhT.js";import{C as ne}from"./circle-check-big-DCsv6rXk.js";import{C as oe}from"./clock-BTinGqFV.js";import"./useTypedPage-hmuARwun.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./bell-5VRgJnzP.js";function os({transactions:o,providers:D,filters:l}){const{t:a}=K(),c=z(),[v,P]=L.useState(l.search||""),I=s=>{s.preventDefault(),h.get(c("finance.momo.index"),{...l,search:v})},d=(s,r)=>{h.get(c("finance.momo.index"),{...l,[s]:r==="all"?"":r})},B=s=>{h.post(c("finance.momo.check-status",s),{},{onSuccess:()=>{M.success(a("finance.momo.status_checked","Transaction status updated"))},onError:()=>{M.error(a("common.error_occurred","An error occurred"))}})},F=s=>{const r={pending:{variant:"secondary",icon:oe,color:"text-yellow-600"},processing:{variant:"secondary",icon:k,color:"text-blue-600"},completed:{variant:"default",icon:ne,color:"text-green-600"},failed:{variant:"destructive",icon:A,color:"text-red-600"},cancelled:{variant:"outline",icon:A,color:"text-gray-600"}},x=r[s]||r.pending,H=x.icon;return e.jsxs(w,{variant:x.variant,className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),a(`finance.momo.status.${s}`,s)]})},E=s=>{const r={payment:{variant:"default",color:"text-green-600"},payout:{variant:"secondary",color:"text-blue-600"},refund:{variant:"outline",color:"text-orange-600"}},x=r[s]||r.payment;return e.jsx(w,{variant:x.variant,children:a(`finance.momo.type.${s}`,s)})},R=(s,r="ZMW")=>new Intl.NumberFormat("en-US",{style:"currency",currency:r}).format(s),V=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs($,{title:a("finance.momo.title","Mobile Money"),breadcrumbs:[{label:a("finance.title","Finance"),href:"/finance"},{label:a("finance.momo.title","Mobile Money")}],children:[e.jsx(U,{title:a("finance.momo.title","Mobile Money")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:a("finance.momo.title","Mobile Money")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a("finance.momo.description","Manage mobile money transactions and payouts")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",asChild:!0,children:e.jsxs(p,{href:c("finance.momo.providers"),children:[e.jsx(O,{className:"h-4 w-4"}),a("finance.momo.providers","Providers")]})}),e.jsx(m,{asChild:!0,children:e.jsxs(p,{href:c("finance.momo.create"),children:[e.jsx(Q,{className:"h-4 w-4"}),a("finance.momo.new_transaction","New Transaction")]})})]})]}),e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),a("common.filters","Filters")]})}),e.jsx(C,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-6",children:[e.jsx("form",{onSubmit:I,className:"lg:col-span-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{placeholder:a("finance.momo.search_placeholder","Search transactions..."),value:v,onChange:s=>P(s.target.value),className:"flex-1"}),e.jsx(m,{type:"submit",size:"icon",variant:"outline",children:e.jsx(ee,{className:"h-4 w-4"})})]})}),e.jsxs(u,{value:l.provider_id||"all",onValueChange:s=>d("provider_id",s),children:[e.jsx(f,{children:e.jsx(j,{placeholder:a("finance.momo.all_providers","All Providers")})}),e.jsxs(g,{children:[e.jsx(n,{value:"all",children:a("finance.momo.all_providers","All Providers")}),D.map(s=>e.jsx(n,{value:s.id.toString(),children:s.display_name},s.id))]})]}),e.jsxs(u,{value:l.status||"all",onValueChange:s=>d("status",s),children:[e.jsx(f,{children:e.jsx(j,{placeholder:a("finance.momo.all_statuses","All Statuses")})}),e.jsxs(g,{children:[e.jsx(n,{value:"all",children:a("finance.momo.all_statuses","All Statuses")}),e.jsx(n,{value:"pending",children:a("finance.momo.status.pending","Pending")}),e.jsx(n,{value:"processing",children:a("finance.momo.status.processing","Processing")}),e.jsx(n,{value:"completed",children:a("finance.momo.status.completed","Completed")}),e.jsx(n,{value:"failed",children:a("finance.momo.status.failed","Failed")}),e.jsx(n,{value:"cancelled",children:a("finance.momo.status.cancelled","Cancelled")})]})]}),e.jsxs(u,{value:l.type||"all",onValueChange:s=>d("type",s),children:[e.jsx(f,{children:e.jsx(j,{placeholder:a("finance.momo.all_types","All Types")})}),e.jsxs(g,{children:[e.jsx(n,{value:"all",children:a("finance.momo.all_types","All Types")}),e.jsx(n,{value:"payment",children:a("finance.momo.type.payment","Payment")}),e.jsx(n,{value:"payout",children:a("finance.momo.type.payout","Payout")}),e.jsx(n,{value:"refund",children:a("finance.momo.type.refund","Refund")})]})]}),e.jsx(S,{type:"date",placeholder:a("common.date_from","Date From"),value:l.date_from||"",onChange:s=>d("date_from",s.target.value)})]})})]}),e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),a("finance.momo.transactions","Transactions")]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.from,"-",o.to," of ",o.total]})]})}),e.jsxs(C,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(W,{children:[e.jsx(X,{children:e.jsxs(_,{children:[e.jsx(t,{children:a("finance.momo.transaction_number","Transaction #")}),e.jsx(t,{children:a("finance.momo.provider","Provider")}),e.jsx(t,{children:a("finance.momo.type","Type")}),e.jsx(t,{children:a("finance.momo.phone_number","Phone")}),e.jsx(t,{children:a("finance.momo.amount","Amount")}),e.jsx(t,{children:a("finance.momo.status","Status")}),e.jsx(t,{children:a("finance.momo.date","Date")}),e.jsx(t,{className:"w-[50px]"})]})}),e.jsx(Z,{children:o.data.map(s=>e.jsxs(_,{children:[e.jsx(i,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:s.transaction_number}),s.invoice&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Invoice: ",s.invoice.invoice_number]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-6 w-6 rounded bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-xs font-medium",children:s.provider.provider_code}),s.provider.display_name]})}),e.jsx(i,{children:E(s.type)}),e.jsx(i,{className:"font-mono text-sm",children:s.phone_number}),e.jsx(i,{className:"font-medium",children:R(s.amount,s.currency)}),e.jsx(i,{children:F(s.status)}),e.jsx(i,{className:"text-sm text-gray-600 dark:text-gray-400",children:V(s.created_at)}),e.jsx(i,{children:e.jsxs(q,{children:[e.jsx(G,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",children:e.jsx(ae,{className:"h-4 w-4"})})}),e.jsxs(J,{align:"end",children:[e.jsx(T,{asChild:!0,children:e.jsxs(p,{href:c("finance.momo.show",s.id),children:[e.jsx(re,{className:"h-4 w-4"}),a("common.view","View")]})}),s.status==="pending"&&e.jsxs(T,{onClick:()=>B(s.id),children:[e.jsx(k,{className:"h-4 w-4"}),a("finance.momo.check_status","Check Status")]})]})]})})]},s.id))})]})}),o.links&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",o.from," to ",o.to," of ",o.total," results"]}),e.jsx("div",{className:"flex gap-2",children:o.links.map((s,r)=>e.jsx(m,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&h.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},r))})]})]})]})]})]})}export{os as default};
