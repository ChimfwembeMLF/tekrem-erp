import{r as f,j as e,u as we,G as Ce,S as _e,x as Re}from"./app-BMIA6nir.js";import{A as Ne}from"./AppLayout-DbMk6clK.js";import{C as G,a as X,b as W,d as q,c as J}from"./card-BAsSN-2Z.js";import{P as k,u as M,a as Pe,B as Q}from"./createLucideIcon-Cg8jdX0w.js";import{I as Z}from"./input-Bg5GDATO.js";import{L as _}from"./label-CM6YsqH1.js";import{T as De}from"./textarea-CP26afIU.js";import{e as se,S as ee,a as te,b as re,c as ne,d as D}from"./select-B6KOX9nY.js";import{C as Ee}from"./checkbox-B8CiFAgv.js";import{u as Me,c as E,a as Te}from"./index-BN56TOeV.js";import{c as Ae}from"./index-DdwO_6Rs.js";import{c as Ie,b as Ve}from"./index-BeGDJhOY.js";import{u as ke}from"./index-BDIc0y8N.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./x-C3KwZK3B.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./useTranslate-ER5gAOX6.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./index-DwXxsQvB.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-DTi2vEM4.js";var oe=["PageUp","PageDown"],ie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ae={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},T="Slider",[L,Be,Ke]=Ie(T),[de,Wt]=Ae(T,[Ke]),[He,B]=de(T),ce=f.forwardRef((t,n)=>{const{name:r,min:i=0,max:c=100,step:l=1,orientation:s="horizontal",disabled:a=!1,minStepsBetweenThumbs:m=0,defaultValue:g=[i],value:u,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:S=!1,form:j,...o}=t,h=f.useRef(new Set),x=f.useRef(0),b=s==="horizontal"?Fe:Le,[v=[],A]=Me({prop:u,defaultProp:g,onChange:y=>{var N;(N=[...h.current][x.current])==null||N.focus(),d(y)}}),K=f.useRef(v);function H(y){const w=Ye(v,y);I(y,w)}function be(y){I(y,x.current)}function ye(){const y=K.current[x.current];v[x.current]!==y&&p(v)}function I(y,w,{commit:N}={commit:!1}){const $=qe(l),F=Je(Math.round((y-i)/l)*l+i,$),V=se(F,[i,c]);A((P=[])=>{const C=Oe(P,V,w);if(We(C,m*l)){x.current=C.indexOf(V);const Y=String(C)!==String(P);return Y&&N&&p(C),Y?C:P}else return P})}return e.jsx(He,{scope:t.__scopeSlider,name:r,disabled:a,min:i,max:c,valueIndexToChangeRef:x,thumbs:h.current,values:v,orientation:s,form:j,children:e.jsx(L.Provider,{scope:t.__scopeSlider,children:e.jsx(L.Slot,{scope:t.__scopeSlider,children:e.jsx(b,{"aria-disabled":a,"data-disabled":a?"":void 0,...o,ref:n,onPointerDown:E(o.onPointerDown,()=>{a||(K.current=v)}),min:i,max:c,inverted:S,onSlideStart:a?void 0:H,onSlideMove:a?void 0:be,onSlideEnd:a?void 0:ye,onHomeKeyDown:()=>!a&&I(i,0,{commit:!0}),onEndKeyDown:()=>!a&&I(c,v.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:w})=>{if(!a){const F=oe.includes(y.key)||y.shiftKey&&ie.includes(y.key)?10:1,V=x.current,P=v[V],C=l*F*w;I(P+C,V,{commit:!0})}}})})})})});ce.displayName=T;var[le,ue]=de(T,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Fe=f.forwardRef((t,n)=>{const{min:r,max:i,dir:c,inverted:l,onSlideStart:s,onSlideMove:a,onSlideEnd:m,onStepKeyDown:g,...u}=t,[d,p]=f.useState(null),S=M(n,b=>p(b)),j=f.useRef(void 0),o=Ve(c),h=o==="ltr",x=h&&!l||!h&&l;function R(b){const v=j.current||d.getBoundingClientRect(),A=[0,v.width],H=O(A,x?[r,i]:[i,r]);return j.current=v,H(b-v.left)}return e.jsx(le,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:e.jsx(me,{dir:o,"data-orientation":"horizontal",...u,ref:S,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const v=R(b.clientX);s==null||s(v)},onSlideMove:b=>{const v=R(b.clientX);a==null||a(v)},onSlideEnd:()=>{j.current=void 0,m==null||m()},onStepKeyDown:b=>{const A=ae[x?"from-left":"from-right"].includes(b.key);g==null||g({event:b,direction:A?-1:1})}})})}),Le=f.forwardRef((t,n)=>{const{min:r,max:i,inverted:c,onSlideStart:l,onSlideMove:s,onSlideEnd:a,onStepKeyDown:m,...g}=t,u=f.useRef(null),d=M(n,u),p=f.useRef(void 0),S=!c;function j(o){const h=p.current||u.current.getBoundingClientRect(),x=[0,h.height],b=O(x,S?[i,r]:[r,i]);return p.current=h,b(o-h.top)}return e.jsx(le,{scope:t.__scopeSlider,startEdge:S?"bottom":"top",endEdge:S?"top":"bottom",size:"height",direction:S?1:-1,children:e.jsx(me,{"data-orientation":"vertical",...g,ref:d,style:{...g.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:o=>{const h=j(o.clientY);l==null||l(h)},onSlideMove:o=>{const h=j(o.clientY);s==null||s(h)},onSlideEnd:()=>{p.current=void 0,a==null||a()},onStepKeyDown:o=>{const x=ae[S?"from-bottom":"from-top"].includes(o.key);m==null||m({event:o,direction:x?-1:1})}})})}),me=f.forwardRef((t,n)=>{const{__scopeSlider:r,onSlideStart:i,onSlideMove:c,onSlideEnd:l,onHomeKeyDown:s,onEndKeyDown:a,onStepKeyDown:m,...g}=t,u=B(T,r);return e.jsx(k.span,{...g,ref:n,onKeyDown:E(t.onKeyDown,d=>{d.key==="Home"?(s(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):oe.concat(ie).includes(d.key)&&(m(d),d.preventDefault())}),onPointerDown:E(t.onPointerDown,d=>{const p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(p)?p.focus():i(d)}),onPointerMove:E(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&c(d)}),onPointerUp:E(t.onPointerUp,d=>{const p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),l(d))})})}),pe="SliderTrack",fe=f.forwardRef((t,n)=>{const{__scopeSlider:r,...i}=t,c=B(pe,r);return e.jsx(k.span,{"data-disabled":c.disabled?"":void 0,"data-orientation":c.orientation,...i,ref:n})});fe.displayName=pe;var z="SliderRange",he=f.forwardRef((t,n)=>{const{__scopeSlider:r,...i}=t,c=B(z,r),l=ue(z,r),s=f.useRef(null),a=M(n,s),m=c.values.length,g=c.values.map(p=>Se(p,c.min,c.max)),u=m>1?Math.min(...g):0,d=100-Math.max(...g);return e.jsx(k.span,{"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,...i,ref:a,style:{...t.style,[l.startEdge]:u+"%",[l.endEdge]:d+"%"}})});he.displayName=z;var U="SliderThumb",xe=f.forwardRef((t,n)=>{const r=Be(t.__scopeSlider),[i,c]=f.useState(null),l=M(n,a=>c(a)),s=f.useMemo(()=>i?r().findIndex(a=>a.ref.current===i):-1,[r,i]);return e.jsx(ze,{...t,ref:l,index:s})}),ze=f.forwardRef((t,n)=>{const{__scopeSlider:r,index:i,name:c,...l}=t,s=B(U,r),a=ue(U,r),[m,g]=f.useState(null),u=M(n,R=>g(R)),d=m?s.form||!!m.closest("form"):!0,p=Te(m),S=s.values[i],j=S===void 0?0:Se(S,s.min,s.max),o=$e(i,s.values.length),h=p==null?void 0:p[a.size],x=h?Ge(h,j,a.direction):0;return f.useEffect(()=>{if(m)return s.thumbs.add(m),()=>{s.thumbs.delete(m)}},[m,s.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${j}% + ${x}px)`},children:[e.jsx(L.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(k.span,{role:"slider","aria-label":t["aria-label"]||o,"aria-valuemin":s.min,"aria-valuenow":S,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...l,ref:u,style:S===void 0?{display:"none"}:t.style,onFocus:E(t.onFocus,()=>{s.valueIndexToChangeRef.current=i})})}),d&&e.jsx(ge,{name:c??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:S},i)]})});xe.displayName=U;var Ue="RadioBubbleInput",ge=f.forwardRef(({__scopeSlider:t,value:n,...r},i)=>{const c=f.useRef(null),l=M(c,i),s=ke(n);return f.useEffect(()=>{const a=c.current;if(!a)return;const m=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(m,"value").set;if(s!==n&&u){const d=new Event("input",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[s,n]),e.jsx(k.input,{style:{display:"none"},...r,ref:l,defaultValue:n})});ge.displayName=Ue;function Oe(t=[],n,r){const i=[...t];return i[r]=n,i.sort((c,l)=>c-l)}function Se(t,n,r){const l=100/(r-n)*(t-n);return se(l,[0,100])}function $e(t,n){return n>2?`Value ${t+1} of ${n}`:n===2?["Minimum","Maximum"][t]:void 0}function Ye(t,n){if(t.length===1)return 0;const r=t.map(c=>Math.abs(c-n)),i=Math.min(...r);return r.indexOf(i)}function Ge(t,n,r){const i=t/2,l=O([0,50],[0,i]);return(i-l(n)*r)*r}function Xe(t){return t.slice(0,-1).map((n,r)=>t[r+1]-n)}function We(t,n){if(n>0){const r=Xe(t);return Math.min(...r)>=n}return!0}function O(t,n){return r=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const i=(n[1]-n[0])/(t[1]-t[0]);return n[0]+i*(r-t[0])}}function qe(t){return(String(t).split(".")[1]||"").length}function Je(t,n){const r=Math.pow(10,n);return Math.round(t*r)/r}var ve=ce,Qe=fe,Ze=he,et=xe;const je=f.forwardRef(({className:t,...n},r)=>e.jsxs(ve,{ref:r,className:Pe("relative flex w-full touch-none select-none items-center",t),...n,children:[e.jsx(Qe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Ze,{className:"absolute h-full bg-primary"})}),e.jsx(et,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));je.displayName=ve.displayName;function qt({auth:t,project:n,milestone:r,users:i,availableDependencies:c}){var S,j;const l=we(),{data:s,setData:a,put:m,processing:g,errors:u}=Ce({name:r.name||"",description:r.description||"",due_date:r.due_date||"",priority:r.priority||"medium",assigned_to:((S=r.assigned_to)==null?void 0:S.toString())||"empty",dependencies:((j=r.dependencies)==null?void 0:j.map(o=>o.id))||[],progress:r.progress||0}),d=o=>{o.preventDefault();const h={...s,assigned_to:s.assigned_to==="empty"?"":s.assigned_to};m(l("projects.milestones.update",[n.id,r.id]),{data:h})},p=o=>{const h=s.dependencies;h.includes(o)?a("dependencies",h.filter(x=>x!==o)):a("dependencies",[...h,o])};return e.jsxs(Ne,{title:`Edit ${r.name}`,renderHeader:()=>e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:["Edit Milestone: ",r.name]}),children:[e.jsx(_e,{title:`Edit ${r.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsx("form",{onSubmit:d,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(G,{children:[e.jsxs(X,{children:[e.jsx(W,{children:"Milestone Information"}),e.jsx(q,{children:"Update the milestone details"})]}),e.jsxs(J,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"name",children:["Milestone Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Z,{id:"name",value:s.name,onChange:o=>a("name",o.target.value),placeholder:"Enter milestone name"}),u.name&&e.jsx("p",{className:"text-red-500 text-sm",children:u.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"description",children:"Description"}),e.jsx(De,{id:"description",value:s.description,onChange:o=>a("description",o.target.value),placeholder:"Describe the milestone objectives and deliverables",rows:4}),u.description&&e.jsx("p",{className:"text-red-500 text-sm",children:u.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"due_date",children:"Due Date"}),e.jsx(Z,{id:"due_date",type:"date",value:s.due_date,onChange:o=>a("due_date",o.target.value)}),u.due_date&&e.jsx("p",{className:"text-red-500 text-sm",children:u.due_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"priority",children:["Priority ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ee,{value:s.priority,onValueChange:o=>a("priority",o),children:[e.jsx(te,{children:e.jsx(re,{})}),e.jsxs(ne,{children:[e.jsx(D,{value:"low",children:"Low"}),e.jsx(D,{value:"medium",children:"Medium"}),e.jsx(D,{value:"high",children:"High"}),e.jsx(D,{value:"critical",children:"Critical"})]})]}),u.priority&&e.jsx("p",{className:"text-red-500 text-sm",children:u.priority})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"assigned_to",children:"Assigned To"}),e.jsxs(ee,{value:s.assigned_to,onValueChange:o=>a("assigned_to",o),children:[e.jsx(te,{children:e.jsx(re,{placeholder:"Select assignee"})}),e.jsxs(ne,{children:[e.jsx(D,{value:"empty",children:"No assignee"}),i.map(o=>e.jsx(D,{value:o.id.toString(),children:o.name},o.id))]})]}),u.assigned_to&&e.jsx("p",{className:"text-red-500 text-sm",children:u.assigned_to})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"progress",children:["Progress: ",s.progress,"%"]}),e.jsx(je,{value:[s.progress],onValueChange:o=>a("progress",o[0]),max:100,step:5,className:"w-full"}),u.progress&&e.jsx("p",{className:"text-red-500 text-sm",children:u.progress})]})]})]}),c.length>0&&e.jsxs(G,{children:[e.jsxs(X,{children:[e.jsx(W,{children:"Dependencies"}),e.jsx(q,{children:"Select milestones that must be completed before this one"})]}),e.jsxs(J,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(o=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:`milestone-${o.id}`,checked:s.dependencies.includes(o.id),onCheckedChange:()=>p(o.id)}),e.jsx(_,{htmlFor:`milestone-${o.id}`,className:"text-sm",children:o.name})]},o.id))}),u.dependencies&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:u.dependencies})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(Re,{href:l("projects.milestones.show",[n.id,r.id]),children:e.jsx(Q,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(Q,{type:"submit",disabled:g,children:g?"Updating...":"Update Milestone"})]})]})})})})]})}export{qt as default};
