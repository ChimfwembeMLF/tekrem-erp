import{u as z,r as o,j as e,S as E,A as c,x as q}from"./app-BMIA6nir.js";import{A as G}from"./AppLayout-DbMk6clK.js";import{B as l}from"./createLucideIcon-Cg8jdX0w.js";import{C as _,a as k,b as A,c as U,d as J}from"./card-BAsSN-2Z.js";import{I as K}from"./input-Bg5GDATO.js";import{L as u}from"./label-CM6YsqH1.js";import{S as L,a as M,b as F,c as I,d as t}from"./select-B6KOX9nY.js";import{B as g,U as O}from"./x-C3KwZK3B.js";import{A as Q,b as W,a as X}from"./avatar-DdiG0YBt.js";import{F as Y}from"./funnel-v8IwREza.js";import{S as P}from"./search-_p1CX5vB.js";import{M as Z}from"./message-square-32k9udjC.js";import{P as T}from"./plus-BjPf5uI-.js";import{U as R}from"./users-3SuyoAg3.js";import{C as ee}from"./clock-BTinGqFV.js";import{C as se}from"./circle-check-CY527q3o.js";import{A as ae}from"./archive-Bntya-At.js";import{j as m}from"./NotificationComponent-CHA3vjZG.js";import{M as te}from"./message-circle-CVsRMw7b.js";import{B as re}from"./bell-5VRgJnzP.js";import{C as le}from"./circle-alert-DVIk47WR.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./useTranslate-ER5gAOX6.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function rs({conversations:r,unreadCount:j,filters:n,userRole:x}){const i=z(),[f,N]=o.useState(n.search||""),[h,y]=o.useState(n.status||"all"),[p,v]=o.useState(n.priority||"all"),[w,b]=o.useState(n.assigned_to_me||!1),B=s=>{s.preventDefault(),c.get(i("crm.livechat.index"),{search:f,status:h==="all"?"":h,priority:p==="all"?"":p,assigned_to_me:w},{preserveState:!0})},D=()=>{N(""),y("all"),v("all"),b(!1),c.get(i("crm.livechat.index"))},H=s=>{switch(s){case"urgent":return e.jsx(le,{className:"h-4 w-4 text-red-500"});case"high":return e.jsx(m,{className:"h-4 w-4 text-orange-500"});case"normal":return e.jsx(m,{className:"h-4 w-4 text-blue-500"});case"low":return e.jsx(m,{className:"h-4 w-4 text-gray-400"});default:return e.jsx(m,{className:"h-4 w-4 text-blue-500"})}},$=s=>{const a={active:"default",archived:"secondary",closed:"destructive"};return e.jsx(g,{variant:a[s]||"outline",children:s.charAt(0).toUpperCase()+s.slice(1)})},V=s=>{if(!s.latest_message)return"No messages yet";const a=s.latest_message;if(!a||!a.message)return"No messages yet";const d=new Date(a.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),S=typeof a.message=="string"?a.message:"";return`${d} - ${S.substring(0,50)}${S.length>50?"...":""}`},C=s=>!s||typeof s!="string"?"U":s.split(" ").map(a=>a[0]).join("").toUpperCase();return e.jsxs(G,{title:"Chat",renderHeader:()=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Chat"})]}),j>0&&e.jsxs(g,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3"}),j," unread"]})]}),x!=="customer"&&e.jsxs(l,{onClick:()=>c.get(i("crm.livechat.find-or-create")),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"New Conversation"]})]}),children:[e.jsx(E,{title:"Chat"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(_,{className:"mb-6",children:[e.jsx(k,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(U,{children:e.jsxs("form",{onSubmit:B,className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx(u,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"search",type:"text",placeholder:"Search conversations...",value:f,onChange:s=>N(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"min-w-[150px]",children:[e.jsx(u,{htmlFor:"status",children:"Status"}),e.jsxs(L,{value:h,onValueChange:y,children:[e.jsx(M,{children:e.jsx(F,{placeholder:"All Statuses"})}),e.jsxs(I,{children:[e.jsx(t,{value:"all",children:"All Statuses"}),e.jsx(t,{value:"active",children:"Active"}),e.jsx(t,{value:"archived",children:"Archived"}),e.jsx(t,{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"min-w-[150px]",children:[e.jsx(u,{htmlFor:"priority",children:"Priority"}),e.jsxs(L,{value:p,onValueChange:v,children:[e.jsx(M,{children:e.jsx(F,{placeholder:"All Priorities"})}),e.jsxs(I,{children:[e.jsx(t,{value:"all",children:"All Priorities"}),e.jsx(t,{value:"low",children:"Low"}),e.jsx(t,{value:"normal",children:"Normal"}),e.jsx(t,{value:"high",children:"High"}),e.jsx(t,{value:"urgent",children:"Urgent"})]})]})]}),x!=="customer"&&e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:s=>b(s.target.checked),className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm",children:"Assigned to me"})]})}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs(l,{type:"submit",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Search"]}),e.jsx(l,{type:"button",variant:"outline",onClick:D,children:"Clear"})]})]})})]}),e.jsxs(_,{children:[e.jsxs(k,{children:[e.jsxs(A,{children:["Conversations (",r.total,")"]}),e.jsx(J,{children:"Professional chat system for customer communication and team collaboration"})]}),e.jsxs(U,{children:[r.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No conversations found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:x==="customer"?"Start a conversation with our support team.":"Get started by creating your first conversation."}),x!=="customer"&&e.jsxs(l,{onClick:()=>c.get(i("crm.livechat.create")),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"New Conversation"]})]}):e.jsx("div",{className:"space-y-4",children:r.data.map(s=>{var a,d;return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>c.get(i("crm.livechat.show",s.id)),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsxs(Q,{className:"h-10 w-10",children:[e.jsx(W,{src:(a=s.conversable)==null?void 0:a.avatar}),e.jsx(X,{children:s.conversable?C(s.conversable.name||"Unknown"):C(((d=s.creator)==null?void 0:d.name)||"Unknown")})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:s.display_title||s.title||`Conversation #${s.id}`}),H(s.priority),$(s.status),s.unread_count>0&&e.jsx(g,{variant:"destructive",className:"text-xs",children:s.unread_count})]}),s.conversable&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:[s.conversable.name||"Unknown"," (",s.conversable.email||"No email",")"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:V(s)}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[s.assignee&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"h-3 w-3"}),s.assignee.name||"Unknown"]}),s.participant_users&&s.participant_users.length>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),s.participant_users.length," participants"]}),s.last_message_at&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),new Date(s.last_message_at).toLocaleDateString()]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:s.status==="active"?e.jsx(se,{className:"h-5 w-5 text-green-500"}):s.status==="archived"?e.jsx(ae,{className:"h-5 w-5 text-gray-500"}):e.jsx(m,{className:"h-5 w-5 text-red-500"})})]})},s.id)})}),r.last_page>1&&e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",r.from," to ",r.to," of ",r.total," conversations"]}),e.jsx("div",{className:"flex gap-1",children:r.links.map((s,a)=>s.url===null?e.jsx(l,{variant:"outline",size:"sm",disabled:!0,dangerouslySetInnerHTML:{__html:s.label}},a):e.jsx(q,{href:s.url,children:e.jsx(l,{variant:s.active?"default":"outline",size:"sm",dangerouslySetInnerHTML:{__html:s.label}})},a))})]})]})]})]})})]})}export{rs as default};
