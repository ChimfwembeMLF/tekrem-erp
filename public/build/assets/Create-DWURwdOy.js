import{G as M,j as e,S as L,x as D}from"./app-BMIA6nir.js";import{A as q,a as I}from"./AppLayout-DbMk6clK.js";import{C as f,a as _,b as y,c as N,d as V}from"./card-BAsSN-2Z.js";import{B as b}from"./createLucideIcon-Cg8jdX0w.js";import{I as p}from"./input-Bg5GDATO.js";import{L as d}from"./label-CM6YsqH1.js";import{T as O}from"./textarea-CP26afIU.js";import{S as x,a as u,b as h,c as g,d as m}from"./select-B6KOX9nY.js";import{u as P}from"./useTranslate-ER5gAOX6.js";import{t as w}from"./index-Dj2TB_RL.js";import{A as Y}from"./arrow-left-UX2kDF52.js";import{D as z}from"./dollar-sign-Cli0KufN.js";import{B as G}from"./building-DIkCZBBP.js";import{C as H}from"./calendar-DTsvo4Hi.js";import{T as R}from"./target-DIhftedx.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./x-C3KwZK3B.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function Ye({accounts:c=[],categories:j=[],periodTypes:B={},statuses:T={}}){const{t:s}=P(),{data:a,setData:n,post:F,processing:v,errors:r}=M({account_id:"",category_id:"none",name:"",description:"",amount:"",period_type:"monthly",start_date:new Date().toISOString().split("T")[0],end_date:"",status:"active"}),k=t=>{t.preventDefault(),F(route("finance.budgets.store"),{onSuccess:()=>{w.success(s("finance.budget_created","Budget created successfully"))},onError:()=>{w.error(s("common.error_occurred","An error occurred"))}})},C=(t,i)=>{if(!t)return"";const l=new Date(t);let o=new Date(l);switch(i){case"weekly":o.setDate(l.getDate()+7);break;case"monthly":o.setMonth(l.getMonth()+1);break;case"quarterly":o.setMonth(l.getMonth()+3);break;case"yearly":o.setFullYear(l.getFullYear()+1);break;default:o.setMonth(l.getMonth()+1)}return o.toISOString().split("T")[0]},A=t=>{if(n("period_type",t),a.start_date){const i=C(a.start_date,t);n("end_date",i)}},E=t=>{if(n("start_date",t),t){const i=C(t,a.period_type);n("end_date",i)}},S=c==null?void 0:c.find(t=>t.id.toString()===a.account_id);return e.jsxs(q,{title:s("finance.create_budget","Create Budget"),breadcrumbs:[{label:s("finance.title","Finance"),href:"/finance"},{label:s("finance.budgets","Budgets"),href:"/finance/budgets"},{label:s("finance.create_budget","Create Budget")}],children:[e.jsx(L,{title:s("finance.create_budget","Create Budget")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(D,{href:route("finance.budgets.index"),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),s("common.back","Back")]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s("finance.create_budget","Create Budget")}),e.jsx("p",{className:"text-muted-foreground",children:s("finance.create_budget_description","Set up a new financial budget to track your spending")})]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(f,{children:[e.jsx(_,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),s("finance.budget_details","Budget Details")]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"name",children:[s("finance.budget_name","Budget Name")," *"]}),e.jsx(p,{id:"name",placeholder:s("finance.budget_name_placeholder","Enter budget name..."),value:a.name,onChange:t=>n("name",t.target.value),required:!0}),r.name&&e.jsx("p",{className:"text-sm text-red-600",children:r.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:s("finance.description","Description")}),e.jsx(O,{id:"description",placeholder:s("finance.budget_description_placeholder","Describe the purpose of this budget..."),value:a.description,onChange:t=>n("description",t.target.value),rows:3}),r.description&&e.jsx("p",{className:"text-sm text-red-600",children:r.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"amount",children:[s("finance.budget_amount","Budget Amount")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"amount",type:"number",min:"0",step:"0.01",placeholder:"0.00",value:a.amount,onChange:t=>n("amount",t.target.value),className:"pl-8",required:!0})]}),S&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Currency: ",S.currency]}),r.amount&&e.jsx("p",{className:"text-sm text-red-600",children:r.amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"status",children:[s("common.status","Status")," *"]}),e.jsxs(x,{value:a.status,onValueChange:t=>n("status",t),children:[e.jsx(u,{children:e.jsx(h,{})}),e.jsx(g,{children:Object.entries(T||{}).map(([t,i])=>e.jsx(m,{value:t,children:i},t))})]}),r.status&&e.jsx("p",{className:"text-sm text-red-600",children:r.status})]})]})]}),e.jsxs(f,{children:[e.jsx(_,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),s("finance.account_category","Account & Category")]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"account_id",children:[s("finance.account","Account")," *"]}),e.jsxs(x,{value:a.account_id,onValueChange:t=>n("account_id",t),children:[e.jsx(u,{children:e.jsx(h,{placeholder:s("finance.select_account","Select account")})}),e.jsx(g,{children:(c==null?void 0:c.map(t=>e.jsx(m,{value:t.id.toString(),children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.type," - ",t.currency]})]})},t.id)))||[]})]}),r.account_id&&e.jsx("p",{className:"text-sm text-red-600",children:r.account_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"category_id",children:s("finance.category","Category")}),e.jsxs(x,{value:a.category_id,onValueChange:t=>n("category_id",t),children:[e.jsx(u,{children:e.jsx(h,{placeholder:s("finance.select_category","Select category (optional)")})}),e.jsxs(g,{children:[e.jsx(m,{value:"none",children:s("finance.no_category","No category")}),(j==null?void 0:j.map(t=>e.jsx(m,{value:t.id.toString(),children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]})},t.id)))||[]]})]}),r.category_id&&e.jsx("p",{className:"text-sm text-red-600",children:r.category_id})]})]})]})]}),e.jsxs(f,{children:[e.jsxs(_,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),s("finance.budget_period","Budget Period")]}),e.jsx(V,{children:s("finance.budget_period_description","Define the time period for this budget")})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"period_type",children:[s("finance.period_type","Period Type")," *"]}),e.jsxs(x,{value:a.period_type,onValueChange:A,children:[e.jsx(u,{children:e.jsx(h,{})}),e.jsx(g,{children:Object.entries(B||{}).map(([t,i])=>e.jsx(m,{value:t,children:i},t))})]}),r.period_type&&e.jsx("p",{className:"text-sm text-red-600",children:r.period_type})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"start_date",children:[s("finance.start_date","Start Date")," *"]}),e.jsx(p,{id:"start_date",type:"date",value:a.start_date,onChange:t=>E(t.target.value),required:!0}),r.start_date&&e.jsx("p",{className:"text-sm text-red-600",children:r.start_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"end_date",children:[s("finance.end_date","End Date")," *"]}),e.jsx(p,{id:"end_date",type:"date",value:a.end_date,onChange:t=>n("end_date",t.target.value),required:!0}),r.end_date&&e.jsx("p",{className:"text-sm text-red-600",children:r.end_date})]})]}),a.start_date&&a.end_date&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:s("finance.budget_duration","Budget Duration")})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[new Date(a.start_date).toLocaleDateString()," - ",new Date(a.end_date).toLocaleDateString()," ","(",Math.ceil((new Date(a.end_date).getTime()-new Date(a.start_date).getTime())/(1e3*60*60*24))," days)"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(b,{type:"button",variant:"outline",asChild:!0,children:e.jsx(D,{href:route("finance.budgets.index"),children:s("common.cancel","Cancel")})}),e.jsx(b,{type:"submit",disabled:v,children:v?s("common.saving","Saving..."):s("finance.create_budget","Create Budget")})]})]})]})]})}export{Ye as default};
