import{u as T,j as e,S as D,x as v}from"./app-BMIA6nir.js";import{u as P,A as S}from"./AppLayout-DbMk6clK.js";import{C as a,a as d,b as n,d as m,c as i}from"./card-BAsSN-2Z.js";import{B as l}from"./createLucideIcon-Cg8jdX0w.js";import{B as x}from"./x-C3KwZK3B.js";import{P as _}from"./progress-BgfGBUAj.js";import{T as B,a as F,b as j,c as p}from"./tabs-YflTNJKH.js";import{C as L}from"./calendar-DTsvo4Hi.js";import{U as M}from"./users-3SuyoAg3.js";import{C as z}from"./clock-BTinGqFV.js";import{F as k}from"./file-text-D25AipK4.js";import{P as b}from"./plus-BjPf5uI-.js";import{E}from"./eye-DdivFxyT.js";import{D as H}from"./download-CNZP3fGS.js";import{S as U}from"./square-pen-CReBrXbl.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./useTranslate-ER5gAOX6.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";function Le({auth:$,project:c,milestone:s}){var N,f,y;const g=T(),{hasPermission:o}=P(),h=r=>{switch(r){case"pending":return"bg-gray-100 text-gray-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=r=>{switch(r){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},w=r=>r?new Date(r).toLocaleDateString():"No due date",C=((N=s.time_logs)==null?void 0:N.reduce((r,t)=>r+t.hours,0))||0;return e.jsxs(S,{title:`${s.name} - ${c.name}`,renderHeader:()=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[c.name," • Milestone"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{href:g("projects.milestones.index",c.id),children:e.jsx(l,{variant:"outline",children:"Back to Milestones"})}),o("projects.milestones.edit")&&e.jsx(v,{href:g("projects.milestones.edit",[c.id,s.id]),children:e.jsxs(l,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Edit Milestone"]})})]})]}),children:[e.jsx(D,{title:`${s.name} - ${c.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(a,{children:[e.jsx(d,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[s.name,e.jsx(x,{variant:"outline",className:h(s.status),children:s.status}),e.jsx(x,{variant:"outline",className:u(s.priority),children:s.priority})]}),e.jsx(m,{className:"mt-2",children:s.description||"No description provided"})]})})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"%"]})]}),e.jsx(_,{value:s.progress,className:"h-3"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[s.due_date&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Due: ",w(s.due_date)]})]}),s.assignee&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Assigned to: ",s.assignee.name]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Total Hours: ",C.toFixed(1)]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Files: ",((f=s.files)==null?void 0:f.length)||0]})]})]})]})})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs(a,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(n,{className:"text-sm font-medium",children:"Milestone Stats"})}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),e.jsx(x,{variant:"outline",className:h(s.status),children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Priority"}),e.jsx(x,{variant:"outline",className:u(s.priority),children:s.priority})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.progress,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Dependencies"}),e.jsx("span",{className:"text-sm font-medium",children:((y=s.dependencies)==null?void 0:y.length)||0})]})]})]})})]}),e.jsxs(B,{defaultValue:"dependencies",className:"w-full",children:[e.jsxs(F,{children:[e.jsx(j,{value:"dependencies",children:"Dependencies"}),e.jsx(j,{value:"files",children:"Files"}),e.jsx(j,{value:"time-logs",children:"Time Logs"})]}),e.jsx(p,{value:"dependencies",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(n,{children:"Dependencies"}),e.jsx(m,{children:"Milestones that must be completed before this one"})]}),e.jsx(i,{children:s.dependencies&&s.dependencies.length>0?e.jsx("div",{className:"space-y-3",children:s.dependencies.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Progress: ",r.progress,"%"]})}),e.jsx(x,{variant:"outline",className:h(r.status),children:r.status})]},r.id))}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No dependencies for this milestone"})})]})}),e.jsx(p,{value:"files",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Files"}),e.jsx(m,{children:"Files attached to this milestone"})]}),o("projects.files.create")&&e.jsxs(l,{size:"sm",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Upload File"]})]}),e.jsx(i,{children:s.files&&s.files.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.files.map(r=>{var t;return e.jsx(a,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[r.file_size_formatted," • ",r.category]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Uploaded by ",(t=r.uploader)==null?void 0:t.name]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(E,{className:"h-3 w-3"})}),e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(H,{className:"h-3 w-3"})})]})]})})},r.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No files attached to this milestone"})})]})}),e.jsx(p,{value:"time-logs",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Time Logs"}),e.jsx(m,{children:"Time tracked for this milestone"})]}),o("projects.time-logs.create")&&e.jsxs(l,{size:"sm",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Log Time"]})]}),e.jsx(i,{children:s.time_logs&&s.time_logs.length>0?e.jsx("div",{className:"space-y-3",children:s.time_logs.map(r=>{var t;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(t=r.user)==null?void 0:t.name," • ",new Date(r.logged_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:[r.hours,"h"]}),r.is_billable&&e.jsx("p",{className:"text-xs text-green-600",children:"Billable"})]})]},r.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No time logged for this milestone"})})]})})]})]})})})]})}export{Le as default};
