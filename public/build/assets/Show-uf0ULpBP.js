import{u as B,j as e,S as E,x as y,A as v}from"./app-BMIA6nir.js";import{A as L}from"./AppLayout-DbMk6clK.js";import{C as c,a as l,b as m,c as d}from"./card-BAsSN-2Z.js";import{B as r}from"./createLucideIcon-Cg8jdX0w.js";import{B as w}from"./x-C3KwZK3B.js";import{T as F,a as H,b as C,c as j,d as Q,e as u}from"./table-DqBb-9tC.js";import{u as q}from"./useTranslate-ER5gAOX6.js";import{t as o}from"./index-Dj2TB_RL.js";import{A as U}from"./arrow-left-UX2kDF52.js";import{R as p}from"./refresh-cw-CkrxGXg9.js";import{C as x}from"./circle-x-D-Fm_LhT.js";import{F as A}from"./file-text-D25AipK4.js";import{C as b}from"./copy-XqgUo3o3.js";import{S as V}from"./shield-DwKJ9Ble.js";import{T as M}from"./triangle-alert-BWIpgUmg.js";import{Q as $}from"./qr-code-DGVtFBDO.js";import{E as O}from"./external-link-DiDOWbPw.js";import{H as R}from"./history-DEH5TO3o.js";import{C as k}from"./circle-check-big-DCsv6rXk.js";import{C as W}from"./clock-BTinGqFV.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";function $e({zraInvoice:s}){var N;const{t:a}=q(),h=B(),S=()=>{v.post(h("finance.zra.resubmit",s.invoice_id),{},{onSuccess:()=>{o.success(a("finance.zra.resubmission_started","ZRA resubmission started"))},onError:()=>{o.error(a("common.error_occurred","An error occurred"))}})},T=()=>{confirm(a("finance.zra.confirm_cancel","Are you sure you want to cancel this ZRA submission?"))&&v.post(h("finance.zra.cancel",s.invoice_id),{},{onSuccess:()=>{o.success(a("finance.zra.cancelled","ZRA submission cancelled"))},onError:()=>{o.error(a("common.error_occurred","An error occurred"))}})},f=(i,t)=>{navigator.clipboard.writeText(i).then(()=>{o.success(a("common.copied_to_clipboard",`${t} copied to clipboard`))})},g=i=>{const t={pending:{variant:"secondary",icon:W,color:"text-yellow-600"},submitted:{variant:"default",icon:p,color:"text-blue-600"},approved:{variant:"default",icon:k,color:"text-green-600"},rejected:{variant:"destructive",icon:x,color:"text-red-600"},cancelled:{variant:"secondary",icon:x,color:"text-gray-600"}},_=t[i]||t.pending,D=_.icon;return e.jsxs(w,{variant:_.variant,className:"flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),a(`finance.zra.status.${i}`,i.replace("_"," "))]})},n=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Z=(i,t="ZMW")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(i);return e.jsxs(L,{title:a("finance.zra.smart_invoice_details","ZRA Smart Invoice Details"),breadcrumbs:[{label:a("finance.title","Finance"),href:"/finance"},{label:a("finance.zra.title","ZRA Smart Invoices"),href:"/finance/zra"},{label:s.invoice.invoice_number}],children:[e.jsx(E,{title:a("finance.zra.smart_invoice_details","ZRA Smart Invoice Details")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(r,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(y,{href:h("finance.zra.index"),children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:a("finance.zra.smart_invoice","ZRA Smart Invoice")}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[a("finance.invoice","Invoice"),": ",s.invoice.invoice_number]}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),g(s.submission_status),s.is_test_mode&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx(w,{variant:"outline",className:"text-orange-600 border-orange-600",children:a("finance.zra.test_mode","Test Mode")})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[(s.submission_status==="rejected"||s.submission_status==="cancelled")&&e.jsxs(r,{onClick:S,variant:"outline",className:"border-blue-600 text-blue-600",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),a("finance.zra.resubmit","Resubmit")]}),(s.submission_status==="pending"||s.submission_status==="submitted")&&e.jsxs(r,{onClick:T,variant:"outline",className:"border-red-600 text-red-600",children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),a("finance.zra.cancel","Cancel")]}),e.jsx(r,{variant:"outline",asChild:!0,children:e.jsxs(y,{href:h("finance.invoices.show",s.invoice_id),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),a("finance.view_invoice","View Invoice")]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(c,{children:[e.jsx(l,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),a("finance.invoice_information","Invoice Information")]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.invoice_number","Invoice Number")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:s.invoice.invoice_number}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>f(s.invoice.invoice_number,"Invoice number"),children:e.jsx(b,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.total_amount","Total Amount")}),e.jsx("p",{className:"font-medium",children:Z(s.invoice.total_amount,s.invoice.currency)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.issue_date","Issue Date")}),e.jsx("p",{children:new Date(s.invoice.issue_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.client","Client")}),e.jsx("p",{children:((N=s.invoice.billable)==null?void 0:N.name)||"N/A"})]})]})})]}),e.jsxs(c,{children:[e.jsx(l,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),a("finance.zra.submission_details","ZRA Submission Details")]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.zra_reference&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.zra.reference","ZRA Reference")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:s.zra_reference}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>f(s.zra_reference,"ZRA reference"),children:e.jsx(b,{className:"h-3 w-3"})})]})]}),s.submission_id&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.zra.submission_id","Submission ID")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:s.submission_id}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>f(s.submission_id,"Submission ID"),children:e.jsx(b,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.zra.status","Status")}),e.jsx("div",{className:"mt-1",children:g(s.submission_status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.zra.retry_count","Retry Count")}),e.jsx("p",{children:s.retry_count})]}),s.submitted_at&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.zra.submitted_at","Submitted At")}),e.jsx("p",{children:n(s.submitted_at)})]}),s.submitted_by&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a("finance.zra.submitted_by","Submitted By")}),e.jsx("p",{children:s.submitted_by.name})]})]})})]}),s.validation_errors&&s.validation_errors.length>0&&e.jsxs(c,{children:[e.jsx(l,{children:e.jsxs(m,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(M,{className:"h-4 w-4"}),a("finance.zra.validation_errors","Validation Errors")]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:s.validation_errors.map((i,t)=>e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800",children:i})},t))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[s.qr_code_image&&e.jsxs(c,{children:[e.jsx(l,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),a("finance.zra.qr_code","ZRA QR Code")]})}),e.jsx(d,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border inline-block",children:e.jsx("img",{src:s.qr_code_image,alt:"ZRA QR Code",className:"w-48 h-48 mx-auto"})}),s.verification_url&&e.jsx(r,{variant:"outline",className:"mt-4 w-full",asChild:!0,children:e.jsxs("a",{href:s.verification_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),a("finance.zra.verify_online","Verify Online")]})})]})})]}),e.jsxs(c,{children:[e.jsx(l,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),a("finance.zra.timeline","Timeline")]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[s.approved_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(k,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-600",children:a("finance.zra.approved","Approved")}),e.jsx("p",{className:"text-sm text-gray-600",children:n(s.approved_at)})]})]}),s.rejected_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-600",children:a("finance.zra.rejected","Rejected")}),e.jsx("p",{className:"text-sm text-gray-600",children:n(s.rejected_at)})]})]}),s.cancelled_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x,{className:"h-5 w-5 text-gray-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-600",children:a("finance.zra.cancelled","Cancelled")}),e.jsx("p",{className:"text-sm text-gray-600",children:n(s.cancelled_at)})]})]}),s.submitted_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-600",children:a("finance.zra.submitted","Submitted")}),e.jsx("p",{className:"text-sm text-gray-600",children:n(s.submitted_at)}),s.submitted_by&&e.jsxs("p",{className:"text-xs text-gray-500",children:["by ",s.submitted_by.name]})]})]})]})})]})]})]}),s.audit_logs.length>0&&e.jsxs(c,{children:[e.jsx(l,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),a("finance.zra.audit_log","Audit Log")]})}),e.jsx(d,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(C,{children:[e.jsx(j,{children:a("finance.zra.action","Action")}),e.jsx(j,{children:a("finance.zra.description","Description")}),e.jsx(j,{children:a("finance.zra.user","User")}),e.jsx(j,{children:a("finance.zra.timestamp","Timestamp")})]})}),e.jsx(Q,{children:s.audit_logs.map(i=>e.jsxs(C,{children:[e.jsx(u,{className:"font-medium",children:i.action}),e.jsx(u,{children:i.description}),e.jsx(u,{children:i.user.name}),e.jsx(u,{className:"text-sm text-gray-600",children:n(i.created_at)})]},i.id))})]})})})]})]})]})}export{$e as default};
