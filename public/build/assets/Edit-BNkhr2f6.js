import{r as F,G,j as e,S as O,x as I}from"./app-BMIA6nir.js";import{C as x,a as h,b as u,d as j,c as g}from"./card-BAsSN-2Z.js";import{B as p}from"./createLucideIcon-Cg8jdX0w.js";import{I as c}from"./input-Bg5GDATO.js";import{L as r}from"./label-CM6YsqH1.js";import{T as z}from"./textarea-CP26afIU.js";import{S as H,a as K,b as V,c as Z,d as v}from"./select-B6KOX9nY.js";import{S as D}from"./switch-_qD_kSA5.js";import{B as N}from"./x-C3KwZK3B.js";import{A as J,a as Q}from"./alert-CNp8ZuHk.js";import{A as W}from"./AppLayout-DbMk6clK.js";import{u as X}from"./useTranslate-ER5gAOX6.js";import{S as E}from"./sheet-1SUjjT9Y.js";import{B as P}from"./bot-COuCQh0r.js";import{B}from"./brain-D-NomhzH.js";import{Z as f}from"./zap-CQoeASxN.js";import{S as Y}from"./shield-DwKJ9Ble.js";import{G as L}from"./globe-S29F6yCY.js";import{D as $}from"./dollar-sign-Cli0KufN.js";import{L as ee}from"./loader-circle-BUEefOfS.js";import{S as se}from"./save-D6UyxhH5.js";import{C as te}from"./circle-alert-DVIk47WR.js";import{A as ae}from"./arrow-left-UX2kDF52.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";import"./index-DgfI6AGt.js";import"./useTypedPage-hmuARwun.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./share-2-cOWypco3.js";import"./log-out-B525vUfE.js";function is({service:a}){var k,w,A;const{t:s}=X(),[m,y]=F.useState(a.supported_features||[]),[o,_]=F.useState(""),{data:i,setData:l,put:q,processing:b,errors:n,reset:re}=G({name:a.name,provider:a.provider,api_key:a.api_key||"",api_url:a.api_url||"",description:a.description||"",is_enabled:a.is_enabled,is_default:a.is_default,priority:a.priority.toString(),supported_features:a.supported_features||[],cost_per_token:((k=a.cost_per_token)==null?void 0:k.toString())||"",rate_limit_per_minute:((w=a.rate_limit_per_minute)==null?void 0:w.toString())||"",max_tokens_per_request:((A=a.max_tokens_per_request)==null?void 0:A.toString())||"",configuration:a.configuration||{}}),T=t=>{t.preventDefault(),q(route("ai.services.update",a.id))},S=()=>{if(o.trim()&&!m.includes(o.trim())){const t=[...m,o.trim()];y(t),l("supported_features",t),_("")}},U=t=>{const d=m.filter(R=>R!==t);y(d),l("supported_features",d)},C=t=>{switch(t){case"mistral":return e.jsx(P,{className:"h-4 w-4 text-orange-600"});case"openai":return e.jsx(B,{className:"h-4 w-4 text-green-600"});case"anthropic":return e.jsx(f,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(E,{className:"h-4 w-4 text-gray-600"})}},M=t=>({mistral:"bg-orange-100 text-orange-800",openai:"bg-green-100 text-green-800",anthropic:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800";return e.jsxs(W,{title:s("Edit AI Service"),renderHeader:()=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(I,{href:route("ai.services.show",a.id),children:e.jsxs(p,{variant:"ghost",size:"sm",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),s("Back to Service")]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:s("Edit AI Service")}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:s("Update service configuration and settings")})]})]})}),children:[e.jsx(O,{title:s("Edit AI Service")}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsxs(u,{className:"flex items-center",children:[C(a.provider),e.jsx("span",{className:"ml-2",children:s("Service Information")})]}),e.jsx(j,{children:s("Current service details and status")})]}),e.jsx(g,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-sm font-medium text-gray-600",children:s("Current Provider")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[C(a.provider),e.jsx("span",{className:"font-medium",children:a.provider}),e.jsx(N,{className:M(a.provider),children:a.provider.toUpperCase()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-sm font-medium text-gray-600",children:s("Service ID")}),e.jsx("div",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:a.id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-sm font-medium text-gray-600",children:s("Models Count")}),e.jsx("div",{className:"text-lg font-semibold",children:a.models_count})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-sm font-medium text-gray-600",children:s("Status")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{variant:a.is_enabled?"default":"secondary",children:a.is_enabled?s("Enabled"):s("Disabled")}),a.is_default&&e.jsx(N,{variant:"default",children:s("Default")})]})]})]})})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsxs(u,{className:"flex items-center",children:[e.jsx(E,{className:"h-5 w-5 mr-2"}),s("Basic Configuration")]}),e.jsx(j,{children:s("Update the basic service settings")})]}),e.jsxs(g,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"name",children:[s("Service Name")," *"]}),e.jsx(c,{id:"name",type:"text",value:i.name,onChange:t=>l("name",t.target.value),placeholder:s("Enter a descriptive name for the service"),className:n.name?"border-red-500":""}),n.name&&e.jsx("p",{className:"text-sm text-red-600",children:n.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"provider",children:[s("Provider")," *"]}),e.jsxs(H,{value:i.provider,onValueChange:t=>l("provider",t),children:[e.jsx(K,{className:n.provider?"border-red-500":"",children:e.jsx(V,{placeholder:s("Select a provider")})}),e.jsxs(Z,{children:[e.jsx(v,{value:"mistral",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{children:"Mistral AI"})]})}),e.jsx(v,{value:"openai",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"OpenAI"})]})}),e.jsx(v,{value:"anthropic",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{children:"Anthropic"})]})})]})]}),n.provider&&e.jsx("p",{className:"text-sm text-red-600",children:n.provider})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"api_key",children:s("API Key")}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(c,{id:"api_key",type:"password",value:i.api_key,onChange:t=>l("api_key",t.target.value),placeholder:s("Enter your API key"),className:"pl-10"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Leave empty to keep current key")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"api_url",children:s("API URL")}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(c,{id:"api_url",type:"url",value:i.api_url,onChange:t=>l("api_url",t.target.value),placeholder:s("https://api.example.com"),className:"pl-10"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Custom API endpoint (optional)")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",children:s("Description")}),e.jsx(z,{id:"description",value:i.description,onChange:t=>l("description",t.target.value),placeholder:s("Describe the service and its capabilities"),rows:3,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"priority",children:s("Priority")}),e.jsx(c,{id:"priority",type:"number",value:i.priority,onChange:t=>l("priority",t.target.value),placeholder:"1",min:"1",max:"100"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Lower numbers have higher priority (1 = highest)")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:s("Enable Service")}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Make this service available for use")})]}),e.jsx(D,{checked:i.is_enabled,onCheckedChange:t=>l("is_enabled",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:s("Set as Default")}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Use as default service for this provider")})]}),e.jsx(D,{checked:i.is_default,onCheckedChange:t=>l("is_default",t)})]})]})]})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsxs(u,{className:"flex items-center",children:[e.jsx(L,{className:"h-5 w-5 mr-2"}),s("Advanced Configuration")]}),e.jsx(j,{children:s("Configure service limits and features")})]}),e.jsxs(g,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"cost_per_token",children:s("Cost per Token")}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(c,{id:"cost_per_token",type:"number",value:i.cost_per_token,onChange:t=>l("cost_per_token",t.target.value),placeholder:"0.000001",min:"0",step:"0.000001",className:"pl-10"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Cost in USD per token")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"rate_limit_per_minute",children:s("Rate Limit (per minute)")}),e.jsx(c,{id:"rate_limit_per_minute",type:"number",value:i.rate_limit_per_minute,onChange:t=>l("rate_limit_per_minute",t.target.value),placeholder:"60",min:"1"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Maximum requests per minute")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"max_tokens_per_request",children:s("Max Tokens per Request")}),e.jsx(c,{id:"max_tokens_per_request",type:"number",value:i.max_tokens_per_request,onChange:t=>l("max_tokens_per_request",t.target.value),placeholder:"4096",min:"1"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Maximum tokens per request")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"h-4 w-4 text-gray-600"}),e.jsx(r,{className:"text-base font-medium",children:s("Supported Features")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{value:o,onChange:t=>_(t.target.value),placeholder:s("Add a feature (e.g., chat, completion, embedding)"),onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),S())}),e.jsx(p,{type:"button",onClick:S,variant:"outline",children:s("Add")})]}),m.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.map((t,d)=>e.jsxs("div",{className:"flex items-center space-x-1 bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:[e.jsx("span",{children:t}),e.jsx("button",{type:"button",onClick:()=>U(t),className:"text-blue-600 hover:text-blue-800",children:"×"})]},d))}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Update features that this service supports")})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{href:route("ai.services.show",a.id),children:e.jsx(p,{type:"button",variant:"outline",children:s("Cancel")})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[b&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ee,{className:"h-4 w-4 mr-2 animate-spin"}),s("Saving changes...")]}),e.jsxs(p,{type:"submit",disabled:b||!i.name||!i.provider,children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),s("Save Changes")]})]})]}),Object.keys(n).length>0&&e.jsxs(J,{variant:"destructive",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsxs(Q,{children:[s("Please fix the following errors:"),e.jsx("ul",{className:"mt-2 list-disc list-inside",children:Object.entries(n).map(([t,d])=>e.jsx("li",{className:"text-sm",children:d},t))})]})]})]})})})]})}export{is as default};
