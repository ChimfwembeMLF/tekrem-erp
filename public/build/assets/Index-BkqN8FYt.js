import{r as D,j as e,S as B,A as c,x as A}from"./app-BMIA6nir.js";import{A as I,C as U,L as v}from"./AppLayout-DbMk6clK.js";import{C as f,a as T,b as R,c as g,d as P}from"./card-BAsSN-2Z.js";import{B as r}from"./createLucideIcon-Cg8jdX0w.js";import{I as H}from"./input-Bg5GDATO.js";import{S as N,a as _,b as C,c as w,d as n}from"./select-B6KOX9nY.js";import{B as y}from"./x-C3KwZK3B.js";import{C as Q}from"./checkbox-B8CiFAgv.js";import{D as q,a as K,b as O,c as x,g as G}from"./NotificationComponent-CHA3vjZG.js";import{u as J}from"./useTranslate-ER5gAOX6.js";import{U as W}from"./upload-DoO0wQwa.js";import{D as X}from"./download-CNZP3fGS.js";import{P as E}from"./plus-BjPf5uI-.js";import{F as Y}from"./funnel-v8IwREza.js";import{S as Z}from"./search-_p1CX5vB.js";import{T as L}from"./trash-2-DZc0jDKK.js";import{T as $}from"./trending-up-00s2SIxN.js";import{T as F}from"./test-tube-BGKhckqE.js";import{E as ee}from"./ellipsis-DJ3pNpl6.js";import{E as se}from"./eye-DdivFxyT.js";import{S as te}from"./square-pen-CReBrXbl.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./bell-5VRgJnzP.js";function rs({redirects:l,statusCodes:M,filters:m}){const{t}=J(),[d,h]=D.useState([]),[S,V]=D.useState(m.search||""),b=()=>{c.get(route("cms.redirects.index"),{...m,search:S},{preserveState:!0,replace:!0})},u=(s,a)=>{c.get(route("cms.redirects.index"),{...m,[s]:a||void 0},{preserveState:!0,replace:!0})},p=s=>{d.length!==0&&c.post(route("cms.redirects.bulk-action"),{action:s,redirect_ids:d},{onSuccess:()=>{h([])}})},o=(s,a)=>{var i;switch(a){case"edit":c.visit(route("cms.redirects.edit",s));break;case"view":c.visit(route("cms.redirects.show",s));break;case"test":c.post(route("cms.redirects.test"),{url:(i=l.data.find(j=>j.id===s))==null?void 0:i.from_url});break;case"delete":confirm(t("cms.confirm_delete_redirect","Are you sure you want to delete this redirect?"))&&c.delete(route("cms.redirects.destroy",s));break}},k=s=>new Date(s).toLocaleDateString(),z=s=>{const a=[301,308].includes(s);return e.jsx(y,{variant:a?"default":"secondary",children:s})};return e.jsxs(I,{children:[e.jsx(B,{title:t("cms.redirects","Redirects")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t("cms.redirects","Redirects")}),e.jsx("p",{className:"text-muted-foreground",children:t("cms.redirects_description","Manage URL redirects and aliases")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",onClick:()=>c.visit(route("cms.redirects.statistics")),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),t("cms.statistics","Statistics")]}),e.jsx(r,{variant:"outline",asChild:!0,children:e.jsxs("label",{htmlFor:"import-redirects",className:"cursor-pointer",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),t("cms.import_redirects","Import CSV")]})}),e.jsx("input",{id:"import-redirects",type:"file",accept:".csv",className:"hidden",onChange:s=>{var a;if((a=s.target.files)!=null&&a[0]){const i=new FormData;i.append("csv_file",s.target.files[0]),i.append("has_headers","true"),c.post(route("cms.redirects.import"),i)}}}),e.jsxs(r,{variant:"outline",onClick:()=>window.open(route("cms.redirects.export"),"_blank"),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),t("cms.export_csv","Export CSV")]}),e.jsx(r,{asChild:!0,children:e.jsxs(A,{href:route("cms.redirects.create"),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),t("cms.create_redirect","Create Redirect")]})})]})]}),e.jsxs(f,{children:[e.jsx(T,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5"}),t("common.filters","Filters")]})}),e.jsx(g,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{placeholder:t("cms.search_redirects","Search redirects..."),value:S,onChange:s=>V(s.target.value),onKeyPress:s=>s.key==="Enter"&&b()}),e.jsx(r,{variant:"outline",onClick:b,children:e.jsx(Z,{className:"h-4 w-4"})})]})}),e.jsxs(N,{value:m.status_code||"all",onValueChange:s=>u("status_code",s==="all"?"":s),children:[e.jsx(_,{children:e.jsx(C,{placeholder:t("cms.all_status_codes","All codes")})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:t("cms.all_status_codes","All codes")}),Object.entries(M).map(([s,a])=>e.jsxs(n,{value:s,children:[s," - ",a]},s))]})]}),e.jsxs(N,{value:m.status||"all",onValueChange:s=>u("status",s==="all"?"":s),children:[e.jsx(_,{children:e.jsx(C,{placeholder:t("cms.all_statuses","All statuses")})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:t("cms.all_statuses","All statuses")}),e.jsx(n,{value:"active",children:t("cms.active","Active")}),e.jsx(n,{value:"inactive",children:t("cms.inactive","Inactive")})]})]}),e.jsxs(N,{value:m.usage||"all",onValueChange:s=>u("usage",s==="all"?"":s),children:[e.jsx(_,{children:e.jsx(C,{placeholder:t("cms.all_usage","All usage")})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:t("cms.all_usage","All usage")}),e.jsx(n,{value:"used",children:t("cms.used","Used")}),e.jsx(n,{value:"unused",children:t("cms.unused","Unused")})]})]})]})})]}),d.length>0&&e.jsx(f,{children:e.jsx(g,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.length," ",t("cms.redirects_selected","redirects selected")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>p("activate"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),t("cms.activate","Activate")]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>p("deactivate"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),t("cms.deactivate","Deactivate")]}),e.jsxs(r,{variant:"destructive",size:"sm",onClick:()=>p("delete"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),t("common.delete","Delete")]})]})]})})}),e.jsxs(f,{children:[e.jsxs(T,{children:[e.jsx(R,{children:t("cms.redirects_list","Redirects List")}),e.jsxs(P,{children:[l.total||0," ",t("cms.total_redirects","total redirects")]})]}),e.jsxs(g,{children:[e.jsxs("div",{className:"space-y-4",children:[l.data.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[e.jsx(Q,{checked:d.includes(s.id),onCheckedChange:a=>{h(a?i=>[...i,s.id]:i=>i.filter(j=>j!==s.id))}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[z(s.status_code),e.jsx(y,{variant:s.is_active?"default":"secondary",children:s.is_active?t("cms.active","Active"):t("cms.inactive","Inactive")}),s.hit_count>0&&e.jsxs(y,{variant:"outline",className:"text-xs",children:[e.jsx($,{className:"h-3 w-3 mr-1"}),s.hit_count," hits"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:"From:"}),e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:s.from_url})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:"To:"}),e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:s.to_url})]}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-2",children:[e.jsxs("span",{children:["Created by ",s.created_by.name]}),e.jsx("span",{children:k(s.created_at)}),s.last_hit_at&&e.jsxs("span",{children:["Last hit: ",k(s.last_hit_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>o(s.id,"test"),children:e.jsx(F,{className:"h-4 w-4"})}),e.jsxs(q,{children:[e.jsx(K,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(ee,{className:"h-4 w-4"})})}),e.jsxs(O,{align:"end",children:[e.jsxs(x,{onClick:()=>o(s.id,"view"),children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),t("common.view","View")]}),e.jsxs(x,{onClick:()=>o(s.id,"edit"),children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),t("common.edit","Edit")]}),e.jsxs(x,{onClick:()=>o(s.id,"test"),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),t("cms.test_redirect","Test Redirect")]}),e.jsx(G,{}),e.jsxs(x,{onClick:()=>o(s.id,"delete"),className:"text-destructive",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),t("common.delete","Delete")]})]})]})]})]},s.id)),l.data.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(v,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:t("cms.no_redirects_found","No redirects found")}),e.jsx("p",{className:"text-sm",children:t("cms.create_first_redirect","Create your first redirect to get started")}),e.jsx(r,{asChild:!0,className:"mt-4",children:e.jsxs(A,{href:route("cms.redirects.create"),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),t("cms.create_redirect","Create Redirect")]})})]})]}),l.links&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",l.from||0," to ",l.to||0," of ",l.total||0," results"]}),e.jsx("div",{className:"flex gap-2",children:l.links.map((s,a)=>e.jsx(r,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&c.visit(s.url),dangerouslySetInnerHTML:{__html:s.label}},a))})]})]})]})]})]})}export{rs as default};
