import{u as K,G as W,R as N,j as e,S as X,x as J}from"./app-BMIA6nir.js";import{A as O}from"./AppLayout-DbMk6clK.js";import{C as g,a as j,b as _,d as f,c as v}from"./card-BAsSN-2Z.js";import{B as o}from"./createLucideIcon-Cg8jdX0w.js";import{I as i}from"./input-Bg5GDATO.js";import{L as m}from"./label-CM6YsqH1.js";import{T as Q}from"./textarea-CP26afIU.js";import{C as M}from"./checkbox-B8CiFAgv.js";import{X as b,B}from"./x-C3KwZK3B.js";import{P}from"./plus-BjPf5uI-.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./useTranslate-ER5gAOX6.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";function Ge({auth:V,template:s}){var R,k,S,q,A,E,F;const C=K(),{data:a,setData:l,put:I,processing:w,errors:c}=W({name:s.name||"",description:s.description||"",category:s.category||"",is_active:s.is_active??!0,template_data:{default_budget:((k=(R=s.template_data)==null?void 0:R.default_budget)==null?void 0:k.toString())||"",default_duration_days:((q=(S=s.template_data)==null?void 0:S.default_duration_days)==null?void 0:q.toString())||"",milestones:((A=s.template_data)==null?void 0:A.milestones)||[],team_roles:((E=s.template_data)==null?void 0:E.team_roles)||[],default_tags:((F=s.template_data)==null?void 0:F.default_tags)||[]}}),[d,h]=N.useState({name:"",description:"",estimated_days:""}),[n,x]=N.useState({role:"",description:"",required:!1}),[u,D]=N.useState(""),L=t=>{t.preventDefault(),I(C("projects.templates.update",s.id))},U=()=>{if(d.name.trim()){const t={...d,order:a.template_data.milestones.length+1};l("template_data",{...a.template_data,milestones:[...a.template_data.milestones,t]}),h({name:"",description:"",estimated_days:""})}},$=t=>{const r=a.template_data.milestones.filter((y,p)=>p!==t);l("template_data",{...a.template_data,milestones:r.map((y,p)=>({...y,order:p+1}))})},z=()=>{n.role.trim()&&(l("template_data",{...a.template_data,team_roles:[...a.template_data.team_roles,n]}),x({role:"",description:"",required:!1}))},H=t=>{const r=a.template_data.team_roles.filter((y,p)=>p!==t);l("template_data",{...a.template_data,team_roles:r})},T=()=>{u.trim()&&!a.template_data.default_tags.includes(u.trim())&&(l("template_data",{...a.template_data,default_tags:[...a.template_data.default_tags,u.trim()]}),D(""))},G=t=>{l("template_data",{...a.template_data,default_tags:a.template_data.default_tags.filter(r=>r!==t)})};return e.jsxs(O,{title:`Edit ${s.name}`,renderHeader:()=>e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:["Edit Template: ",s.name]}),children:[e.jsx(X,{title:`Edit ${s.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsx("form",{onSubmit:L,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(_,{children:"Template Information"}),e.jsx(f,{children:"Update the template details"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"name",children:["Template Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"name",value:a.name,onChange:t=>l("name",t.target.value),placeholder:"e.g., Web Development Project"}),c.name&&e.jsx("p",{className:"text-red-500 text-sm",children:c.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"category",children:"Category"}),e.jsx(i,{id:"category",value:a.category,onChange:t=>l("category",t.target.value),placeholder:"e.g., Software Development"}),c.category&&e.jsx("p",{className:"text-red-500 text-sm",children:c.category})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(Q,{id:"description",value:a.description,onChange:t=>l("description",t.target.value),placeholder:"Describe what this template is for and when to use it",rows:3}),c.description&&e.jsx("p",{className:"text-red-500 text-sm",children:c.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"default_budget",children:"Default Budget ($)"}),e.jsx(i,{id:"default_budget",type:"number",step:"0.01",value:a.template_data.default_budget,onChange:t=>l("template_data",{...a.template_data,default_budget:t.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"default_duration_days",children:"Default Duration (Days)"}),e.jsx(i,{id:"default_duration_days",type:"number",value:a.template_data.default_duration_days,onChange:t=>l("template_data",{...a.template_data,default_duration_days:t.target.value}),placeholder:"30"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"is_active",checked:a.is_active,onCheckedChange:t=>l("is_active",t)}),e.jsx(m,{htmlFor:"is_active",children:"Active template"})]})]})]}),e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(_,{children:"Default Milestones"}),e.jsx(f,{children:"Define milestones that will be created for projects using this template"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx(i,{placeholder:"Milestone name",value:d.name,onChange:t=>h({...d,name:t.target.value})}),e.jsx(i,{placeholder:"Description",value:d.description,onChange:t=>h({...d,description:t.target.value})}),e.jsx(i,{type:"number",placeholder:"Days",value:d.estimated_days,onChange:t=>h({...d,estimated_days:t.target.value})}),e.jsxs(o,{type:"button",onClick:U,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add"]})]}),a.template_data.milestones.length>0&&e.jsx("div",{className:"space-y-2",children:a.template_data.milestones.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.description," â€¢ ",t.estimated_days," days"]})]}),e.jsx(o,{type:"button",variant:"destructive",size:"sm",onClick:()=>$(r),children:e.jsx(b,{className:"h-4 w-4"})})]},r))})]})]}),e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(_,{children:"Team Roles"}),e.jsx(f,{children:"Define the roles needed for projects using this template"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx(i,{placeholder:"Role name",value:n.role,onChange:t=>x({...n,role:t.target.value})}),e.jsx(i,{placeholder:"Description",value:n.description,onChange:t=>x({...n,description:t.target.value})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"role_required",checked:n.required,onCheckedChange:t=>x({...n,required:t})}),e.jsx(m,{htmlFor:"role_required",className:"text-sm",children:"Required"})]}),e.jsxs(o,{type:"button",onClick:z,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add"]})]}),a.template_data.team_roles.length>0&&e.jsx("div",{className:"space-y-2",children:a.template_data.team_roles.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t.role,t.required&&e.jsx(B,{variant:"secondary",children:"Required"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]}),e.jsx(o,{type:"button",variant:"destructive",size:"sm",onClick:()=>H(r),children:e.jsx(b,{className:"h-4 w-4"})})]},r))})]})]}),e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(_,{children:"Default Tags"}),e.jsx(f,{children:"Tags that will be automatically applied to projects using this template"})]}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{value:u,onChange:t=>D(t.target.value),placeholder:"Enter a tag",onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),T())}),e.jsx(o,{type:"button",onClick:T,variant:"outline",children:"Add Tag"})]}),a.template_data.default_tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:a.template_data.default_tags.map((t,r)=>e.jsxs(B,{variant:"secondary",className:"flex items-center gap-1",children:[t,e.jsx(b,{className:"h-3 w-3 cursor-pointer",onClick:()=>G(t)})]},r))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(J,{href:C("projects.templates.show",s.id),children:e.jsx(o,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(o,{type:"submit",disabled:w,children:w?"Updating...":"Update Template"})]})]})})})})]})}export{Ge as default};
