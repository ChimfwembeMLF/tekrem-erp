import{u as S,j as e,S as _,x as p,A as o}from"./app-BMIA6nir.js";import{C as A}from"./CustomerLayout-7LFTkDxI.js";import{C as h,c as x,a as f,b as g,d as F}from"./card-BAsSN-2Z.js";import{U as v,B as l}from"./x-C3KwZK3B.js";import{B as i}from"./createLucideIcon-Cg8jdX0w.js";import{I as u}from"./input-Bg5GDATO.js";import{S as T,a as B,b as D,c as M,d as n}from"./select-B6KOX9nY.js";import{A as z}from"./arrow-left-UX2kDF52.js";import{F as E}from"./funnel-v8IwREza.js";import{S as P}from"./search-_p1CX5vB.js";import{C as I}from"./clock-BTinGqFV.js";import{E as L}from"./eye-DdivFxyT.js";import{M as N}from"./message-square-32k9udjC.js";import{C as q}from"./chevron-left-DHDjM8I8.js";import{e as H}from"./NotificationComponent-CHA3vjZG.js";import{C as R}from"./calendar-DTsvo4Hi.js";import{P as U}from"./phone-347MTOqH.js";import{M as V}from"./mail-CApE3o7R.js";import"./avatar-DdiG0YBt.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";import"./sheet-1SUjjT9Y.js";import"./users-3SuyoAg3.js";import"./log-out-B525vUfE.js";import"./file-text-D25AipK4.js";import"./index-BN56TOeV.js";import"./index-BeGDJhOY.js";import"./index-DgfI6AGt.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";function ye({communications:t,client:c,filters:a}){const m=S(),C=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),y=s=>{switch(s){case"email":return e.jsx(V,{className:"h-4 w-4"});case"phone":return e.jsx(U,{className:"h-4 w-4"});case"meeting":return e.jsx(R,{className:"h-4 w-4"});default:return e.jsx(N,{className:"h-4 w-4"})}},w=s=>{switch(s){case"email":return e.jsx(l,{variant:"secondary",children:"Email"});case"phone":return e.jsx(l,{variant:"outline",children:"Phone"});case"meeting":return e.jsx(l,{variant:"default",children:"Meeting"});default:return e.jsx(l,{variant:"secondary",children:s})}},d=(s,r)=>{const j={...a,[s]:r};r||delete j[s],o.get(m("customer.crm.communications"),j,{preserveState:!0,preserveScroll:!0})},b=s=>{d("search",s)};return e.jsxs(A,{children:[e.jsx(_,{title:"Communication History"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(p,{href:m("customer.crm.index"),children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Back to Account"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Communication History"}),e.jsx("p",{className:"text-muted-foreground",children:"View all your communications and interactions"})]})]})}),c&&e.jsx(h,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-secondary rounded-full flex items-center justify-center",children:e.jsx(v,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:c.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.email})]}),e.jsx(l,{variant:"secondary",className:"ml-auto",children:c.status})]})})}),e.jsxs(h,{children:[e.jsx(f,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(x,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(u,{placeholder:"Search communications...",value:a.search||"",onChange:s=>b(s.target.value),className:"pl-10"})]})}),e.jsx("div",{children:e.jsxs(T,{value:a.type||"",onValueChange:s=>d("type",s),children:[e.jsx(B,{children:e.jsx(D,{placeholder:"All Types"})}),e.jsxs(M,{children:[e.jsx(n,{value:"",children:"All Types"}),e.jsx(n,{value:"email",children:"Email"}),e.jsx(n,{value:"phone",children:"Phone"}),e.jsx(n,{value:"meeting",children:"Meeting"}),e.jsx(n,{value:"note",children:"Note"})]})]})}),e.jsx("div",{children:e.jsx(u,{type:"date",placeholder:"From Date",value:a.date_from||"",onChange:s=>d("date_from",s.target.value)})}),e.jsx("div",{children:e.jsx(u,{type:"date",placeholder:"To Date",value:a.date_to||"",onChange:s=>d("date_to",s.target.value)})})]})})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"Communications"}),e.jsxs(F,{children:["Showing ",t.from||0," to ",t.to||0," of ",t.total," communications"]})]}),e.jsxs(x,{children:[e.jsx("div",{className:"space-y-4",children:t.data.length>0?t.data.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-secondary rounded-lg",children:y(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:s.subject}),w(s.type)]}),e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-2",children:[s.content.substring(0,150),s.content.length>150&&"..."]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),s.user.name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"}),C(s.created_at)]}),s.attachments_count&&s.attachments_count>0&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:[s.attachments_count," attachment(s)"]})})]})]})]}),e.jsx(p,{href:m("customer.crm.communications.show",s.id),children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(L,{className:"h-4 w-4"})})})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(N,{className:"mx-auto h-12 w-12 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Communications Found"}),e.jsx("p",{children:"No communications match your current filters."})]})}),t.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",t.from," to ",t.to," of ",t.total," results"]}),e.jsx("div",{className:"flex items-center space-x-2",children:t.links.map((s,r)=>s.label==="&laquo; Previous"?e.jsx(i,{variant:"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&o.get(s.url),children:e.jsx(q,{className:"h-4 w-4"})},r):s.label==="Next &raquo;"?e.jsx(i,{variant:"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&o.get(s.url),children:e.jsx(H,{className:"h-4 w-4"})},r):s.label!=="..."&&!isNaN(Number(s.label))?e.jsx(i,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&o.get(s.url),children:s.label},r):null)})]})]})]})]})]})}export{ye as default};
