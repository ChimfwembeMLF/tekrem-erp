import{u as F,j as e,S,x as B,A as f}from"./app-BMIA6nir.js";import{C as A}from"./CustomerLayout-7LFTkDxI.js";import{C as a,a as r,b as l,c as i,d as o}from"./card-BAsSN-2Z.js";import{U as x,B as h}from"./x-C3KwZK3B.js";import{B as j}from"./createLucideIcon-Cg8jdX0w.js";import{I as N}from"./input-Bg5GDATO.js";import{L as g}from"./label-CM6YsqH1.js";import{A as L}from"./arrow-left-UX2kDF52.js";import{C as b}from"./clock-BTinGqFV.js";import{D as v}from"./dollar-sign-Cli0KufN.js";import{C as U}from"./calendar-DTsvo4Hi.js";import{T as I}from"./target-DIhftedx.js";import"./avatar-DdiG0YBt.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";import"./NotificationComponent-CHA3vjZG.js";import"./index-BN56TOeV.js";import"./index-BeGDJhOY.js";import"./index-DgfI6AGt.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";import"./sheet-1SUjjT9Y.js";import"./users-3SuyoAg3.js";import"./log-out-B525vUfE.js";import"./message-square-32k9udjC.js";import"./file-text-D25AipK4.js";function ne({project:d,timeEntries:u,totalHours:w,totalAmount:_,userSummary:m,filters:t}){const c=F(),y=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),n=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),T=s=>{s.preventDefault();const p=new FormData(s.currentTarget),D=p.get("start_date"),k=p.get("end_date");f.get(c("customer.projects.time-tracking",d.id),{start_date:D||void 0,end_date:k||void 0},{preserveState:!0,replace:!0})},C=()=>{f.get(c("customer.projects.time-tracking",d.id),{},{preserveState:!0,replace:!0})};return e.jsxs(A,{children:[e.jsx(S,{title:`${d.name} - Time Tracking`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(B,{href:c("customer.projects.show",d.id),children:e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Back to Project"]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[d.name," - Time Tracking"]}),e.jsx("p",{className:"text-muted-foreground",children:"View billable time entries and project costs"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Hours"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[w.toFixed(1),"h"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Billable time logged"})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Amount"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n(_)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total billable amount"})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Team Members"}),e.jsx(x,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contributors"})]})]})]}),e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Filter by Date Range"}),e.jsx(o,{children:"Filter time entries by specific date range"})]}),e.jsx(i,{children:e.jsxs("form",{onSubmit:T,className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(g,{htmlFor:"start_date",children:"Start Date"}),e.jsx(N,{id:"start_date",name:"start_date",type:"date",defaultValue:t.start_date})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(g,{htmlFor:"end_date",children:"End Date"}),e.jsx(N,{id:"end_date",name:"end_date",type:"date",defaultValue:t.end_date})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(j,{type:"submit",children:"Apply Filter"}),(t.start_date||t.end_date)&&e.jsx(j,{type:"button",variant:"outline",onClick:C,children:"Clear"})]})]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Time Entries"}),e.jsx(o,{children:"Detailed breakdown of billable time entries"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:u.length>0?u.map(s=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h4",{className:"font-medium",children:[s.hours,"h"]}),s.amount&&e.jsx(h,{variant:"secondary",children:n(s.amount)}),e.jsx(h,{variant:s.is_billable?"default":"outline",children:s.is_billable?"Billable":"Non-billable"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),y(s.date)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"h-3 w-3"}),s.user.name]}),s.task&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"}),s.task.title]}),s.hourly_rate&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),n(s.hourly_rate),"/hr"]})]})]})})},s.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No time entries found"}),e.jsx("p",{className:"text-muted-foreground",children:t.start_date||t.end_date?"No time entries match your current date filter.":"No billable time has been logged for this project yet."})]})})})]})}),e.jsx("div",{children:e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Team Summary"}),e.jsx(o,{children:"Time breakdown by team member"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:m.length>0?m.map(s=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:s.user_name}),e.jsxs(h,{variant:"outline",children:[s.total_hours.toFixed(1),"h"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total: ",n(s.total_amount)]})]},s.user_id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(x,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No team members have logged time"})]})})})]})})]})]})]})}export{ne as default};
