import{u as L,r as Z,G as D,j as e,S as E}from"./app-BMIA6nir.js";import{A as O}from"./AppLayout-DbMk6clK.js";import{B as _}from"./createLucideIcon-Cg8jdX0w.js";import{C as d,a as o,b as m,d as p,c as x}from"./card-BAsSN-2Z.js";import{I as c}from"./input-Bg5GDATO.js";import{L as i}from"./label-CM6YsqH1.js";import{T as u}from"./textarea-CP26afIU.js";import{S as b}from"./switch-_qD_kSA5.js";import{S as N,a as f,b as C,c as T,d as k}from"./select-B6KOX9nY.js";import{U as z,B as M}from"./x-C3KwZK3B.js";import{u as U}from"./useTranslate-ER5gAOX6.js";import{t as h}from"./index-Dj2TB_RL.js";import{L as w}from"./loader-circle-BUEefOfS.js";import{C as H}from"./circle-check-big-DCsv6rXk.js";import{F as J}from"./file-text-D25AipK4.js";import{P as q}from"./phone-347MTOqH.js";import{M as G}from"./map-pin-DAYpjVMq.js";import{B as S}from"./building-DIkCZBBP.js";import{S as K}from"./shield-DwKJ9Ble.js";import{S as W}from"./save-D6UyxhH5.js";import{A as $}from"./arrow-left-UX2kDF52.js";import{T as I}from"./triangle-alert-BWIpgUmg.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function Ye({taxpayerInfo:r,businessTypes:F,taxOffices:A}){U();const y=L(),[g,v]=Z.useState(!1),{data:s,setData:t,put:B,processing:j,errors:n,reset:P}=D({taxpayer_tpin:r.taxpayer_tpin||"",taxpayer_name:r.taxpayer_name||"",taxpayer_address:r.taxpayer_address||"",taxpayer_phone:r.taxpayer_phone||"",taxpayer_email:r.taxpayer_email||"",business_registration_number:r.business_registration_number||"",business_type:r.business_type||"",vat_registration_number:r.vat_registration_number||"",tax_office:r.tax_office||"",registration_date:r.registration_date||"",business_description:r.business_description||"",contact_person_name:r.contact_person_name||"",contact_person_phone:r.contact_person_phone||"",contact_person_email:r.contact_person_email||"",postal_address:r.postal_address||"",physical_address:r.physical_address||"",website:r.website||"",bank_account_number:r.bank_account_number||"",bank_name:r.bank_name||"",bank_branch:r.bank_branch||"",is_vat_registered:r.is_vat_registered||!1,is_active_taxpayer:r.is_active_taxpayer||!0}),X=a=>{a.preventDefault(),B(y("settings.finance.zra.taxpayer.update"),{onSuccess:()=>{h.success("Taxpayer information updated successfully")},onError:()=>{h.error("Failed to update taxpayer information")}})},R=async()=>{var a;if(!s.taxpayer_tpin||s.taxpayer_tpin.length!==10){h.error("TPIN must be exactly 10 characters");return}v(!0);try{const l=await(await fetch(y("settings.finance.zra.taxpayer.validate-tpin"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({tpin:s.taxpayer_tpin})})).json();l.success?(h.success("TPIN validation successful"),l.taxpayer_info&&t({...s,taxpayer_name:l.taxpayer_info.name||s.taxpayer_name,taxpayer_address:l.taxpayer_info.address||s.taxpayer_address,business_type:l.taxpayer_info.business_type||s.business_type})):h.error(`TPIN validation failed: ${l.message}`)}catch{h.error("Failed to validate TPIN")}finally{v(!1)}};return e.jsxs(O,{title:"ZRA Taxpayer Information",renderHeader:()=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"ZRA Taxpayer Information"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(M,{variant:"outline",className:"text-orange-600 border-orange-600",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"Admin Only"]})})]}),children:[e.jsx(E,{title:"ZRA Taxpayer Information"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Basic Taxpayer Information"]}),e.jsx(p,{children:"Primary taxpayer details as registered with ZRA"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"taxpayer_tpin",children:"Taxpayer TPIN *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{id:"taxpayer_tpin",placeholder:"1234567890",maxLength:10,value:s.taxpayer_tpin,onChange:a=>t("taxpayer_tpin",a.target.value.toUpperCase()),className:n.taxpayer_tpin?"border-red-500":""}),e.jsx(_,{type:"button",variant:"outline",onClick:R,disabled:g||!s.taxpayer_tpin,children:g?e.jsx(w,{className:"h-4 w-4 animate-spin"}):e.jsx(H,{className:"h-4 w-4"})})]}),n.taxpayer_tpin&&e.jsx("p",{className:"text-sm text-red-600",children:n.taxpayer_tpin}),e.jsx("p",{className:"text-sm text-gray-500",children:"10-character taxpayer identification number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"taxpayer_name",children:"Taxpayer Name *"}),e.jsx(c,{id:"taxpayer_name",placeholder:"Business or Individual Name",value:s.taxpayer_name,onChange:a=>t("taxpayer_name",a.target.value),className:n.taxpayer_name?"border-red-500":""}),n.taxpayer_name&&e.jsx("p",{className:"text-sm text-red-600",children:n.taxpayer_name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"business_registration_number",children:"Business Registration Number"}),e.jsx(c,{id:"business_registration_number",placeholder:"BRN123456789",value:s.business_registration_number,onChange:a=>t("business_registration_number",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"business_type",children:"Business Type"}),e.jsxs(N,{value:s.business_type,onValueChange:a=>t("business_type",a),children:[e.jsx(f,{children:e.jsx(C,{placeholder:"Select business type"})}),e.jsx(T,{children:F.map(a=>e.jsx(k,{value:a,children:a},a))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"business_description",children:"Business Description"}),e.jsx(u,{id:"business_description",placeholder:"Brief description of business activities",value:s.business_description,onChange:a=>t("business_description",a.target.value),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"registration_date",children:"Registration Date"}),e.jsx(c,{id:"registration_date",type:"date",value:s.registration_date,onChange:a=>t("registration_date",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"tax_office",children:"Tax Office"}),e.jsxs(N,{value:s.tax_office,onValueChange:a=>t("tax_office",a),children:[e.jsx(f,{children:e.jsx(C,{placeholder:"Select tax office"})}),e.jsx(T,{children:A.map(a=>e.jsx(k,{value:a,children:a},a))})]})]})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"VAT Registration"]}),e.jsx(p,{children:"Value Added Tax registration details"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"VAT Registered"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Is this taxpayer registered for VAT?"})]}),e.jsx(b,{checked:s.is_vat_registered,onCheckedChange:a=>t("is_vat_registered",a)})]}),s.is_vat_registered&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"vat_registration_number",children:"VAT Registration Number"}),e.jsx(c,{id:"vat_registration_number",placeholder:"VAT123456789",value:s.vat_registration_number,onChange:a=>t("vat_registration_number",a.target.value)})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Contact Information"]}),e.jsx(p,{children:"Primary contact details for the taxpayer"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"taxpayer_phone",children:"Primary Phone *"}),e.jsx(c,{id:"taxpayer_phone",placeholder:"+260 XXX XXX XXX",value:s.taxpayer_phone,onChange:a=>t("taxpayer_phone",a.target.value),className:n.taxpayer_phone?"border-red-500":""}),n.taxpayer_phone&&e.jsx("p",{className:"text-sm text-red-600",children:n.taxpayer_phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"taxpayer_email",children:"Primary Email *"}),e.jsx(c,{id:"taxpayer_email",type:"email",placeholder:"taxpayer@company.com",value:s.taxpayer_email,onChange:a=>t("taxpayer_email",a.target.value),className:n.taxpayer_email?"border-red-500":""}),n.taxpayer_email&&e.jsx("p",{className:"text-sm text-red-600",children:n.taxpayer_email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"contact_person_name",children:"Contact Person Name"}),e.jsx(c,{id:"contact_person_name",placeholder:"John Doe",value:s.contact_person_name,onChange:a=>t("contact_person_name",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"contact_person_phone",children:"Contact Person Phone"}),e.jsx(c,{id:"contact_person_phone",placeholder:"+260 XXX XXX XXX",value:s.contact_person_phone,onChange:a=>t("contact_person_phone",a.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"contact_person_email",children:"Contact Person Email"}),e.jsx(c,{id:"contact_person_email",type:"email",placeholder:"contact@company.com",value:s.contact_person_email,onChange:a=>t("contact_person_email",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"website",children:"Website"}),e.jsx(c,{id:"website",type:"url",placeholder:"https://www.company.com",value:s.website,onChange:a=>t("website",a.target.value)})]})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Address Information"]}),e.jsx(p,{children:"Physical and postal addresses"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"physical_address",children:"Physical Address *"}),e.jsx(u,{id:"physical_address",placeholder:"Street address, city, province",value:s.physical_address,onChange:a=>t("physical_address",a.target.value),className:n.taxpayer_address?"border-red-500":"",rows:3}),n.taxpayer_address&&e.jsx("p",{className:"text-sm text-red-600",children:n.taxpayer_address})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"postal_address",children:"Postal Address"}),e.jsx(u,{id:"postal_address",placeholder:"P.O. Box, city, postal code",value:s.postal_address,onChange:a=>t("postal_address",a.target.value),rows:3})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Banking Information"]}),e.jsx(p,{children:"Primary bank account details for tax payments"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bank_name",children:"Bank Name"}),e.jsx(c,{id:"bank_name",placeholder:"Bank of Zambia",value:s.bank_name,onChange:a=>t("bank_name",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bank_branch",children:"Bank Branch"}),e.jsx(c,{id:"bank_branch",placeholder:"Main Branch",value:s.bank_branch,onChange:a=>t("bank_branch",a.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bank_account_number",children:"Bank Account Number"}),e.jsx(c,{id:"bank_account_number",placeholder:"1234567890",value:s.bank_account_number,onChange:a=>t("bank_account_number",a.target.value)})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Taxpayer Status"]}),e.jsx(p,{children:"Current status and compliance information"})]}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Active Taxpayer"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Is this taxpayer currently active with ZRA?"})]}),e.jsx(b,{checked:s.is_active_taxpayer,onCheckedChange:a=>t("is_active_taxpayer",a)})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>P(),disabled:j,children:"Reset"}),e.jsxs(_,{type:"submit",disabled:j,children:[j?e.jsx(w,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(W,{className:"h-4 w-4 mr-2"}),"Save Taxpayer Information"]})]})]})})})]})}export{Ye as default};
