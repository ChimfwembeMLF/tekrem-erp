import{u as R,G as w,j as e,S as A}from"./app-BMIA6nir.js";import{A as k}from"./AppLayout-DbMk6clK.js";import{B as n}from"./createLucideIcon-Cg8jdX0w.js";import{I as D}from"./input-Bg5GDATO.js";import{L as c}from"./label-CM6YsqH1.js";import{T as E}from"./textarea-CP26afIU.js";import{C as h,a as j,b as u,c as f}from"./card-BAsSN-2Z.js";import{C as T}from"./checkbox-B8CiFAgv.js";import{u as L}from"./useTranslate-ER5gAOX6.js";import{S as z}from"./shield-DwKJ9Ble.js";import{K as B}from"./key-Qw2I2-NE.js";import{S as F}from"./save-D6UyxhH5.js";import{A as I}from"./arrow-left-UX2kDF52.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./x-C3KwZK3B.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";function Te({role:r,permissions:p}){L();const o=R(),{data:m,setData:a,put:g,processing:x,errors:t}=w({name:r.name,description:r.description,permissions:r.permissions}),N=s=>{s.preventDefault(),g(o("admin.roles.update",r.id))},y=(s,l)=>{l?a("permissions",[...m.permissions,s]):a("permissions",m.permissions.filter(i=>i!==s))},b=()=>{a("permissions",p.map(s=>s.name))},v=()=>{a("permissions",[])},C=p.reduce((s,l)=>{const i=l.name.split(".")[0]||"general";return s[i]||(s[i]=[]),s[i].push(l),s},{}),d=["admin","manager","staff","customer"].includes(r.name);return e.jsxs(k,{title:"Edit Role",renderHeader:()=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:o("admin.roles.index"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to Roles"]})}),e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:["Edit Role: ",r.name]})]}),children:[e.jsx(A,{title:`Edit Role: ${r.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-6xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs(h,{children:[e.jsx(j,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Role Information"]})}),e.jsxs(f,{className:"space-y-4",children:[d&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"System Role:"})," This is a system role. Changing the name or removing critical permissions may affect system functionality."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"name",children:"Role Name *"}),e.jsx(D,{id:"name",type:"text",value:m.name,onChange:s=>a("name",s.target.value),placeholder:"Enter role name",className:t.name?"border-red-500":"",disabled:d}),t.name&&e.jsx("p",{className:"text-sm text-red-500",children:t.name}),d&&e.jsx("p",{className:"text-xs text-gray-500",children:"System role names cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(E,{id:"description",value:m.description,onChange:s=>a("description",s.target.value),placeholder:"Describe the role's purpose and responsibilities",className:t.description?"border-red-500":"",rows:3}),t.description&&e.jsx("p",{className:"text-sm text-red-500",children:t.description})]})]})]})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Permission Assignment"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{type:"button",variant:"outline",size:"sm",onClick:b,children:"Select All"}),e.jsx(n,{type:"button",variant:"outline",size:"sm",onClick:v,children:"Deselect All"})]})]})}),e.jsxs(f,{children:[e.jsx("div",{className:"space-y-6",children:Object.entries(C).map(([s,l])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("h3",{className:"font-medium text-lg mb-3 capitalize",children:[s," Module"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(i=>e.jsxs("div",{className:"flex items-start space-x-2 p-2 border rounded",children:[e.jsx(T,{id:`permission-${i.id}`,checked:m.permissions.includes(i.name),onCheckedChange:S=>y(i.name,S)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(c,{htmlFor:`permission-${i.id}`,className:"text-sm",children:i.name}),i.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.description})]})]},i.id))})]},s))}),t.permissions&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:t.permissions})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(n,{type:"button",variant:"outline",asChild:!0,children:e.jsx("a",{href:o("admin.roles.index"),children:"Cancel"})}),e.jsxs(n,{type:"submit",disabled:x,children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),x?"Updating...":"Update Role"]})]})]})})})]})}export{Te as default};
