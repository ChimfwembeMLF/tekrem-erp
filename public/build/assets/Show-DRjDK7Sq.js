import{u as C,j as e,S,x as g,A as T}from"./app-BMIA6nir.js";import{A}from"./AppLayout-DbMk6clK.js";import{C as c,a as o,b as l,c as d,d as B}from"./card-BAsSN-2Z.js";import{B as i}from"./createLucideIcon-Cg8jdX0w.js";import{U as D,B as h}from"./x-C3KwZK3B.js";import{S as y}from"./separator-DnQonHW9.js";import{u as E}from"./useTranslate-ER5gAOX6.js";import{t as f}from"./index-Dj2TB_RL.js";import{A as F}from"./arrow-left-UX2kDF52.js";import{R as N}from"./refresh-cw-CkrxGXg9.js";import{S as P}from"./smartphone-BqGcJ2Wh.js";import{C as j}from"./copy-XqgUo3o3.js";import{F as R}from"./file-text-D25AipK4.js";import{E as $}from"./external-link-DiDOWbPw.js";import{C as I}from"./calendar-DTsvo4Hi.js";import{T as L}from"./triangle-alert-BWIpgUmg.js";import{A as U}from"./activity-BI-t7JT3.js";import{C as v}from"./circle-x-D-Fm_LhT.js";import{C as z}from"./circle-check-big-DCsv6rXk.js";import{C as M}from"./clock-BTinGqFV.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";function Le({transaction:s}){const{t:r}=E(),x=C(),b=()=>{T.post(x("finance.momo.check-status",s.id),{},{onSuccess:()=>{f.success(r("finance.momo.status_checked","Transaction status updated"))},onError:()=>{f.error(r("common.error_occurred","An error occurred"))}})},p=a=>{navigator.clipboard.writeText(a),f.success(r("common.copied","Copied to clipboard"))},_=a=>{const t={pending:{variant:"secondary",icon:M,color:"text-yellow-600"},processing:{variant:"secondary",icon:N,color:"text-blue-600"},completed:{variant:"default",icon:z,color:"text-green-600"},failed:{variant:"destructive",icon:v,color:"text-red-600"},cancelled:{variant:"outline",icon:v,color:"text-gray-600"}},m=t[a]||t.pending,w=m.icon;return e.jsxs(h,{variant:m.variant,className:"flex items-center gap-1",children:[e.jsx(w,{className:"h-3 w-3"}),r(`finance.momo.status.${a}`,a)]})},k=a=>{const t={payment:{variant:"default",color:"text-green-600"},payout:{variant:"secondary",color:"text-blue-600"},refund:{variant:"outline",color:"text-orange-600"}},m=t[a]||t.payment;return e.jsx(h,{variant:m.variant,children:r(`finance.momo.type.${a}`,a)})},u=(a,t="ZMW")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(a),n=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(A,{title:`${r("finance.momo.transaction","Transaction")} ${s.transaction_number}`,breadcrumbs:[{label:r("finance.title","Finance"),href:"/finance"},{label:r("finance.momo.title","Mobile Money"),href:"/finance/momo"},{label:s.transaction_number}],children:[e.jsx(S,{title:`${r("finance.momo.transaction","Transaction")} ${s.transaction_number}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(g,{href:x("finance.momo.index"),children:e.jsx(F,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:s.transaction_number}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.transaction_details","Transaction Details")})]})]}),e.jsx("div",{className:"flex gap-2",children:s.status==="pending"&&e.jsxs(i,{onClick:b,children:[e.jsx(N,{className:"h-4 w-4"}),r("finance.momo.check_status","Check Status")]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),r("finance.momo.overview","Overview")]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.status","Status")}),_(s.status)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.type","Type")}),k(s.type)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.provider","Provider")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-6 w-6 rounded bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-xs font-medium",children:s.provider.provider_code}),e.jsx("span",{className:"font-medium",children:s.provider.display_name})]})]}),e.jsx(y,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.amount","Amount")}),e.jsx("span",{className:"text-lg font-semibold",children:u(s.amount,s.currency)})]}),s.fee_amount&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.fee","Fee")}),e.jsx("span",{className:"font-medium",children:u(s.fee_amount,s.currency)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.phone_number","Phone Number")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:s.phone_number}),e.jsx(i,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>p(s.phone_number),children:e.jsx(j,{className:"h-3 w-3"})})]})]}),s.description&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 block mb-1",children:r("finance.momo.description","Description")}),e.jsx("p",{className:"text-sm",children:s.description})]})]})]}),e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),r("finance.momo.customer_info","Customer & Reference")]})}),e.jsxs(d,{className:"space-y-4",children:[s.customer_name&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.customer_name","Customer Name")}),e.jsx("span",{className:"font-medium",children:s.customer_name})]}),s.customer_email&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.customer_email","Customer Email")}),e.jsx("span",{className:"font-medium",children:s.customer_email})]}),s.invoice&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.invoice","Invoice")}),e.jsx(i,{variant:"link",className:"p-0 h-auto",asChild:!0,children:e.jsxs(g,{href:x("finance.invoices.show",s.invoice.id),children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),s.invoice.invoice_number,e.jsx($,{className:"h-3 w-3 ml-1"})]})})]}),e.jsx(y,{}),s.provider_transaction_id&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 block mb-1",children:r("finance.momo.provider_transaction_id","Provider Transaction ID")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:s.provider_transaction_id}),e.jsx(i,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>p(s.provider_transaction_id),children:e.jsx(j,{className:"h-3 w-3"})})]})]}),s.provider_reference&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 block mb-1",children:r("finance.momo.provider_reference","Provider Reference")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:s.provider_reference}),e.jsx(i,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>p(s.provider_reference),children:e.jsx(j,{className:"h-3 w-3"})})]})]})]})]}),e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),r("finance.momo.timeline","Timeline")]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.created","Created")}),e.jsx("span",{className:"text-sm",children:n(s.created_at)})]}),s.processed_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.processed","Processed")}),e.jsx("span",{className:"text-sm",children:n(s.processed_at)})]}),s.failed_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.failed","Failed")}),e.jsx("span",{className:"text-sm",children:n(s.failed_at)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.last_updated","Last Updated")}),e.jsx("span",{className:"text-sm",children:n(s.updated_at)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("finance.momo.initiated_by","Initiated By")}),e.jsx("span",{className:"text-sm font-medium",children:s.user.name})]}),s.error_message&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-red-600 dark:text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:r("finance.momo.error","Error")}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:s.error_message})]})]})})]})]}),s.webhooks.length>0&&e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),r("finance.momo.webhooks","Webhooks")]}),e.jsx(B,{children:r("finance.momo.webhooks_description","Provider webhook events for this transaction")})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:s.webhooks.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:a.event_type}),e.jsx("div",{className:"text-xs text-gray-500",children:n(a.created_at)})]}),e.jsx(h,{variant:a.status==="processed"?"default":"secondary",children:a.status})]},a.id))})})]})]})]})]})}export{Le as default};
