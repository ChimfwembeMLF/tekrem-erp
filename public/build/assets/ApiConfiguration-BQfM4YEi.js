import{u as V,r as w,G as B,j as e,S as D}from"./app-BMIA6nir.js";import{A as O}from"./AppLayout-DbMk6clK.js";import{B as u}from"./createLucideIcon-Cg8jdX0w.js";import{C as c,a as d,b as m,d as h,c as p}from"./card-BAsSN-2Z.js";import{I as n}from"./input-Bg5GDATO.js";import{L as i}from"./label-CM6YsqH1.js";import{S as o}from"./switch-_qD_kSA5.js";import{S as g,a as b,b as y,c as v,d as x}from"./select-B6KOX9nY.js";import{B as U}from"./x-C3KwZK3B.js";import{A as W,a as G}from"./alert-CNp8ZuHk.js";import{u as H}from"./useTranslate-ER5gAOX6.js";import{t as _}from"./index-Dj2TB_RL.js";import{S}from"./server-Baooc_-5.js";import{T as A}from"./test-tube-BGKhckqE.js";import{S as z}from"./shield-DwKJ9Ble.js";import{I as J}from"./info-CVuj-Sjk.js";import{T as I}from"./triangle-alert-BWIpgUmg.js";import{R as K}from"./refresh-cw-CkrxGXg9.js";import{L as P}from"./loader-circle-BUEefOfS.js";import{S as X}from"./save-D6UyxhH5.js";import{A as Z}from"./arrow-left-UX2kDF52.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function ss({configuration:a,supportedCurrencies:M,encryptionAlgorithms:F}){H();const N=V(),[$,Q]=w.useState(!1),[f,C]=w.useState(!1),{data:t,setData:r,put:L,processing:j,errors:l,reset:T}=B({global_timeout:a.global_timeout||30,max_retry_attempts:a.max_retry_attempts||3,retry_delay_seconds:a.retry_delay_seconds||5,enable_request_logging:a.enable_request_logging||!0,enable_response_logging:a.enable_response_logging||!0,log_sensitive_data:a.log_sensitive_data||!1,rate_limit_enabled:a.rate_limit_enabled||!0,rate_limit_requests_per_minute:a.rate_limit_requests_per_minute||60,health_check_interval_minutes:a.health_check_interval_minutes||15,auto_disable_unhealthy_providers:a.auto_disable_unhealthy_providers||!0,webhook_timeout_seconds:a.webhook_timeout_seconds||30,webhook_retry_attempts:a.webhook_retry_attempts||3,enable_sandbox_mode:a.enable_sandbox_mode||!1,sandbox_api_base_url:a.sandbox_api_base_url||"",production_api_base_url:a.production_api_base_url||"",default_currency:a.default_currency||"ZMW",enable_transaction_encryption:a.enable_transaction_encryption||!0,encryption_algorithm:a.encryption_algorithm||"AES-256-GCM",api_version:a.api_version||"v1"}),R=s=>{s.preventDefault(),L(N("settings.finance.momo.api.update"),{onSuccess:()=>{_.success("MoMo API configuration updated successfully")},onError:()=>{_.error("Failed to update MoMo API configuration")}})},q=async()=>{var s;C(!0);try{const k=await(await fetch(N("settings.finance.momo.api.test"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify(t)})).json();k.success?_.success("API connection test successful"):_.error(`API connection test failed: ${k.message}`)}catch{_.error("Failed to test API connection")}finally{C(!1)}};return e.jsxs(O,{title:"MoMo API Configuration",renderHeader:()=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"MoMo API Configuration"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(U,{variant:"outline",className:"text-orange-600 border-orange-600",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"Admin Only"]})})]}),children:[e.jsx(D,{title:"MoMo API Configuration"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Connection Settings"]}),e.jsx(h,{children:"Configure API connection parameters and timeouts"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"global_timeout",children:"Global Timeout (seconds)"}),e.jsx(n,{id:"global_timeout",type:"number",min:"5",max:"300",value:t.global_timeout,onChange:s=>r("global_timeout",parseInt(s.target.value)),className:l.global_timeout?"border-red-500":""}),l.global_timeout&&e.jsx("p",{className:"text-sm text-red-600",children:l.global_timeout})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"api_version",children:"API Version"}),e.jsxs(g,{value:t.api_version,onValueChange:s=>r("api_version",s),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select API version"})}),e.jsxs(v,{children:[e.jsx(x,{value:"v1",children:"Version 1.0"}),e.jsx(x,{value:"v2",children:"Version 2.0"}),e.jsx(x,{value:"v3",children:"Version 3.0"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"max_retry_attempts",children:"Max Retry Attempts"}),e.jsx(n,{id:"max_retry_attempts",type:"number",min:"0",max:"10",value:t.max_retry_attempts,onChange:s=>r("max_retry_attempts",parseInt(s.target.value)),className:l.max_retry_attempts?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"retry_delay_seconds",children:"Retry Delay (seconds)"}),e.jsx(n,{id:"retry_delay_seconds",type:"number",min:"1",max:"60",value:t.retry_delay_seconds,onChange:s=>r("retry_delay_seconds",parseInt(s.target.value)),className:l.retry_delay_seconds?"border-red-500":""})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Environment Settings"]}),e.jsx(h,{children:"Configure sandbox and production environment settings"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Sandbox Mode"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Use sandbox environment for testing"})]}),e.jsx(o,{checked:t.enable_sandbox_mode,onCheckedChange:s=>r("enable_sandbox_mode",s)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"sandbox_api_base_url",children:"Sandbox API Base URL"}),e.jsx(n,{id:"sandbox_api_base_url",type:"url",placeholder:"https://sandbox-api.momo.com",value:t.sandbox_api_base_url,onChange:s=>r("sandbox_api_base_url",s.target.value),className:l.sandbox_api_base_url?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"production_api_base_url",children:"Production API Base URL"}),e.jsx(n,{id:"production_api_base_url",type:"url",placeholder:"https://api.momo.com",value:t.production_api_base_url,onChange:s=>r("production_api_base_url",s.target.value),className:l.production_api_base_url?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"default_currency",children:"Default Currency"}),e.jsxs(g,{value:t.default_currency,onValueChange:s=>r("default_currency",s),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select default currency"})}),e.jsx(v,{children:M.map(s=>e.jsx(x,{value:s,children:s},s))})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Rate Limiting & Security"]}),e.jsx(h,{children:"Configure rate limiting and security settings"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Rate Limiting"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Limit API requests per minute"})]}),e.jsx(o,{checked:t.rate_limit_enabled,onCheckedChange:s=>r("rate_limit_enabled",s)})]}),t.rate_limit_enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"rate_limit_requests_per_minute",children:"Requests per Minute"}),e.jsx(n,{id:"rate_limit_requests_per_minute",type:"number",min:"1",max:"1000",value:t.rate_limit_requests_per_minute,onChange:s=>r("rate_limit_requests_per_minute",parseInt(s.target.value))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Transaction Encryption"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Encrypt sensitive transaction data"})]}),e.jsx(o,{checked:t.enable_transaction_encryption,onCheckedChange:s=>r("enable_transaction_encryption",s)})]}),t.enable_transaction_encryption&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"encryption_algorithm",children:"Encryption Algorithm"}),e.jsxs(g,{value:t.encryption_algorithm,onValueChange:s=>r("encryption_algorithm",s),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select encryption algorithm"})}),e.jsx(v,{children:F.map(s=>e.jsx(x,{value:s,children:s},s))})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Logging & Monitoring"]}),e.jsx(h,{children:"Configure logging and monitoring settings"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Request Logging"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Log API requests"})]}),e.jsx(o,{checked:t.enable_request_logging,onCheckedChange:s=>r("enable_request_logging",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Response Logging"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Log API responses"})]}),e.jsx(o,{checked:t.enable_response_logging,onCheckedChange:s=>r("enable_response_logging",s)})]})]}),e.jsxs(W,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Log Sensitive Data"}),e.jsx("p",{className:"text-sm mt-1",children:"Include sensitive data in logs (not recommended for production)"})]}),e.jsx(o,{checked:t.log_sensitive_data,onCheckedChange:s=>r("log_sensitive_data",s)})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"health_check_interval_minutes",children:"Health Check Interval (minutes)"}),e.jsx(n,{id:"health_check_interval_minutes",type:"number",min:"5",max:"1440",value:t.health_check_interval_minutes,onChange:s=>r("health_check_interval_minutes",parseInt(s.target.value))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Auto-disable Unhealthy Providers"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Automatically disable failing providers"})]}),e.jsx(o,{checked:t.auto_disable_unhealthy_providers,onCheckedChange:s=>r("auto_disable_unhealthy_providers",s)})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Webhook Configuration"]}),e.jsx(h,{children:"Configure webhook timeout and retry settings"})]}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"webhook_timeout_seconds",children:"Webhook Timeout (seconds)"}),e.jsx(n,{id:"webhook_timeout_seconds",type:"number",min:"5",max:"300",value:t.webhook_timeout_seconds,onChange:s=>r("webhook_timeout_seconds",parseInt(s.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"webhook_retry_attempts",children:"Webhook Retry Attempts"}),e.jsx(n,{id:"webhook_retry_attempts",type:"number",min:"0",max:"10",value:t.webhook_retry_attempts,onChange:s=>r("webhook_retry_attempts",parseInt(s.target.value))})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(u,{type:"button",variant:"outline",onClick:q,disabled:f,children:[f?e.jsx(P,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(A,{className:"h-4 w-4 mr-2"}),"Test Connection"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>T(),disabled:j,children:"Reset"}),e.jsxs(u,{type:"submit",disabled:j,children:[j?e.jsx(P,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(X,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})]})]})]})})})]})}export{ss as default};
