import{u as I,r as R,G as H,j as e,S as $,A as G}from"./app-BMIA6nir.js";import{A as O}from"./AppLayout-DbMk6clK.js";import{C as m,a as y,b as v,d as A,c as h}from"./card-BAsSN-2Z.js";import{B as x}from"./createLucideIcon-Cg8jdX0w.js";import{I as F}from"./input-Bg5GDATO.js";import{L as o}from"./label-CM6YsqH1.js";import{T as X}from"./textarea-CP26afIU.js";import{S as N,a as _,b as C,c as b,d as c}from"./select-B6KOX9nY.js";import{B as u,U as q,X as J}from"./x-C3KwZK3B.js";import{A as K,a as Q}from"./alert-CNp8ZuHk.js";import{u as W}from"./useTranslate-ER5gAOX6.js";import{A as Y}from"./arrow-left-UX2kDF52.js";import{U as Z}from"./upload-DoO0wQwa.js";import{B as ee}from"./building-DIkCZBBP.js";import{S as se}from"./save-D6UyxhH5.js";import{C as te}from"./circle-alert-DVIk47WR.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function ts({categories:S,users:D,clients:T,leads:B,requesterType:U,requesterId:L}){const{t}=W(),j=I(),[g,w]=R.useState([]),{data:i,setData:n,post:re,processing:k,errors:a,reset:M}=H({title:"",description:"",priority:"medium",category_id:"",assigned_to:"",requester_type:U||"",requester_id:L||"",tags:[],attachments:[]}),E=s=>{s.preventDefault();const r=new FormData;Object.keys(i).forEach(l=>{l==="attachments"?g.forEach((d,f)=>{r.append(`attachments[${f}]`,d)}):l==="tags"?i.tags.forEach((d,f)=>{r.append(`tags[${f}]`,d)}):r.append(l,i[l])}),G.post(j("support.tickets.store"),r,{forceFormData:!0,onSuccess:()=>M()})},P=s=>{n("category_id",s);const r=S.find(l=>l.id.toString()===s);r&&n("priority",r.default_priority)},z=s=>{const r=Array.from(s.target.files||[]);w(l=>[...l,...r])},V=s=>{w(r=>r.filter((l,d)=>d!==s))},p=s=>{switch(s){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(O,{children:[e.jsx($,{title:t("support.create_ticket","Create Support Ticket")}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:j("support.tickets.index"),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),t("common.back","Back")]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t("support.create_ticket","Create Support Ticket")}),e.jsx("p",{className:"text-muted-foreground",children:t("support.create_ticket_description","Create a new support ticket for assistance")})]})]})}),e.jsx("form",{onSubmit:E,className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(m,{children:[e.jsxs(y,{children:[e.jsx(v,{children:t("support.ticket_details","Ticket Details")}),e.jsx(A,{children:t("support.ticket_details_description","Provide details about your support request")})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"title",children:[t("support.title","Title")," *"]}),e.jsx(F,{id:"title",value:i.title,onChange:s=>n("title",s.target.value),placeholder:t("support.title_placeholder","Brief description of the issue"),className:a.title?"border-red-500":""}),a.title&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.title})]}),e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"description",children:[t("support.description","Description")," *"]}),e.jsx(X,{id:"description",value:i.description,onChange:s=>n("description",s.target.value),placeholder:t("support.description_placeholder","Detailed description of the issue, steps to reproduce, etc."),rows:6,className:a.description?"border-red-500":""}),a.description&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.description})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"category",children:t("support.category","Category")}),e.jsxs(N,{value:i.category_id,onValueChange:P,children:[e.jsx(_,{className:a.category_id?"border-red-500":"",children:e.jsx(C,{placeholder:t("support.select_category","Select category")})}),e.jsx(b,{children:S.map(s=>e.jsx(c,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),s.name]})},s.id))})]}),a.category_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.category_id})]}),e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"priority",children:[t("support.priority","Priority")," *"]}),e.jsxs(N,{value:i.priority,onValueChange:s=>n("priority",s),children:[e.jsx(_,{className:a.priority?"border-red-500":"",children:e.jsx(C,{})}),e.jsxs(b,{children:[e.jsx(c,{value:"low",children:e.jsx(u,{className:p("low"),variant:"secondary",children:t("support.priority_low","Low")})}),e.jsx(c,{value:"medium",children:e.jsx(u,{className:p("medium"),variant:"secondary",children:t("support.priority_medium","Medium")})}),e.jsx(c,{value:"high",children:e.jsx(u,{className:p("high"),variant:"secondary",children:t("support.priority_high","High")})}),e.jsx(c,{value:"urgent",children:e.jsx(u,{className:p("urgent"),variant:"secondary",children:t("support.priority_urgent","Urgent")})})]})]}),a.priority&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.priority})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"assigned_to",children:t("support.assign_to","Assign To")}),e.jsxs(N,{value:i.assigned_to,onValueChange:s=>n("assigned_to",s),children:[e.jsx(_,{children:e.jsx(C,{placeholder:t("support.select_assignee","Select assignee (optional)")})}),e.jsxs(b,{children:[e.jsx(c,{value:"empty",children:t("support.unassigned","Unassigned")}),D.map(s=>e.jsx(c,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),s.name]})},s.id))]})]})]})]})]}),e.jsxs(m,{children:[e.jsxs(y,{children:[e.jsx(v,{children:t("support.attachments","Attachments")}),e.jsx(A,{children:t("support.attachments_description","Upload files to help explain the issue")})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"attachments",children:t("support.upload_files","Upload Files")}),e.jsx(F,{id:"attachments",type:"file",multiple:!0,onChange:z,accept:".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.txt,.zip"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("support.file_types","Supported: Images, PDFs, Documents, Archives (Max 10MB each)")})]}),g.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:t("support.selected_files","Selected Files")}),g.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:s.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(s.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>V(r),children:e.jsx(J,{className:"h-4 w-4"})})]},r))]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[i.requester_type&&i.requester_id&&e.jsxs(m,{children:[e.jsx(y,{children:e.jsx(v,{children:t("support.requester","Requester")})}),e.jsxs(h,{children:[i.requester_type==="App\\Models\\Client"&&e.jsx("div",{className:"space-y-2",children:(()=>{const s=T.find(r=>r.id.toString()===i.requester_id.toString());return s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]}):null})()}),i.requester_type==="App\\Models\\Lead"&&e.jsx("div",{className:"space-y-2",children:(()=>{const s=B.find(r=>r.id.toString()===i.requester_id.toString());return s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]}):null})()})]})]}),e.jsx(m,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(x,{type:"submit",className:"w-full",disabled:k,children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),k?t("common.creating","Creating..."):t("support.create_ticket","Create Ticket")]}),e.jsx(x,{type:"button",variant:"outline",className:"w-full",asChild:!0,children:e.jsx("a",{href:j("support.tickets.index"),children:t("common.cancel","Cancel")})})]})})}),e.jsxs(K,{children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx(Q,{children:t("support.create_help","Provide as much detail as possible to help us resolve your issue quickly.")})]})]})]})})]})]})}export{ts as default};
