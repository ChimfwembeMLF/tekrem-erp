import{u as M,r as i,j as e,S as V,x as o,A as f}from"./app-BMIA6nir.js";import{A as O,a as q}from"./AppLayout-DbMk6clK.js";import{C as F,a as G,b as J,d as K,c as Q}from"./card-BAsSN-2Z.js";import{B as r}from"./createLucideIcon-Cg8jdX0w.js";import{I as W}from"./input-Bg5GDATO.js";import{B as _}from"./x-C3KwZK3B.js";import{P as X}from"./progress-BgfGBUAj.js";import{S as b,a as C,b as A,c as B,d as x}from"./select-B6KOX9nY.js";import{u as Y}from"./useTranslate-ER5gAOX6.js";import{t as P}from"./index-Dj2TB_RL.js";import{P as D}from"./plus-BjPf5uI-.js";import{S as Z}from"./square-pen-CReBrXbl.js";import{T as $}from"./trash-2-DZc0jDKK.js";import{T as ee}from"./triangle-alert-BWIpgUmg.js";import{T as te}from"./trending-up-00s2SIxN.js";import{T as se}from"./trending-down-nOrQI_re.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function tt({budgets:n,filters:l,statuses:m,periodTypes:d,categories:ae,accounts:re}){var w;const{t:s}=Y(),c=M(),[j,g]=i.useState(l.search||""),[u,N]=i.useState(l.status||"all"),[h,y]=i.useState(l.period_type||"all"),[S,T]=i.useState(l.category||"all"),[v,I]=i.useState(l.account||"all"),U=()=>{f.get(c("finance.budgets.index"),{search:j,status:u==="all"?"":u,period_type:h==="all"?"":h,category:S==="all"?"":S,account:v==="all"?"":v},{preserveState:!0,replace:!0})},L=()=>{g(""),N("all"),y("all"),T("all"),I("all"),f.get(c("finance.budgets.index"),{},{preserveState:!0,replace:!0})},z=t=>{confirm(s("common.confirm_delete","Are you sure you want to delete this item?"))&&f.delete(c("finance.budgets.destroy",t),{onSuccess:()=>{P.success(s("finance.budget_deleted","Budget deleted successfully"))},onError:()=>{P.error(s("common.error_occurred","An error occurred"))}})},p=(t,a="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(t),E=t=>{switch(t){case"active":return"bg-green-100 text-green-800";case"exceeded":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},R=(t,a)=>a>0?Math.round(t/a*100):0,k=t=>t>=100?"bg-red-500":t>=80?"bg-yellow-500":"bg-green-500",H=t=>t>=100?e.jsx(ee,{className:"h-4 w-4 text-red-600"}):t>=80?e.jsx(te,{className:"h-4 w-4 text-yellow-600"}):e.jsx(se,{className:"h-4 w-4 text-green-600"});return e.jsxs(O,{title:s("finance.budgets","Budgets"),children:[e.jsx(V,{title:s("finance.budgets","Budgets")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(F,{children:[e.jsxs(G,{className:"flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx(J,{children:s("finance.budgets","Budgets")}),e.jsx(K,{children:s("finance.budgets_description","Create and monitor your financial budgets")})]}),e.jsx(o,{href:c("finance.budgets.create"),children:e.jsxs(r,{children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),s("finance.create_budget","Create Budget")]})})]}),e.jsxs(Q,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mb-4 gap-2",children:[e.jsxs("form",{onSubmit:t=>{t.preventDefault(),U()},className:"flex gap-2 flex-1",children:[e.jsx(W,{type:"text",placeholder:s("finance.search_budgets","Search budgets..."),value:j,onChange:t=>g(t.target.value),className:"max-w-sm"}),e.jsx(r,{type:"submit",variant:"secondary",children:s("common.search","Search")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{value:u,onValueChange:N,children:[e.jsx(C,{className:"w-40",children:e.jsx(A,{placeholder:s("common.all_statuses","All statuses")})}),e.jsxs(B,{children:[e.jsx(x,{value:"all",children:s("common.all_statuses","All statuses")}),m&&Object.entries(m).map(([t,a])=>e.jsx(x,{value:t,children:a},t))]})]}),e.jsxs(b,{value:h,onValueChange:y,children:[e.jsx(C,{className:"w-40",children:e.jsx(A,{placeholder:s("common.all_periods","All periods")})}),e.jsxs(B,{children:[e.jsx(x,{value:"all",children:s("common.all_periods","All periods")}),d&&Object.entries(d).map(([t,a])=>e.jsx(x,{value:t,children:a},t))]})]}),e.jsx(r,{variant:"outline",onClick:L,children:s("common.reset","Reset")})]})]}),n.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:s("finance.no_budgets","No budgets found")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:s("finance.create_first_budget_desc","Get started by creating your first budget.")}),e.jsx(o,{href:c("finance.budgets.create"),children:e.jsxs(r,{children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),s("finance.create_budget","Create Budget")]})})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:s("finance.budget_name","Budget Name")}),e.jsx("th",{className:"text-left p-2",children:s("finance.category","Category")}),e.jsx("th",{className:"text-left p-2",children:s("finance.period","Period")}),e.jsx("th",{className:"text-left p-2",children:s("finance.budget_amount","Budget")}),e.jsx("th",{className:"text-left p-2",children:s("finance.spent","Spent")}),e.jsx("th",{className:"text-left p-2",children:s("finance.usage","Usage")}),e.jsx("th",{className:"text-left p-2",children:s("common.status","Status")}),e.jsx("th",{className:"text-left p-2",children:s("common.actions","Actions")})]})}),e.jsx("tbody",{children:n.data.map(t=>{const a=R(t.spent_amount,t.amount);return e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-2",children:e.jsxs("div",{children:[e.jsx(o,{href:c("finance.budgets.show",t.id),className:"font-medium text-blue-600 hover:underline",children:t.name}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.description})]})}),e.jsx("td",{className:"p-2",children:t.category?e.jsx(_,{variant:"outline",children:t.category.name}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:d&&d[t.period_type]||t.period_type}),e.jsxs("p",{className:"text-muted-foreground",children:[new Date(t.start_date).toLocaleDateString()," - ",new Date(t.end_date).toLocaleDateString()]})]})}),e.jsx("td",{className:"p-2 font-medium",children:p(t.amount,t.account.currency)}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:p(t.spent_amount,t.account.currency)}),e.jsxs("p",{className:"text-muted-foreground",children:[p(t.remaining_amount,t.account.currency)," remaining"]})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[H(a),e.jsxs("span",{className:"text-sm font-medium",children:[a,"%"]})]}),e.jsx(X,{value:a,className:"h-2",style:{"--progress-background":k(a)}})]})}),e.jsx("td",{className:"p-2",children:e.jsx(_,{className:E(t.status),variant:"secondary",children:m&&m[t.status]||t.status})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{href:c("finance.budgets.edit",t.id),children:e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),s("common.edit","Edit")]})}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>z(t.id),className:"text-red-600",children:[e.jsx($,{className:"h-4 w-4 mr-1"}),s("common.delete","Delete")]})]})})]},t.id)})})]})}),n.last_page>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",n.from," to ",n.to," of ",n.total," budgets"]}),e.jsx("div",{className:"flex gap-1",children:(w=n.links)==null?void 0:w.map((t,a)=>t.url===null?e.jsx(r,{variant:"outline",size:"sm",disabled:!0,dangerouslySetInnerHTML:{__html:t.label}},a):e.jsx(o,{href:t.url,children:e.jsx(r,{variant:t.active?"default":"outline",size:"sm",dangerouslySetInnerHTML:{__html:t.label}})},a))})]})]})]})})})]})}export{tt as default};
