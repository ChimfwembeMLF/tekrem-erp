import{u as N,j as e,S as w,x as d,A as n}from"./app-BMIA6nir.js";import{C as S}from"./CustomerLayout-7LFTkDxI.js";import{C,a as y,b,d as D,c as A}from"./card-BAsSN-2Z.js";import{B as _}from"./x-C3KwZK3B.js";import{B as a}from"./createLucideIcon-Cg8jdX0w.js";import{I as F}from"./input-Bg5GDATO.js";import{S as I,a as B,b as E,c as V,d as c}from"./select-B6KOX9nY.js";import{A as z}from"./arrow-left-UX2kDF52.js";import{S as T}from"./search-_p1CX5vB.js";import{E as L}from"./eye-DdivFxyT.js";import{D as Q}from"./download-CNZP3fGS.js";import{F as o}from"./file-text-D25AipK4.js";import{C as k}from"./circle-alert-DVIk47WR.js";import{C as M}from"./circle-x-D-Fm_LhT.js";import{C as R}from"./clock-BTinGqFV.js";import{C as U}from"./circle-check-big-DCsv6rXk.js";import"./avatar-DdiG0YBt.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";import"./NotificationComponent-CHA3vjZG.js";import"./index-BN56TOeV.js";import"./index-BeGDJhOY.js";import"./index-DgfI6AGt.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";import"./sheet-1SUjjT9Y.js";import"./users-3SuyoAg3.js";import"./log-out-B525vUfE.js";import"./message-square-32k9udjC.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";function Ne({quotations:t,filters:i}){const r=N(),x=s=>{s.preventDefault();const g=new FormData(s.currentTarget).get("search");n.get(r("customer.finance.quotations"),{...i,search:g||void 0},{preserveState:!0,replace:!0})},u=s=>{n.get(r("customer.finance.quotations"),{...i,status:s==="all"?void 0:s},{preserveState:!0,replace:!0})},h=s=>{switch(s){case"accepted":return e.jsx(U,{className:"h-4 w-4"});case"pending":return e.jsx(R,{className:"h-4 w-4"});case"rejected":return e.jsx(M,{className:"h-4 w-4"});case"expired":return e.jsx(k,{className:"h-4 w-4"});default:return e.jsx(o,{className:"h-4 w-4"})}},p=s=>{switch(s){case"accepted":return"secondary";case"pending":return"default";case"rejected":return"destructive";case"expired":return"outline";default:return"outline"}},j=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),f=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),m=(s,l)=>l==="pending"&&new Date(s)<new Date,v=s=>{n.post(r("customer.finance.quotations.accept",s),{},{preserveScroll:!0})};return e.jsxs(S,{children:[e.jsx(w,{title:"My Quotations"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(d,{href:r("customer.finance.index"),children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Back to Finance"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Quotations"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage your quotation requests"})]})]})}),e.jsxs(C,{children:[e.jsxs(y,{children:[e.jsx(b,{children:"All Quotations"}),e.jsx(D,{children:"Complete list of your quotations"})]}),e.jsxs(A,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("form",{onSubmit:x,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(F,{name:"search",placeholder:"Search quotations...",defaultValue:i.search||"",className:"pl-10"})]})}),e.jsxs(I,{value:i.status||"all",onValueChange:u,children:[e.jsx(B,{className:"w-[180px]",children:e.jsx(E,{placeholder:"Filter by status"})}),e.jsxs(V,{children:[e.jsx(c,{value:"all",children:"All Statuses"}),e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"accepted",children:"Accepted"}),e.jsx(c,{value:"rejected",children:"Rejected"}),e.jsx(c,{value:"expired",children:"Expired"})]})]})]}),e.jsx("div",{className:"space-y-4",children:t.data.length>0?t.data.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-secondary rounded-lg",children:h(s.status)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.quotation_number}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Valid until: ",f(s.valid_until),m(s.valid_until,s.status)&&e.jsx("span",{className:"text-destructive ml-2",children:"(Expired)"})]}),s.description&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:j(s.total_amount)}),e.jsx(_,{variant:p(s.status),children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="pending"&&!m(s.valid_until,s.status)&&e.jsx(a,{size:"sm",onClick:()=>v(s.id),children:"Accept"}),e.jsx(d,{href:r("customer.finance.quotations.show",s.id),children:e.jsx(a,{variant:"outline",size:"sm",children:e.jsx(L,{className:"h-4 w-4"})})}),e.jsx(d,{href:r("customer.finance.quotations.download",s.id),children:e.jsx(a,{variant:"outline",size:"sm",children:e.jsx(Q,{className:"h-4 w-4"})})})]})]})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(o,{className:"mx-auto h-8 w-8 mb-2"}),e.jsx("p",{children:"No quotations found"})]})}),t.data.length>0&&t.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",t.from," to ",t.to," of ",t.total," quotations"]}),e.jsx("div",{className:"flex items-center space-x-2",children:t.links.map((s,l)=>e.jsx(a,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&n.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},l))})]})]})]})]})]})}export{Ne as default};
