import{u as $,r as f,j as e,S as k,x as i,A as y}from"./app-BMIA6nir.js";import{u as E,A as z}from"./AppLayout-DbMk6clK.js";import{C as c,a as n,b as o,c as d,d as H}from"./card-BAsSN-2Z.js";import{B as l}from"./createLucideIcon-Cg8jdX0w.js";import{I as L}from"./input-Bg5GDATO.js";import{B as b}from"./x-C3KwZK3B.js";import{P as O}from"./progress-BgfGBUAj.js";import{S as R,a as U,b as V,c as q,d as m}from"./select-B6KOX9nY.js";import{T as w}from"./target-DIhftedx.js";import{C as F}from"./circle-check-big-DCsv6rXk.js";import{C as G}from"./clock-BTinGqFV.js";import{C as S}from"./calendar-DTsvo4Hi.js";import{S as J}from"./search-_p1CX5vB.js";import{U as K}from"./users-3SuyoAg3.js";import{E as Q}from"./eye-DdivFxyT.js";import{S as W}from"./square-pen-CReBrXbl.js";import{T as X}from"./trash-2-DZc0jDKK.js";import{P as C}from"./plus-BjPf5uI-.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./useTranslate-ER5gAOX6.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function Ye({auth:Y,project:t,milestones:r,filters:p}){const a=$(),{hasPermission:x}=E(),[N,P]=f.useState(p.search||""),[u,M]=f.useState(p.status||"all"),[v,Z]=f.useState(p.priority||"all"),A=s=>{s.preventDefault(),y.get(a("projects.milestones.index",t.id),{search:N||void 0,status:u!=="all"?u:void 0,priority:v!=="all"?v:void 0},{preserveState:!0,replace:!0})},B=s=>{confirm(`Are you sure you want to delete the milestone "${s.name}"?`)&&y.delete(a("projects.milestones.destroy",[t.id,s.id]))},D=s=>{switch(s){case"pending":return"bg-gray-100 text-gray-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=s=>{switch(s){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},I=s=>s?new Date(s).toLocaleDateString():"No due date",j=r.data.filter(s=>s.status==="completed").length,h=r.data.length,g=r.data.filter(s=>s.status==="overdue").length;return e.jsxs(z,{title:`${t.name} - Milestones`,renderHeader:()=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:[t.name," - Milestones"]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:[j," of ",h," completed"]}),g>0&&e.jsxs("span",{className:"text-red-600",children:[g," overdue"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{href:a("projects.show",t.id),children:e.jsx(l,{variant:"outline",children:"Back to Project"})}),x("projects.milestones.create")&&e.jsx(i,{href:a("projects.milestones.create",t.id),children:e.jsxs(l,{children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})})]})]}),children:[e.jsx(k,{title:`${t.name} - Milestones`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Milestones"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold",children:h})})]}),e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Completed"}),e.jsx(F,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h>0?Math.round(j/h*100):0,"% complete"]})]})]}),e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.data.filter(s=>s.status==="in-progress").length})})]}),e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:g})})]})]}),e.jsxs(c,{children:[e.jsx(n,{className:"flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0",children:e.jsxs("div",{children:[e.jsx(o,{children:"Project Milestones"}),e.jsxs(H,{children:["Manage milestones for ",t.name]})]})}),e.jsxs(d,{children:[e.jsx("form",{onSubmit:A,className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(L,{type:"text",placeholder:"Search milestones...",value:N,onChange:s=>P(s.target.value),className:"w-full"})}),e.jsxs(R,{value:u,onValueChange:M,children:[e.jsx(U,{children:e.jsx(V,{placeholder:"Status"})}),e.jsxs(q,{children:[e.jsx(m,{value:"all",children:"All Status"}),e.jsx(m,{value:"pending",children:"Pending"}),e.jsx(m,{value:"in-progress",children:"In Progress"}),e.jsx(m,{value:"completed",children:"Completed"}),e.jsx(m,{value:"overdue",children:"Overdue"})]})]}),e.jsxs(l,{type:"submit",className:"w-full",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Search"]})]})}),e.jsx("div",{className:"space-y-4",children:r.data.length>0?r.data.map(s=>e.jsx(c,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(i,{href:a("projects.milestones.show",[t.id,s.id]),className:"text-lg font-semibold text-blue-600 hover:underline",children:s.name}),e.jsx(b,{variant:"outline",className:D(s.status),children:s.status}),e.jsx(b,{variant:"outline",className:T(s.priority),children:s.priority})]}),s.description&&e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"%"]})]}),e.jsx(O,{value:s.progress,className:"h-2"})]}),s.due_date&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Due: ",I(s.due_date)]})]}),s.assignee&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Assigned to: ",s.assignee.name]})]})]}),s.dependencies&&s.dependencies.length>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Dependencies:"})," ",s.dependencies.length," milestone(s)"]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(i,{href:a("projects.milestones.show",[t.id,s.id]),children:e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(Q,{className:"h-4 w-4"})})}),x("projects.milestones.edit")&&e.jsx(i,{href:a("projects.milestones.edit",[t.id,s.id]),children:e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(W,{className:"h-4 w-4"})})}),x("projects.milestones.delete")&&e.jsx(l,{variant:"destructive",size:"sm",onClick:()=>B(s),children:e.jsx(X,{className:"h-4 w-4"})})]})]})})},s.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No milestones found."}),x("projects.milestones.create")&&e.jsx(i,{href:a("projects.milestones.create",t.id),className:"mt-4 inline-block",children:e.jsxs(l,{children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Create First Milestone"]})})]})}),r.data.length>0&&r.last_page>1&&e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",r.from," to ",r.to," of ",r.total," results"]}),e.jsx("div",{className:"flex gap-2",children:r.links.map((s,_)=>e.jsx(i,{href:s.url||"#",className:`px-3 py-1 rounded ${s.active?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} ${s.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},_))})]})]})]})]})})]})}export{Ye as default};
