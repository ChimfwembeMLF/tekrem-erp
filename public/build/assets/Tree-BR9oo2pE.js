import{u as W,r as l,j as e,S as X,x as c,A as h}from"./app-BMIA6nir.js";import{A as Y}from"./AppLayout-DbMk6clK.js";import{C as _,a as k,b as E,c as D,d as Z}from"./card-BAsSN-2Z.js";import{B as i}from"./createLucideIcon-Cg8jdX0w.js";import{I as ee}from"./input-Bg5GDATO.js";import{B as o}from"./x-C3KwZK3B.js";import{S as B,a as I,b as L,c as U,d}from"./select-B6KOX9nY.js";import{e as se,D as re,a as ae,b as te,c as m}from"./NotificationComponent-CHA3vjZG.js";import{u as ie}from"./useTranslate-ER5gAOX6.js";import{t as x}from"./index-Dj2TB_RL.js";import{A as ce}from"./arrow-left-UX2kDF52.js";import{L as le}from"./list-4SH12gn-.js";import{P as V}from"./plus-BjPf5uI-.js";import{S as ne}from"./search-_p1CX5vB.js";import{F as oe}from"./funnel-v8IwREza.js";import{C as de}from"./chevron-down-CrO8JO_i.js";import{E as me}from"./ellipsis-DJ3pNpl6.js";import{E as he}from"./eye-DdivFxyT.js";import{S as xe}from"./square-pen-CReBrXbl.js";import{T as pe}from"./trash-2-DZc0jDKK.js";import{B as F,a as ue}from"./building-2-8ZvaHfzA.js";import{T as R}from"./trending-down-nOrQI_re.js";import{T as je}from"./trending-up-00s2SIxN.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./bell-5VRgJnzP.js";function gs({accountTree:p,categories:M,types:P,filters:n}){const{t:r}=ie(),t=W(),[u,j]=l.useState(n.search||""),[f,g]=l.useState(n.category||""),[N,v]=l.useState(n.type||""),[y,w]=l.useState(n.show_inactive||!1),[C,q]=l.useState(new Set),b=()=>{h.get(t("finance.chart-of-accounts.tree"),{search:u,category:f,type:N,show_inactive:y},{preserveState:!0,preserveScroll:!0})},H=()=>{j(""),g(""),v(""),w(!1),h.get(t("finance.chart-of-accounts.tree"))},$=s=>{if(s.is_system_account){x.error(r("Cannot delete system accounts"));return}confirm(r("Are you sure you want to delete this account?"))&&h.delete(t("finance.chart-of-accounts.destroy",s.id),{onSuccess:()=>{x.success(r("Account deleted successfully"))},onError:a=>{x.error(a.error||r("Failed to delete account"))}})},z=s=>{const a=new Set(C);a.has(s)?a.delete(s):a.add(s),q(a)},K=s=>{switch(s){case"assets":return e.jsx(F,{className:"h-4 w-4"});case"liabilities":return e.jsx(R,{className:"h-4 w-4"});case"equity":return e.jsx(ue,{className:"h-4 w-4"});case"income":return e.jsx(je,{className:"h-4 w-4"});case"expenses":return e.jsx(R,{className:"h-4 w-4"});default:return e.jsx(F,{className:"h-4 w-4"})}},O=s=>{switch(s){case"assets":return"bg-blue-100 text-blue-800";case"liabilities":return"bg-red-100 text-red-800";case"equity":return"bg-purple-100 text-purple-800";case"income":return"bg-green-100 text-green-800";case"expenses":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},G=(s,a="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(s),S=(s,a=0)=>{const A=s.children&&s.children.length>0,T=C.has(s.id),J=a*24;return e.jsxs("div",{className:"border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"flex items-center py-3 px-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center flex-1",style:{paddingLeft:`${J}px`},children:[A?e.jsx(i,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 mr-2",onClick:()=>z(s.id),children:T?e.jsx(de,{className:"h-4 w-4"}):e.jsx(se,{className:"h-4 w-4"})}):e.jsx("div",{className:"w-8 mr-2"}),e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[K(s.account_category),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(o,{variant:"outline",className:"text-xs",children:s.account_code})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r(s.type.charAt(0).toUpperCase()+s.type.slice(1)),s.account_subcategory&&` â€¢ ${s.account_subcategory}`]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 ml-auto",children:[e.jsx(o,{variant:"secondary",className:O(s.account_category),children:r(s.account_category.charAt(0).toUpperCase()+s.account_category.slice(1))}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`font-medium ${s.balance>=0?"text-green-600":"text-red-600"}`,children:G(s.balance)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r(s.normal_balance.charAt(0).toUpperCase()+s.normal_balance.slice(1))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:s.is_active?"default":"secondary",children:s.is_active?r("Active"):r("Inactive")}),s.is_system_account&&e.jsx(o,{variant:"outline",className:"text-xs",children:r("System")})]}),e.jsxs(re,{children:[e.jsx(ae,{asChild:!0,children:e.jsx(i,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsxs(te,{align:"end",children:[e.jsx(m,{asChild:!0,children:e.jsxs(c,{href:t("finance.chart-of-accounts.show",s.id),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),r("View")]})}),e.jsx(m,{asChild:!0,children:e.jsxs(c,{href:t("finance.chart-of-accounts.edit",s.id),children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),r("Edit")]})}),e.jsx(m,{asChild:!0,children:e.jsxs(c,{href:t("finance.chart-of-accounts.create",{parent:s.id}),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),r("Add Child")]})}),!s.is_system_account&&e.jsxs(m,{onClick:()=>$(s),className:"text-red-600",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),r("Delete")]})]})]})]})]})]})}),A&&T&&e.jsx("div",{children:s.children.map(Q=>S(Q,a+1))})]},s.id)};return e.jsxs(Y,{children:[e.jsx(X,{title:r("Chart of Accounts - Tree View")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(c,{href:t("finance.chart-of-accounts.index"),children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),r("Back to List")]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:r("Chart of Accounts - Tree View")}),e.jsx("p",{className:"text-muted-foreground",children:r("Hierarchical view of your chart of accounts structure")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{asChild:!0,variant:"outline",children:e.jsxs(c,{href:t("finance.chart-of-accounts.index"),children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),r("List View")]})}),e.jsx(i,{asChild:!0,children:e.jsxs(c,{href:t("finance.chart-of-accounts.create"),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),r("Add Account")]})})]})]}),e.jsxs(_,{children:[e.jsx(k,{children:e.jsx(E,{className:"text-lg",children:r("Filters")})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:r("Search")}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{placeholder:r("Search accounts..."),value:u,onChange:s=>j(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&b()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:r("Category")}),e.jsxs(B,{value:f,onValueChange:g,children:[e.jsx(I,{children:e.jsx(L,{placeholder:r("All Categories")})}),e.jsxs(U,{children:[e.jsx(d,{value:"",children:r("All Categories")}),M.map(s=>e.jsx(d,{value:s,children:r(s.charAt(0).toUpperCase()+s.slice(1))},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:r("Type")}),e.jsxs(B,{value:N,onValueChange:v,children:[e.jsx(I,{children:e.jsx(L,{placeholder:r("All Types")})}),e.jsxs(U,{children:[e.jsx(d,{value:"",children:r("All Types")}),P.map(s=>e.jsx(d,{value:s,children:r(s.charAt(0).toUpperCase()+s.slice(1))},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:r("Options")}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:s=>w(s.target.checked),className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm",children:r("Show Inactive")})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 mt-4",children:[e.jsx(i,{variant:"outline",onClick:H,children:r("Reset")}),e.jsxs(i,{onClick:b,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),r("Apply Filters")]})]})]})]}),e.jsxs(_,{children:[e.jsxs(k,{children:[e.jsx(E,{children:r("Account Hierarchy")}),e.jsx(Z,{children:r("Click on the chevron icons to expand/collapse account groups")})]}),e.jsxs(D,{className:"p-0",children:[e.jsx("div",{className:"divide-y divide-gray-100",children:p.map(s=>S(s))}),p.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:r("No accounts found")})})]})]})]})]})}export{gs as default};
