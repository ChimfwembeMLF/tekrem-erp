import{G as k,u as w,r as n,j as e,x as F,N as I}from"./app-BMIA6nir.js";import{F as R,P as f,A as _,a as D}from"./ProfileInput-D012Tp-d.js";import"./separator-DnQonHW9.js";import{B as x}from"./createLucideIcon-Cg8jdX0w.js";import{A as v,b as j,a as N}from"./avatar-DdiG0YBt.js";import{u as U}from"./useTypedPage-hmuARwun.js";import"./card-BAsSN-2Z.js";import"./alert-CNp8ZuHk.js";import"./circle-check-big-DCsv6rXk.js";import"./transition-Dyv_LKQb.js";import"./loader-circle-BUEefOfS.js";import"./input-Bg5GDATO.js";import"./label-CM6YsqH1.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";function W({user:o}){const a=k({_method:"PUT",name:o.name,email:o.email,photo:null}),s=w(),[i,l]=n.useState(null),r=n.useRef(null),c=U(),[P,g]=n.useState(!1);function S(){a.post(s("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>m()})}function y(){var t;(t=r.current)==null||t.click()}function A(){var p,u;const t=(u=(p=r.current)==null?void 0:p.files)==null?void 0:u[0];if(!t)return;a.setData("photo",t);const d=new FileReader;d.onload=C=>{var h;l((h=C.target)==null?void 0:h.result)},d.readAsDataURL(t)}function b(){I.delete(s("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{l(null),m()}})}function m(){var t;(t=r.current)!=null&&t.value&&(r.current.value="",a.setData("photo",null))}return e.jsxs(R,{onSubmit:S,title:"Profile Information",description:"Update your account's profile information and email address.",renderActions:()=>e.jsxs(e.Fragment,{children:[e.jsx(_,{on:a.recentlySuccessful,className:"mr-3",children:"Saved."}),e.jsx(D,{isLoading:a.processing,loadingText:"Saving...",children:"Save"})]}),children:[c.props.jetstream.managesProfilePhotos?e.jsxs("div",{className:"col-span-6 sm:col-span-4",children:[e.jsx("input",{type:"file",className:"hidden",ref:r,onChange:A}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Photo"}),i?e.jsx("div",{className:"mt-2",children:e.jsxs(v,{className:"h-20 w-20",children:[e.jsx(j,{src:i,alt:o.name}),e.jsx(N,{children:o.name.charAt(0).toUpperCase()})]})}):e.jsx("div",{className:"mt-2",children:e.jsxs(v,{className:"h-20 w-20",children:[e.jsx(j,{src:o.profile_photo_url,alt:o.name}),e.jsx(N,{children:o.name.charAt(0).toUpperCase()})]})}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(x,{variant:"outline",type:"button",onClick:y,children:"Select A New Photo"}),o.profile_photo_path&&e.jsx(x,{variant:"outline",type:"button",onClick:b,children:"Remove Photo"})]}),a.errors.photo&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:a.errors.photo})]})]}):null,e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx(f,{label:"Name",id:"name",type:"text",value:a.data.name,onChange:t=>a.setData("name",t.currentTarget.value),error:a.errors.name,autoComplete:"name"})}),e.jsxs("div",{className:"col-span-6 sm:col-span-4",children:[e.jsx(f,{label:"Email",id:"email",type:"email",value:a.data.email,onChange:t=>a.setData("email",t.currentTarget.value),error:a.errors.email}),c.props.jetstream.hasEmailVerification&&o.email_verified_at===null?e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your email address is unverified."," ",e.jsx(F,{href:s("verification.send"),method:"post",as:"button",className:"text-primary underline underline-offset-4 hover:text-primary/90",onClick:t=>{t.preventDefault(),g(!0)},children:"Click here to re-send the verification email."})]}),P&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"A new verification link has been sent to your email address."})]}):null]})]})}export{W as default};
