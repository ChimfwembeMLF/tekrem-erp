import{u as B,j as e,S as P,x as V,A as n}from"./app-BMIA6nir.js";import{C as I}from"./CustomerLayout-7LFTkDxI.js";import{C as m,a as d,b as x,d as u,c as h}from"./card-BAsSN-2Z.js";import{B as p,U as L}from"./x-C3KwZK3B.js";import{B as j}from"./createLucideIcon-Cg8jdX0w.js";import{I as z}from"./input-Bg5GDATO.js";import{S as f,a as g,b as N,c as v,d as l}from"./select-B6KOX9nY.js";import{A as M}from"./arrow-left-UX2kDF52.js";import{S as R}from"./search-_p1CX5vB.js";import{C as U}from"./calendar-DTsvo4Hi.js";import{T as w}from"./target-DIhftedx.js";import{C}from"./clock-BTinGqFV.js";import{C as H}from"./circle-alert-DVIk47WR.js";import{P as E}from"./pause-DQg-zhyH.js";import{C as $}from"./circle-check-big-DCsv6rXk.js";import"./avatar-DdiG0YBt.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";import"./NotificationComponent-CHA3vjZG.js";import"./index-BN56TOeV.js";import"./index-BeGDJhOY.js";import"./index-DgfI6AGt.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";import"./sheet-1SUjjT9Y.js";import"./users-3SuyoAg3.js";import"./log-out-B525vUfE.js";import"./message-square-32k9udjC.js";import"./file-text-D25AipK4.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";function we({project:i,tasks:t,milestones:b,filters:a}){const c=B(),S=s=>{switch(s){case"completed":return"secondary";case"in_progress":return"default";case"pending":return"outline";case"cancelled":return"destructive";default:return"outline"}},y=s=>{switch(s){case"completed":return e.jsx($,{className:"h-4 w-4"});case"in_progress":return e.jsx(C,{className:"h-4 w-4"});case"pending":return e.jsx(E,{className:"h-4 w-4"});case"cancelled":return e.jsx(H,{className:"h-4 w-4"});default:return e.jsx(C,{className:"h-4 w-4"})}},T=s=>{switch(s){case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}},o=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),_=s=>{s.preventDefault();const F=new FormData(s.currentTarget).get("search");n.get(c("customer.projects.tasks",i.id),{...a,search:F},{preserveState:!0,replace:!0})},D=s=>{n.get(c("customer.projects.tasks",i.id),{...a,status:s==="all"?void 0:s},{preserveState:!0,replace:!0})},A=s=>{n.get(c("customer.projects.tasks",i.id),{...a,milestone_id:s==="all"?void 0:s},{preserveState:!0,replace:!0})};return e.jsxs(I,{children:[e.jsx(P,{title:`${i.name} - Tasks`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(V,{href:c("customer.projects.show",i.id),children:e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Back to Project"]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[i.name," - Tasks"]}),e.jsx("p",{className:"text-muted-foreground",children:"View and track tasks assigned to this project"})]})]}),e.jsxs(m,{children:[e.jsxs(d,{children:[e.jsx(x,{children:"Filter Tasks"}),e.jsx(u,{children:"Filter tasks by status, milestone, or search for specific tasks"})]}),e.jsx(h,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("form",{onSubmit:_,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{name:"search",placeholder:"Search tasks...",className:"pl-10"})]})}),e.jsxs(f,{value:a.status||"all",onValueChange:D,children:[e.jsx(g,{className:"w-[180px]",children:e.jsx(N,{placeholder:"Filter by status"})}),e.jsxs(v,{children:[e.jsx(l,{value:"all",children:"All Status"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"in_progress",children:"In Progress"}),e.jsx(l,{value:"completed",children:"Completed"}),e.jsx(l,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(f,{value:a.milestone_id||"all",onValueChange:A,children:[e.jsx(g,{className:"w-[180px]",children:e.jsx(N,{placeholder:"Filter by milestone"})}),e.jsxs(v,{children:[e.jsx(l,{value:"all",children:"All Milestones"}),b.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]})})]}),e.jsxs(m,{children:[e.jsxs(d,{children:[e.jsxs(x,{children:["Tasks (",t.total,")"]}),e.jsx(u,{children:"Tasks visible to you in this project"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"space-y-4",children:t.data.length>0?t.data.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsxs(p,{variant:S(s.status),children:[y(s.status),e.jsx("span",{className:"ml-1 capitalize",children:s.status.replace("_"," ")})]}),e.jsx(p,{variant:T(s.priority),className:"text-xs",children:s.priority})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.due_date&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),"Due: ",o(s.due_date)]}),s.assignedTo&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),s.assignedTo.name]}),s.milestone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"h-3 w-3"}),s.milestone.name]}),e.jsxs("span",{children:["Created: ",o(s.created_at)]})]})]})}),s.comments.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Recent Comments"}),e.jsx("div",{className:"space-y-2",children:s.comments.slice(0,2).map(r=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[r.user.name,":"]}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:r.content}),e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:o(r.created_at)})]},r.id))})]})]},s.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-muted-foreground",children:a.status||a.milestone_id?"No tasks match your current filters.":"No tasks are visible to you in this project."})]})}),t.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",t.from," to ",t.to," of ",t.total," tasks"]}),e.jsx("div",{className:"flex items-center gap-2",children:t.links.map((s,r)=>e.jsx(j,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&n.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},r))})]})]})]})]})]})}export{we as default};
