import{r as m,j as e,S as O,x as u,A as c}from"./app-BMIA6nir.js";import{C as j,a as Z,b as G,c as g}from"./card-BAsSN-2Z.js";import{B as i}from"./createLucideIcon-Cg8jdX0w.js";import{B as I,U as X}from"./x-C3KwZK3B.js";import{I as $}from"./input-Bg5GDATO.js";import{S as f,a as N,b as v,c as y,d as a}from"./select-B6KOX9nY.js";import{D as J,a as Q,b as W,c as w}from"./NotificationComponent-CHA3vjZG.js";import{A as Y,a as ee}from"./avatar-DdiG0YBt.js";import{A as se}from"./AppLayout-DbMk6clK.js";import{u as te}from"./useTranslate-ER5gAOX6.js";import{t as n}from"./index-Dj2TB_RL.js";import{S as ae}from"./search-_p1CX5vB.js";import{F as re}from"./funnel-v8IwREza.js";import{M as k}from"./message-square-32k9udjC.js";import{P as T}from"./plus-BjPf5uI-.js";import{A as E}from"./archive-Bntya-At.js";import{B as le}from"./bot-COuCQh0r.js";import{Z as ie}from"./zap-CQoeASxN.js";import{D as ce}from"./dollar-sign-Cli0KufN.js";import{C as ne}from"./clock-BTinGqFV.js";import{E as oe}from"./ellipsis-DJ3pNpl6.js";import{E as me}from"./eye-DdivFxyT.js";import{A as de}from"./archive-restore-nhW0omiP.js";import{T as xe}from"./trash-2-DZc0jDKK.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-DgfI6AGt.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";import"./sheet-1SUjjT9Y.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-circle-CVsRMw7b.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./log-out-B525vUfE.js";function hs({conversations:l,models:U,filters:o}){const{t}=te(),[C,S]=m.useState(o.search||""),[d,A]=m.useState(o.model_id||"all"),[x,b]=m.useState(o.context_type||"all"),[h,_]=m.useState(o.is_archived||"all"),F=()=>{c.get(route("ai.conversations.index"),{search:C,model_id:d==="all"?"":d,context_type:x==="all"?"":x,is_archived:h==="all"?"":h},{preserveState:!0,preserveScroll:!0})},B=()=>{S(""),A("all"),b("all"),_("all"),c.get(route("ai.conversations.index"))},L=async(s,r)=>{var D;const M=r?"ai.conversations.unarchive":"ai.conversations.archive";try{const p=await(await fetch(route(M,s),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((D=document.querySelector('meta[name="csrf-token"]'))==null?void 0:D.getAttribute("content"))||""}})).json();p.success?(n.success(p.message),c.reload()):n.error(p.message)}catch{n.error("Failed to update conversation")}},V=s=>{confirm(t("Are you sure you want to delete this conversation?"))&&c.delete(route("ai.conversations.destroy",s),{onSuccess:()=>n.success(t("Conversation deleted successfully")),onError:()=>n.error(t("Failed to delete conversation"))})},R=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:4}).format(s),P=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),H=s=>({crm:"bg-blue-100 text-blue-800",finance:"bg-green-100 text-green-800",support:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",q=s=>{if(!s.messages||s.messages.length===0)return t("No messages");const r=s.messages[s.messages.length-1];return r.content.length>100?r.content.substring(0,100)+"...":r.content},z=s=>!s.messages||s.messages.length===0?null:s.messages[s.messages.length-1].role;return e.jsxs(se,{title:t("AI Conversations"),renderHeader:()=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:t("AI Conversations")}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:t("View and manage AI conversation history")})]}),e.jsx(u,{href:route("ai.conversations.create"),children:e.jsxs(i,{children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),t("New Conversation")]})})]}),children:[e.jsx(O,{title:t("AI Conversations")}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[e.jsxs(j,{children:[e.jsx(Z,{children:e.jsx(G,{className:"text-lg",children:t("Filters")})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:t("Search conversations..."),value:C,onChange:s=>S(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&F()})]}),e.jsxs(f,{value:d,onValueChange:A,children:[e.jsx(N,{children:e.jsx(v,{placeholder:t("All Models")})}),e.jsxs(y,{children:[e.jsx(a,{value:"all",children:t("All Models")}),U.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsxs(f,{value:x,onValueChange:b,children:[e.jsx(N,{children:e.jsx(v,{placeholder:t("All Contexts")})}),e.jsxs(y,{children:[e.jsx(a,{value:"all",children:t("All Contexts")}),e.jsx(a,{value:"crm",children:t("CRM")}),e.jsx(a,{value:"finance",children:t("Finance")}),e.jsx(a,{value:"support",children:t("Support")}),e.jsx(a,{value:"general",children:t("General")})]})]}),e.jsxs(f,{value:h,onValueChange:_,children:[e.jsx(N,{children:e.jsx(v,{placeholder:t("All Status")})}),e.jsxs(y,{children:[e.jsx(a,{value:"all",children:t("All Status")}),e.jsx(a,{value:"0",children:t("Active")}),e.jsx(a,{value:"1",children:t("Archived")})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{onClick:F,className:"flex-1",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),t("Filter")]}),e.jsx(i,{variant:"outline",onClick:B,children:t("Clear")})]})]})})]}),l.data.length===0?e.jsx(j,{children:e.jsxs(g,{className:"text-center py-12",children:[e.jsx(k,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t("No conversations found")}),e.jsx("p",{className:"text-gray-600 mb-4",children:t("Start a new conversation with AI to see it here.")}),e.jsx(u,{href:route("ai.conversations.create"),children:e.jsxs(i,{children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),t("New Conversation")]})})]})}):e.jsx("div",{className:"space-y-4",children:l.data.map(s=>e.jsx(j,{className:`transition-all hover:shadow-md ${s.is_archived?"opacity-75":""}`,children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Y,{className:"h-8 w-8",children:e.jsx(ee,{children:s.user.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:s.title}),s.is_archived&&e.jsxs(I,{variant:"secondary",children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),t("Archived")]}),s.context_type&&e.jsx(I,{className:H(s.context_type),children:s.context_type.toUpperCase()})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.user.name," â€¢ ",s.ai_model.name]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[z(s)==="user"?e.jsx(X,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}):e.jsx(le,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:q(s)})]})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),s.message_count," ",t("messages")]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),s.total_tokens.toLocaleString()," ",t("tokens")]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"h-3 w-3 mr-1"}),R(s.total_cost)]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),P(s.last_message_at)]})]})]}),e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"sm",children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsxs(W,{align:"end",children:[e.jsx(w,{asChild:!0,children:e.jsxs(u,{href:route("ai.conversations.show",s.id),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),t("View")]})}),e.jsx(w,{onClick:()=>L(s.id,s.is_archived),children:s.is_archived?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),t("Unarchive")]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),t("Archive")]})}),e.jsxs(w,{onClick:()=>V(s.id),className:"text-red-600",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),t("Delete")]})]})]})]})})},s.id))}),l.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[t("Showing")," ",l.from," ",t("to")," ",l.to," ",t("of")," ",l.total," ",t("results")]}),e.jsx("div",{className:"flex space-x-1",children:l.links.map((s,r)=>e.jsx(i,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&c.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},r))})]})]})})]})}export{hs as default};
