import{u as k,r as j,j as e,S as A,A as w}from"./app-BMIA6nir.js";import{A as U,L as E,C as D}from"./AppLayout-DbMk6clK.js";import{C as o,a as m,b as d,d as F,c as p}from"./card-BAsSN-2Z.js";import{B as f}from"./createLucideIcon-Cg8jdX0w.js";import{I as C}from"./input-Bg5GDATO.js";import{L as u}from"./label-CM6YsqH1.js";import{T as I}from"./textarea-CP26afIU.js";import{S as O,a as P,b as B,c as H,d as V}from"./select-B6KOX9nY.js";import{S as z}from"./switch-_qD_kSA5.js";import{A as W,a as $}from"./alert-CNp8ZuHk.js";import{B as q}from"./x-C3KwZK3B.js";import{u as J}from"./useTranslate-ER5gAOX6.js";import{t as l}from"./index-Dj2TB_RL.js";import{A as K}from"./arrow-left-UX2kDF52.js";import{T as M}from"./test-tube-BGKhckqE.js";import{S as X}from"./save-D6UyxhH5.js";import{T as G}from"./triangle-alert-BWIpgUmg.js";import{E as Q}from"./external-link-DiDOWbPw.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function Ye({redirect:r,statusCodes:_,errors:a}){const{t:s}=J(),h=k(),[g,v]=j.useState(!1),[N,y]=j.useState(!1),[i,T]=j.useState({from_url:r.from_url,to_url:r.to_url,status_code:r.status_code,description:r.description||"",is_active:r.is_active}),n=(t,c)=>{T(x=>({...x,[t]:c}))},b=async t=>{t.preventDefault(),v(!0),w.put(h("cms.redirects.update",r.id),i,{onSuccess:()=>{l.success(s("cms.redirect_updated","Redirect updated successfully"))},onError:c=>{console.error("Validation errors:",c),l.error(s("cms.redirect_update_failed","Failed to update redirect"))},onFinish:()=>{v(!1)}})},R=async()=>{var t;if(!i.from_url){l.error(s("cms.enter_from_url","Please enter a source URL to test"));return}y(!0);try{const x=await(await fetch(h("cms.redirects.test"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({url:i.from_url})})).json();x.success?l.success(s("cms.redirect_test_success","Redirect test completed successfully")):l.error(x.message||s("cms.redirect_test_failed","Redirect test failed"))}catch{l.error(s("cms.redirect_test_error","Error testing redirect"))}finally{y(!1)}},L=t=>t?!t.startsWith("http")&&!t.startsWith("/")?"/"+t:t:"",S=t=>new Date(t).toLocaleDateString();return e.jsxs(U,{children:[e.jsx(A,{title:`${s("common.edit","Edit")} ${r.from_url}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>w.visit(h("cms.redirects.index")),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),s("common.back","Back")]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[s("common.edit","Edit")," ",r.from_url]}),e.jsx("p",{className:"text-muted-foreground",children:s("cms.edit_redirect_description","Modify redirect settings and destination")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"outline",onClick:R,disabled:N||!i.from_url,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),N?s("cms.testing","Testing..."):s("cms.test","Test")]}),e.jsxs(f,{onClick:b,disabled:g||!i.from_url||!i.to_url,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),g?s("common.saving","Saving..."):s("common.save","Save")]})]})]}),Object.keys(a||{}).length>0&&e.jsxs(W,{variant:"destructive",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx($,{children:s("common.validation_errors","Please fix the validation errors below")})]}),e.jsx("form",{onSubmit:b,className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),s("cms.redirect_details","Redirect Details")]}),e.jsx(F,{children:s("cms.redirect_details_desc","Configure the source and destination URLs")})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"from_url",children:[s("cms.from_url","From URL")," *"]}),e.jsx(C,{id:"from_url",value:i.from_url,onChange:t=>n("from_url",L(t.target.value)),placeholder:"/old-page or https://example.com/old-page",className:a!=null&&a.from_url?"border-destructive":""}),(a==null?void 0:a.from_url)&&e.jsx("p",{className:"text-sm text-destructive",children:a.from_url}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("cms.from_url_help","The URL that should be redirected. Can be relative (/page) or absolute (https://example.com/page)")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"to_url",children:[s("cms.to_url","To URL")," *"]}),e.jsx(C,{id:"to_url",value:i.to_url,onChange:t=>n("to_url",t.target.value),placeholder:"/new-page or https://example.com/new-page",className:a!=null&&a.to_url?"border-destructive":""}),(a==null?void 0:a.to_url)&&e.jsx("p",{className:"text-sm text-destructive",children:a.to_url}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("cms.to_url_help","The destination URL where users should be redirected")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"status_code",children:[s("cms.status_code","Status Code")," *"]}),e.jsxs(O,{value:i.status_code.toString(),onValueChange:t=>n("status_code",parseInt(t)),children:[e.jsx(P,{className:a!=null&&a.status_code?"border-destructive":"",children:e.jsx(B,{placeholder:s("cms.select_status_code","Select status code")})}),e.jsx(H,{children:Object.entries(_).map(([t,c])=>e.jsxs(V,{value:t,children:[t," - ",c]},t))})]}),(a==null?void 0:a.status_code)&&e.jsx("p",{className:"text-sm text-destructive",children:a.status_code}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("cms.status_code_help","301 for permanent redirects, 302 for temporary redirects")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"description",children:s("cms.description","Description")}),e.jsx(I,{id:"description",value:i.description,onChange:t=>n("description",t.target.value),placeholder:s("cms.redirect_description_placeholder","Optional description for this redirect..."),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("cms.description_help","Optional description to help identify this redirect")})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(d,{children:s("cms.redirect_settings","Redirect Settings")})}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:s("cms.active","Active")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("cms.redirect_active_desc","Enable this redirect")})]}),e.jsx(z,{checked:i.is_active,onCheckedChange:t=>n("is_active",t)})]})})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),s("cms.usage_statistics","Usage Statistics")]})}),e.jsxs(p,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("cms.total_hits","Total Hits")}),e.jsx(q,{variant:"outline",children:r.hit_count})]}),r.last_hit_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("cms.last_hit","Last Hit")}),e.jsx("span",{className:"text-sm",children:S(r.last_hit_at)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("cms.created_at","Created")}),e.jsx("span",{className:"text-sm",children:S(r.created_at)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("cms.created_by","Created by")}),e.jsx("span",{className:"text-sm",children:r.created_by.name})]})]})]}),i.from_url&&i.to_url&&e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(d,{children:s("cms.redirect_preview","Redirect Preview")})}),e.jsx(p,{className:"space-y-3",children:e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:i.from_url}),e.jsx(Q,{className:"h-3 w-3"}),e.jsx("span",{className:"text-muted-foreground",children:"â†’"}),e.jsx("span",{className:"font-medium",children:i.to_url})]}),e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:["HTTP ",i.status_code," - ",_[i.status_code]]})]})})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(d,{children:s("cms.status_code_info","Status Code Information")})}),e.jsxs(p,{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"301 - Permanent Redirect"}),e.jsx("p",{className:"text-muted-foreground",children:s("cms.status_301_desc","Use for permanently moved content. Search engines will transfer ranking to the new URL.")})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"302 - Temporary Redirect"}),e.jsx("p",{className:"text-muted-foreground",children:s("cms.status_302_desc","Use for temporarily moved content. Search engines will keep the original URL in their index.")})]})]})]})]})]})})]})]})}export{Ye as default};
