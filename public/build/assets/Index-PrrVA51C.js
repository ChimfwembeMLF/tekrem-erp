import{u as K,r as m,j as e,S as Q,x as c,A as x}from"./app-BMIA6nir.js";import{A as W}from"./AppLayout-DbMk6clK.js";import{C as Y,a as ee,b as se,d as ae,c as te}from"./card-BAsSN-2Z.js";import{B as i}from"./createLucideIcon-Cg8jdX0w.js";import{I as re}from"./input-Bg5GDATO.js";import{B as v}from"./x-C3KwZK3B.js";import{S as y,a as N,b,c as S,d as n}from"./select-B6KOX9nY.js";import{D as ne,a as le,b as ce,c as o}from"./NotificationComponent-CHA3vjZG.js";import{u as ie}from"./useTranslate-ER5gAOX6.js";import{t as h}from"./index-Dj2TB_RL.js";import{P as R}from"./plus-BjPf5uI-.js";import{F as oe}from"./file-text-D25AipK4.js";import{S as T}from"./shield-DwKJ9Ble.js";import{C as E}from"./calendar-DTsvo4Hi.js";import{E as de}from"./ellipsis-DJ3pNpl6.js";import{E as me}from"./eye-DdivFxyT.js";import{S as xe}from"./square-pen-CReBrXbl.js";import{S as ue}from"./send-C-AP4C9s.js";import{R as B}from"./refresh-cw-CkrxGXg9.js";import{D as he}from"./download-CNZP3fGS.js";import{T as pe}from"./trash-2-DZc0jDKK.js";import{C as Z}from"./circle-x-D-Fm_LhT.js";import{C as fe}from"./circle-check-big-DCsv6rXk.js";import{C as M}from"./clock-BTinGqFV.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./bell-5VRgJnzP.js";function js({invoices:l,filters:d,statuses:p,billables:f}){var I;const{t:a}=ie(),t=K(),[w,C]=m.useState(d.search||""),[j,z]=m.useState(d.status||"all"),[g,D]=m.useState(d.zra_status||"all"),[_,k]=m.useState(d.billable||"all"),[F,L]=m.useState(d.date_from||""),[P,V]=m.useState(d.date_to||""),H=()=>{x.get(t("finance.invoices.index"),{search:w,status:j==="all"?"":j,zra_status:g==="all"?"":g,billable:_==="all"?"":_,date_from:F,date_to:P},{preserveState:!0,replace:!0})},U=()=>{C(""),z("all"),D("all"),k("all"),L(""),V(""),x.get(t("finance.invoices.index"),{},{preserveState:!0,replace:!0})},q=s=>{confirm(a("common.confirm_delete","Are you sure you want to delete this item?"))&&x.delete(t("finance.invoices.destroy",s),{onSuccess:()=>{h.success(a("finance.invoice_deleted","Invoice deleted successfully"))},onError:()=>{h.error(a("common.error_occurred","An error occurred"))}})},G=s=>{x.post(t("finance.invoices.send",s),{},{onSuccess:()=>{h.success(a("finance.invoice_sent","Invoice sent successfully"))},onError:()=>{h.error(a("common.error_occurred","An error occurred"))}})},A=(s,r="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:r}).format(s),O=s=>{switch(s){case"paid":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},X=s=>{const r={not_submitted:{variant:"secondary",icon:M,color:"text-gray-600"},pending:{variant:"secondary",icon:M,color:"text-yellow-600"},submitted:{variant:"default",icon:B,color:"text-blue-600"},approved:{variant:"default",icon:fe,color:"text-green-600"},rejected:{variant:"destructive",icon:Z,color:"text-red-600"},cancelled:{variant:"secondary",icon:Z,color:"text-gray-600"}},u=r[s]||r.not_submitted,J=u.icon;return e.jsxs(v,{variant:u.variant,className:"flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),a(`finance.zra.status.${s}`,s.replace("_"," "))]})},$=s=>{switch(s){case"paid":return"✓";case"sent":return"→";case"overdue":return"!";case"draft":return"○";default:return"○"}};return e.jsxs(W,{title:a("finance.invoices","Invoices"),children:[e.jsx(Q,{title:a("finance.invoices","Invoices")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(Y,{children:[e.jsxs(ee,{className:"flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx(se,{children:a("finance.invoices","Invoices")}),e.jsx(ae,{children:a("finance.invoices_description","Create and manage your invoices")})]}),e.jsx(c,{href:t("finance.invoices.create"),children:e.jsxs(i,{children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),a("finance.create_invoice","Create Invoice")]})})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mb-4 gap-2",children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),H()},className:"flex gap-2 flex-1",children:[e.jsx(re,{type:"text",placeholder:a("finance.search_invoices","Search invoices..."),value:w,onChange:s=>C(s.target.value),className:"max-w-sm"}),e.jsx(i,{type:"submit",variant:"secondary",children:a("common.search","Search")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{value:j,onValueChange:z,children:[e.jsx(N,{className:"w-40",children:e.jsx(b,{placeholder:a("common.all_statuses","All statuses")})}),e.jsxs(S,{children:[e.jsx(n,{value:"all",children:a("common.all_statuses","All statuses")}),p&&Object.entries(p).map(([s,r])=>e.jsx(n,{value:s,children:r},s))]})]}),e.jsxs(y,{value:g,onValueChange:D,children:[e.jsx(N,{className:"w-40",children:e.jsx(b,{placeholder:a("finance.zra.all_statuses","All ZRA Status")})}),e.jsxs(S,{children:[e.jsx(n,{value:"all",children:a("finance.zra.all_statuses","All ZRA Status")}),e.jsx(n,{value:"not_submitted",children:a("finance.zra.status.not_submitted","Not Submitted")}),e.jsx(n,{value:"pending",children:a("finance.zra.status.pending","Pending")}),e.jsx(n,{value:"submitted",children:a("finance.zra.status.submitted","Submitted")}),e.jsx(n,{value:"approved",children:a("finance.zra.status.approved","Approved")}),e.jsx(n,{value:"rejected",children:a("finance.zra.status.rejected","Rejected")}),e.jsx(n,{value:"cancelled",children:a("finance.zra.status.cancelled","Cancelled")})]})]}),e.jsxs(y,{value:_,onValueChange:k,children:[e.jsx(N,{className:"w-40",children:e.jsx(b,{placeholder:a("common.all_clients","All clients")})}),e.jsxs(S,{children:[e.jsx(n,{value:"all",children:a("common.all_clients","All clients")}),f==null?void 0:f.map(s=>e.jsx(n,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx(i,{variant:"outline",onClick:U,children:a("common.reset","Reset")})]})]}),l.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:a("finance.no_invoices","No invoices found")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:a("finance.create_first_invoice_desc","Get started by creating your first invoice.")}),e.jsx(c,{href:t("finance.invoices.create"),children:e.jsxs(i,{children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),a("finance.create_invoice","Create Invoice")]})})]}):e.jsx("div",{className:"space-y-4",children:l.data.map(s=>{var r,u;return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(c,{href:t("finance.invoices.show",s.id),className:"font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400",children:s.invoice_number}),e.jsxs(v,{className:O(s.status),variant:"secondary",children:[e.jsx("span",{className:"mr-1",children:$(s.status)}),p[s.status]||s.status]}),X(s.zra_status),s.is_zra_locked&&e.jsxs(v,{variant:"outline",className:"text-orange-600 border-orange-600",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),a("finance.zra.locked","ZRA Locked")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("finance.client","Client")}),e.jsx("p",{className:"font-medium",children:((r=s.billable)==null?void 0:r.name)||"No client"}),((u=s.billable)==null?void 0:u.email)&&e.jsx("p",{className:"text-xs text-gray-500",children:s.billable.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("finance.issue_date","Issue Date")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-sm",children:new Date(s.issue_date).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("finance.due_date","Due Date")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-sm",children:new Date(s.due_date).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("finance.amount","Amount")}),e.jsx("p",{className:"font-medium text-lg",children:A(s.total_amount,s.currency)}),s.paid_amount>0&&e.jsxs("p",{className:"text-xs text-green-600",children:[A(s.paid_amount,s.currency)," paid (",Math.round(s.paid_amount/s.total_amount*100),"%)"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs(ne,{children:[e.jsx(le,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"sm",children:e.jsx(de,{className:"h-4 w-4"})})}),e.jsxs(ce,{align:"end",children:[e.jsx(o,{asChild:!0,children:e.jsxs(c,{href:t("finance.invoices.show",s.id),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),a("common.view","View")]})}),!s.is_zra_locked&&e.jsx(o,{asChild:!0,children:e.jsxs(c,{href:t("finance.invoices.edit",s.id),children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),a("common.edit","Edit")]})}),s.status==="draft"&&!s.is_zra_locked&&e.jsxs(o,{onClick:()=>G(s.id),children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),a("finance.send_invoice","Send Invoice")]}),s.zra_status==="not_submitted"&&!s.is_zra_locked&&e.jsxs(o,{onClick:()=>x.post(t("finance.zra.submit",s.id)),children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),a("finance.zra.submit","Submit to ZRA")]}),(s.zra_status==="rejected"||s.zra_status==="cancelled")&&!s.is_zra_locked&&e.jsxs(o,{onClick:()=>x.post(t("finance.zra.resubmit",s.id)),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),a("finance.zra.resubmit","Resubmit to ZRA")]}),e.jsx(o,{asChild:!0,children:e.jsxs(c,{href:t("finance.invoices.pdf",s.id),target:"_blank",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),a("finance.download_pdf","Download PDF")]})}),e.jsxs(o,{onClick:()=>q(s.id),className:"text-red-600",children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),a("common.delete","Delete")]})]})]})})]})},s.id)})}),l.last_page>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",l.from," to ",l.to," of ",l.total," invoices"]}),e.jsx("div",{className:"flex gap-1",children:(I=l.links)==null?void 0:I.map((s,r)=>s.url===null?e.jsx(i,{variant:"outline",size:"sm",disabled:!0,dangerouslySetInnerHTML:{__html:s.label}},r):e.jsx(c,{href:s.url,children:e.jsx(i,{variant:s.active?"default":"outline",size:"sm",dangerouslySetInnerHTML:{__html:s.label}})},r))})]})]})]})})})]})}export{js as default};
