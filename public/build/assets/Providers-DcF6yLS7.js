import{u as R,r as N,G as O,j as e,S as z,x as q,A as j}from"./app-BMIA6nir.js";import{A as G}from"./AppLayout-DbMk6clK.js";import{C as W,a as X,b as Z,c as $}from"./card-BAsSN-2Z.js";import{B as x}from"./createLucideIcon-Cg8jdX0w.js";import{I as u}from"./input-Bg5GDATO.js";import{L as p}from"./label-CM6YsqH1.js";import{B as f}from"./x-C3KwZK3B.js";import{S as C}from"./switch-_qD_kSA5.js";import{D as J,b as K,c as Q,d as V,e as Y,f as ee}from"./dialog-BAVny-7O.js";import{T as re,a as se,b as w,c,d as ie,e as t}from"./table-DqBb-9tC.js";import{D as ae,a as oe,b as ce,c as v}from"./NotificationComponent-CHA3vjZG.js";import{u as te}from"./useTranslate-ER5gAOX6.js";import{t as a}from"./index-Dj2TB_RL.js";import{A as ne}from"./arrow-left-UX2kDF52.js";import{P as le}from"./plus-BjPf5uI-.js";import{S as de}from"./smartphone-BqGcJ2Wh.js";import{E as me}from"./ellipsis-DJ3pNpl6.js";import{S as pe}from"./square-pen-CReBrXbl.js";import{A as k}from"./activity-BI-t7JT3.js";import{T as he}from"./trash-2-DZc0jDKK.js";import{S as xe}from"./sheet-1SUjjT9Y.js";import{C as ue}from"./circle-x-D-Fm_LhT.js";import{C as _e}from"./circle-check-big-DCsv6rXk.js";import"./useTypedPage-hmuARwun.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./bell-5VRgJnzP.js";function fr({providers:D}){const{t:s}=te(),n=R(),[l,g]=N.useState(null),[S,h]=N.useState(!1),{data:d,setData:o,post:P,put:A,processing:y,errors:i,reset:b}=O({display_name:"",provider_code:"",api_base_url:"",client_id:"",client_secret:"",is_active:!0,supported_currencies:["ZMW"],fee_structure:{fixed_fee:0,percentage_fee:0,minimum_fee:0,maximum_fee:0}}),M=r=>{g(r),o({display_name:r.display_name,provider_code:r.provider_code,api_base_url:r.api_base_url,client_id:"",client_secret:"",is_active:r.is_active,supported_currencies:r.supported_currencies,fee_structure:r.fee_structure}),h(!0)},T=()=>{g(null),b(),h(!0)},E=r=>{r.preventDefault();const m=l?n("finance.momo.providers.update",l.id):n("finance.momo.providers.store");(l?A:P)(m,{onSuccess:()=>{a.success(l?s("finance.momo.provider_updated","Provider updated successfully"):s("finance.momo.provider_created","Provider created successfully")),h(!1),b()},onError:()=>{a.error(s("common.error_occurred","An error occurred"))}})},F=r=>{confirm(s("finance.momo.confirm_delete_provider","Are you sure you want to delete this provider?"))&&j.delete(n("finance.momo.providers.destroy",r.id),{onSuccess:()=>{a.success(s("finance.momo.provider_deleted","Provider deleted successfully"))},onError:()=>{a.error(s("common.error_occurred","An error occurred"))}})},H=r=>{j.patch(n("finance.momo.providers.toggle",r.id),{},{onSuccess:()=>{a.success(r.is_active?s("finance.momo.provider_disabled","Provider disabled"):s("finance.momo.provider_enabled","Provider enabled"))},onError:()=>{a.error(s("common.error_occurred","An error occurred"))}})},B=r=>{j.post(n("finance.momo.providers.health-check",r.id),{},{onSuccess:()=>{a.success(s("finance.momo.health_check_completed","Health check completed"))},onError:()=>{a.error(s("common.error_occurred","An error occurred"))}})},I=r=>{const m={healthy:{variant:"default",icon:_e,color:"text-green-600"},degraded:{variant:"secondary",icon:k,color:"text-yellow-600"},down:{variant:"destructive",icon:ue,color:"text-red-600"}};if(!r)return e.jsx(f,{variant:"outline",children:"Unknown"});const _=m[r];if(!_)return e.jsx(f,{variant:"outline",children:r});const U=_.icon;return e.jsxs(f,{variant:_.variant,className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),s(`finance.momo.health.${r}`,r)]})},L=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(G,{title:s("finance.momo.providers","Mobile Money Providers"),breadcrumbs:[{label:s("finance.title","Finance"),href:"/finance"},{label:s("finance.momo.title","Mobile Money"),href:"/finance/momo"},{label:s("finance.momo.providers","Providers")}],children:[e.jsx(z,{title:s("finance.momo.providers","Mobile Money Providers")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(q,{href:n("finance.momo.index"),children:e.jsx(ne,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:s("finance.momo.providers","Mobile Money Providers")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s("finance.momo.providers_description","Manage mobile money provider configurations")})]})]}),e.jsxs(x,{onClick:T,children:[e.jsx(le,{className:"h-4 w-4"}),s("finance.momo.add_provider","Add Provider")]})]}),e.jsxs(W,{children:[e.jsx(X,{children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),s("finance.momo.configured_providers","Configured Providers")]})}),e.jsx($,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(re,{children:[e.jsx(se,{children:e.jsxs(w,{children:[e.jsx(c,{children:s("finance.momo.provider_name","Provider Name")}),e.jsx(c,{children:s("finance.momo.code","Code")}),e.jsx(c,{children:s("finance.momo.currencies","Currencies")}),e.jsx(c,{children:s("finance.momo.health_status","Health")}),e.jsx(c,{children:s("finance.momo.status","Status")}),e.jsx(c,{children:s("finance.momo.last_check","Last Check")}),e.jsx(c,{className:"w-[50px]"})]})}),e.jsx(ie,{children:D.map(r=>e.jsxs(w,{children:[e.jsx(t,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-xs font-medium",children:r.provider_code}),r.display_name]})}),e.jsx(t,{children:e.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:r.provider_code})}),e.jsx(t,{children:e.jsx("div",{className:"flex gap-1",children:r.supported_currencies.map(m=>e.jsx(f,{variant:"outline",className:"text-xs",children:m},m))})}),e.jsx(t,{children:I(r.health_status)}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{checked:r.is_active,onCheckedChange:()=>H(r)}),e.jsx("span",{className:"text-sm",children:r.is_active?s("common.active","Active"):s("common.inactive","Inactive")})]})}),e.jsx(t,{className:"text-sm text-gray-600 dark:text-gray-400",children:r.last_health_check?L(r.last_health_check):"Never"}),e.jsx(t,{children:e.jsxs(ae,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsxs(ce,{align:"end",children:[e.jsxs(v,{onClick:()=>M(r),children:[e.jsx(pe,{className:"h-4 w-4"}),s("common.edit","Edit")]}),e.jsxs(v,{onClick:()=>B(r),children:[e.jsx(k,{className:"h-4 w-4"}),s("finance.momo.health_check","Health Check")]}),e.jsxs(v,{onClick:()=>F(r),className:"text-red-600",children:[e.jsx(he,{className:"h-4 w-4"}),s("common.delete","Delete")]})]})]})})]},r.id))})]})})})]}),e.jsx(J,{open:S,onOpenChange:h,children:e.jsxs(K,{className:"max-w-2xl",children:[e.jsxs(Q,{children:[e.jsx(V,{children:l?s("finance.momo.edit_provider","Edit Provider"):s("finance.momo.add_provider","Add Provider")}),e.jsx(Y,{children:s("finance.momo.provider_form_description","Configure mobile money provider settings and credentials")})]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"display_name",children:[s("finance.momo.display_name","Display Name")," *"]}),e.jsx(u,{id:"display_name",placeholder:"MTN Mobile Money",value:d.display_name,onChange:r=>o("display_name",r.target.value),className:i.display_name?"border-red-500":""}),i.display_name&&e.jsx("p",{className:"text-sm text-red-600",children:i.display_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"provider_code",children:[s("finance.momo.provider_code","Provider Code")," *"]}),e.jsx(u,{id:"provider_code",placeholder:"MTN",value:d.provider_code,onChange:r=>o("provider_code",r.target.value.toUpperCase()),className:i.provider_code?"border-red-500":""}),i.provider_code&&e.jsx("p",{className:"text-sm text-red-600",children:i.provider_code})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"api_base_url",children:[s("finance.momo.api_base_url","API Base URL")," *"]}),e.jsx(u,{id:"api_base_url",placeholder:"https://api.mtn.com/v1",value:d.api_base_url,onChange:r=>o("api_base_url",r.target.value),className:i.api_base_url?"border-red-500":""}),i.api_base_url&&e.jsx("p",{className:"text-sm text-red-600",children:i.api_base_url})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"client_id",children:[s("finance.momo.client_id","Client ID")," *"]}),e.jsx(u,{id:"client_id",placeholder:"your-client-id",value:d.client_id,onChange:r=>o("client_id",r.target.value),className:i.client_id?"border-red-500":""}),i.client_id&&e.jsx("p",{className:"text-sm text-red-600",children:i.client_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"client_secret",children:[s("finance.momo.client_secret","Client Secret")," *"]}),e.jsx(u,{id:"client_secret",type:"password",placeholder:"your-client-secret",value:d.client_secret,onChange:r=>o("client_secret",r.target.value),className:i.client_secret?"border-red-500":""}),i.client_secret&&e.jsx("p",{className:"text-sm text-red-600",children:i.client_secret})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{id:"is_active",checked:d.is_active,onCheckedChange:r=>o("is_active",r)}),e.jsx(p,{htmlFor:"is_active",children:s("finance.momo.active_provider","Active Provider")})]}),e.jsxs(ee,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>h(!1),children:s("common.cancel","Cancel")}),e.jsx(x,{type:"submit",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s("common.saving","Saving...")]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4"}),l?s("common.update","Update"):s("common.create","Create")]})})]})]})]})})]})]})}export{fr as default};
