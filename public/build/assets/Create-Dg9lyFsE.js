import{r as u,G as O,j as e,S as P}from"./app-BMIA6nir.js";import{C as N,a as _,b,d as C,c as k}from"./card-BAsSN-2Z.js";import{B as x}from"./createLucideIcon-Cg8jdX0w.js";import{I as c}from"./input-Bg5GDATO.js";import{L as r}from"./label-CM6YsqH1.js";import{T as $}from"./textarea-CP26afIU.js";import{S,a as w,b as A,c as I,d}from"./select-B6KOX9nY.js";import{S as T}from"./switch-_qD_kSA5.js";import{A as G,a as U}from"./alert-CNp8ZuHk.js";import{A as H}from"./AppLayout-DbMk6clK.js";import{u as V}from"./useTranslate-ER5gAOX6.js";import{B as D}from"./bot-COuCQh0r.js";import{S as M}from"./sheet-1SUjjT9Y.js";import{D as z}from"./dollar-sign-Cli0KufN.js";import{Z as R}from"./zap-CQoeASxN.js";import{L as Z}from"./loader-circle-BUEefOfS.js";import{C as K}from"./circle-alert-DVIk47WR.js";import{A as J}from"./arrow-left-UX2kDF52.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";import"./useTypedPage-hmuARwun.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./x-C3KwZK3B.js";import"./bell-5VRgJnzP.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./log-out-B525vUfE.js";function We({services:j}){const{t}=V(),[Q,F]=u.useState(null),[o,g]=u.useState([]),[p,y]=u.useState(""),{data:a,setData:i,post:E,processing:v,errors:l,reset:W}=O({ai_service_id:"",name:"",model_identifier:"",type:"",description:"",is_enabled:!0,is_default:!1,capabilities:[],max_tokens:"",temperature:"0.7",top_p:"1.0",frequency_penalty:"0",presence_penalty:"0",cost_per_input_token:"",cost_per_output_token:"",configuration:{}}),q=s=>{s.preventDefault(),E(route("ai.models.store"))},B=s=>{i("ai_service_id",s);const n=j.find(h=>h.id.toString()===s);F(n||null)},f=()=>{if(p.trim()&&!o.includes(p.trim())){const s=[...o,p.trim()];g(s),i("capabilities",s),y("")}},L=s=>{const n=o.filter(h=>h!==s);g(n),i("capabilities",n)},m=s=>({chat:"bg-blue-100 text-blue-800",completion:"bg-green-100 text-green-800",embedding:"bg-purple-100 text-purple-800",image:"bg-orange-100 text-orange-800",audio:"bg-pink-100 text-pink-800"})[s]||"bg-gray-100 text-gray-800";return e.jsxs(H,{title:t("Create AI Model"),renderHeader:()=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),t("Back")]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:t("Create AI Model")}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:t("Add a new AI model to your system")})]})]})}),children:[e.jsx(P,{title:t("Create AI Model")}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsxs(N,{children:[e.jsxs(_,{children:[e.jsxs(b,{className:"flex items-center",children:[e.jsx(D,{className:"h-5 w-5 mr-2"}),t("Basic Information")]}),e.jsx(C,{children:t("Configure the basic details of your AI model")})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"ai_service_id",children:[t("AI Service")," *"]}),e.jsxs(S,{value:a.ai_service_id,onValueChange:B,children:[e.jsx(w,{className:l.ai_service_id?"border-red-500":"",children:e.jsx(A,{placeholder:t("Select an AI service")})}),e.jsx(I,{children:j.filter(s=>s.is_enabled).map(s=>e.jsx(d,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.provider})]})]})},s.id))})]}),l.ai_service_id&&e.jsx("p",{className:"text-sm text-red-600",children:l.ai_service_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"name",children:[t("Model Name")," *"]}),e.jsx(c,{id:"name",type:"text",value:a.name,onChange:s=>i("name",s.target.value),placeholder:t("Enter a descriptive name for the model"),className:l.name?"border-red-500":""}),l.name&&e.jsx("p",{className:"text-sm text-red-600",children:l.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"model_identifier",children:[t("Model Identifier")," *"]}),e.jsx(c,{id:"model_identifier",type:"text",value:a.model_identifier,onChange:s=>i("model_identifier",s.target.value),placeholder:t("e.g., mistral-large-latest, gpt-4, claude-3"),className:l.model_identifier?"border-red-500":""}),l.model_identifier&&e.jsx("p",{className:"text-sm text-red-600",children:l.model_identifier}),e.jsx("p",{className:"text-sm text-gray-600",children:t("The exact model identifier used by the AI service")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"type",children:[t("Model Type")," *"]}),e.jsxs(S,{value:a.type,onValueChange:s=>i("type",s),children:[e.jsx(w,{className:l.type?"border-red-500":"",children:e.jsx(A,{placeholder:t("Select model type")})}),e.jsxs(I,{children:[e.jsx(d,{value:"chat",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${m("chat")}`,children:"CHAT"}),e.jsx("span",{children:t("Chat Completion")})]})}),e.jsx(d,{value:"completion",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${m("completion")}`,children:"COMPLETION"}),e.jsx("span",{children:t("Text Completion")})]})}),e.jsx(d,{value:"embedding",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${m("embedding")}`,children:"EMBEDDING"}),e.jsx("span",{children:t("Text Embedding")})]})}),e.jsx(d,{value:"image",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${m("image")}`,children:"IMAGE"}),e.jsx("span",{children:t("Image Generation")})]})}),e.jsx(d,{value:"audio",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${m("audio")}`,children:"AUDIO"}),e.jsx("span",{children:t("Audio Processing")})]})})]})]}),l.type&&e.jsx("p",{className:"text-sm text-red-600",children:l.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",children:t("Description")}),e.jsx($,{id:"description",value:a.description,onChange:s=>i("description",s.target.value),placeholder:t("Describe the model capabilities and use cases"),rows:3,className:"resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:t("Enable Model")}),e.jsx("p",{className:"text-sm text-gray-600",children:t("Make this model available for use")})]}),e.jsx(T,{checked:a.is_enabled,onCheckedChange:s=>i("is_enabled",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:t("Set as Default")}),e.jsx("p",{className:"text-sm text-gray-600",children:t("Use as default for this model type")})]}),e.jsx(T,{checked:a.is_default,onCheckedChange:s=>i("is_default",s)})]})]})]})]}),e.jsxs(N,{children:[e.jsxs(_,{children:[e.jsxs(b,{className:"flex items-center",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),t("Advanced Configuration")]}),e.jsx(C,{children:t("Configure model parameters and capabilities")})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"max_tokens",children:t("Max Tokens")}),e.jsx(c,{id:"max_tokens",type:"number",value:a.max_tokens,onChange:s=>i("max_tokens",s.target.value),placeholder:"4096",min:"1"}),e.jsx("p",{className:"text-sm text-gray-600",children:t("Maximum number of tokens the model can process")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"temperature",children:t("Temperature")}),e.jsx(c,{id:"temperature",type:"number",value:a.temperature,onChange:s=>i("temperature",s.target.value),placeholder:"0.7",min:"0",max:"2",step:"0.1"}),e.jsx("p",{className:"text-sm text-gray-600",children:t("Controls randomness (0.0 = deterministic, 2.0 = very random)")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"top_p",children:t("Top P")}),e.jsx(c,{id:"top_p",type:"number",value:a.top_p,onChange:s=>i("top_p",s.target.value),placeholder:"1.0",min:"0",max:"1",step:"0.1"}),e.jsx("p",{className:"text-sm text-gray-600",children:t("Nucleus sampling parameter")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"frequency_penalty",children:t("Frequency Penalty")}),e.jsx(c,{id:"frequency_penalty",type:"number",value:a.frequency_penalty,onChange:s=>i("frequency_penalty",s.target.value),placeholder:"0",min:"-2",max:"2",step:"0.1"}),e.jsx("p",{className:"text-sm text-gray-600",children:t("Reduces repetition of frequent tokens")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-4 w-4 text-gray-600"}),e.jsx(r,{className:"text-base font-medium",children:t("Cost Configuration")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"cost_per_input_token",children:t("Cost per Input Token")}),e.jsx(c,{id:"cost_per_input_token",type:"number",value:a.cost_per_input_token,onChange:s=>i("cost_per_input_token",s.target.value),placeholder:"0.000001",min:"0",step:"0.000001"}),e.jsx("p",{className:"text-sm text-gray-600",children:t("Cost in USD per input token")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"cost_per_output_token",children:t("Cost per Output Token")}),e.jsx(c,{id:"cost_per_output_token",type:"number",value:a.cost_per_output_token,onChange:s=>i("cost_per_output_token",s.target.value),placeholder:"0.000003",min:"0",step:"0.000001"}),e.jsx("p",{className:"text-sm text-gray-600",children:t("Cost in USD per output token")})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-4 w-4 text-gray-600"}),e.jsx(r,{className:"text-base font-medium",children:t("Capabilities")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{value:p,onChange:s=>y(s.target.value),placeholder:t("Add a capability (e.g., function_calling, vision)"),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),f())}),e.jsx(x,{type:"button",onClick:f,variant:"outline",children:t("Add")})]}),o.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.map((s,n)=>e.jsxs("div",{className:"flex items-center space-x-1 bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:[e.jsx("span",{children:s}),e.jsx("button",{type:"button",onClick:()=>L(s),className:"text-blue-600 hover:text-blue-800",children:"×"})]},n))}),e.jsx("p",{className:"text-sm text-gray-600",children:t("Add capabilities that this model supports")})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:t("Cancel")}),e.jsxs("div",{className:"flex items-center space-x-3",children:[v&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Z,{className:"h-4 w-4 mr-2 animate-spin"}),t("Creating model...")]}),e.jsxs(x,{type:"submit",disabled:v||!a.name||!a.ai_service_id||!a.model_identifier||!a.type,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),t("Create Model")]})]})]}),Object.keys(l).length>0&&e.jsxs(G,{variant:"destructive",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsxs(U,{children:[t("Please fix the following errors:"),e.jsx("ul",{className:"mt-2 list-disc list-inside",children:Object.entries(l).map(([s,n])=>e.jsx("li",{className:"text-sm",children:n},s))})]})]})]})})})]})}export{We as default};
