import{u as M,r as i,j as e,S as U,x as m,A as h}from"./app-BMIA6nir.js";import{A as G}from"./AppLayout-DbMk6clK.js";import{C as O,a as W,b as X,d as $,c as J}from"./card-BAsSN-2Z.js";import{B as a}from"./createLucideIcon-Cg8jdX0w.js";import{I as K}from"./input-Bg5GDATO.js";import{B as o}from"./x-C3KwZK3B.js";import{S,a as _,b,c as w,d}from"./select-B6KOX9nY.js";import{u as Y}from"./useTranslate-ER5gAOX6.js";import{t as C}from"./index-Dj2TB_RL.js";import{P as A}from"./plus-BjPf5uI-.js";import{F as p}from"./file-text-D25AipK4.js";import{C as D}from"./calendar-DTsvo4Hi.js";import{S as Z}from"./square-pen-CReBrXbl.js";import{S as T}from"./send-C-AP4C9s.js";import{T as q}from"./triangle-alert-BWIpgUmg.js";import{C as ee}from"./circle-x-D-Fm_LhT.js";import{C as se}from"./circle-check-big-DCsv6rXk.js";import{C as te}from"./clock-BTinGqFV.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function qe({quotations:r,filters:c,statuses:f,leads:I}){var v;const{t}=Y(),n=M(),[j,N]=i.useState(c.search||""),[x,g]=i.useState(c.status||"all"),[u,y]=i.useState(c.lead||"all"),[L,E]=i.useState(c.date_from||""),[Q,B]=i.useState(c.date_to||""),F=()=>{h.get(n("finance.quotations.index"),{search:j,status:x==="all"?"":x,lead:u==="all"?"":u,date_from:L,date_to:Q},{preserveState:!0,replace:!0})},k=()=>{N(""),g("all"),y("all"),E(""),B(""),h.get(n("finance.quotations.index"),{},{preserveState:!0,replace:!0})},z=s=>{h.post(n("finance.quotations.send",s),{},{onSuccess:()=>{C.success(t("finance.quotation_sent","Quotation sent successfully"))},onError:()=>{C.error(t("common.error_occurred","An error occurred"))}})},R=(s,l="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:l}).format(s),H=s=>{switch(s){case"accepted":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"expired":return"bg-orange-100 text-orange-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},P=s=>{switch(s){case"accepted":return e.jsx(se,{className:"h-3 w-3"});case"sent":return e.jsx(T,{className:"h-3 w-3"});case"rejected":return e.jsx(ee,{className:"h-3 w-3"});case"expired":return e.jsx(q,{className:"h-3 w-3"});case"draft":return e.jsx(p,{className:"h-3 w-3"});default:return e.jsx(p,{className:"h-3 w-3"})}},V=s=>s.is_expired?e.jsx(o,{variant:"destructive",className:"text-xs",children:"Expired"}):s.days_until_expiry<=3&&s.status==="sent"?e.jsxs(o,{variant:"outline",className:"text-xs text-orange-600",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),s.days_until_expiry," days left"]}):null;return e.jsxs(G,{title:t("finance.quotations","Quotations"),children:[e.jsx(U,{title:t("finance.quotations","Quotations")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(O,{children:[e.jsxs(W,{className:"flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx(X,{children:t("finance.quotations","Quotations")}),e.jsx($,{children:t("finance.quotations_description","Create and manage quotations for your leads")})]}),e.jsx(m,{href:n("finance.quotations.create"),children:e.jsxs(a,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),t("finance.create_quotation","Create Quotation")]})})]}),e.jsxs(J,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mb-4 gap-2",children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),F()},className:"flex gap-2 flex-1",children:[e.jsx(K,{type:"text",placeholder:t("finance.search_quotations","Search quotations..."),value:j,onChange:s=>N(s.target.value),className:"max-w-sm"}),e.jsx(a,{type:"submit",variant:"secondary",children:t("common.search","Search")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{value:x,onValueChange:g,children:[e.jsx(_,{className:"w-40",children:e.jsx(b,{placeholder:t("common.all_statuses","All statuses")})}),e.jsxs(w,{children:[e.jsx(d,{value:"all",children:t("common.all_statuses","All statuses")}),Object.entries(f).map(([s,l])=>e.jsx(d,{value:s,children:l},s))]})]}),e.jsxs(S,{value:u,onValueChange:y,children:[e.jsx(_,{className:"w-40",children:e.jsx(b,{placeholder:t("common.all_leads","All leads")})}),e.jsxs(w,{children:[e.jsx(d,{value:"all",children:t("common.all_leads","All leads")}),I.map(s=>e.jsxs(d,{value:s.id.toString(),children:[s.name," ",s.company&&`(${s.company})`]},s.id))]})]}),e.jsx(a,{variant:"outline",onClick:k,children:t("common.reset","Reset")})]})]}),r.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(p,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:t("finance.no_quotations","No quotations found")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t("finance.create_first_quotation_desc","Get started by creating your first quotation.")}),e.jsx(m,{href:n("finance.quotations.create"),children:e.jsxs(a,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),t("finance.create_quotation","Create Quotation")]})})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:t("finance.quotation_number","Quotation #")}),e.jsx("th",{className:"text-left p-2",children:t("crm.lead","Lead")}),e.jsx("th",{className:"text-left p-2",children:t("finance.issue_date","Issue Date")}),e.jsx("th",{className:"text-left p-2",children:t("finance.expiry_date","Expiry Date")}),e.jsx("th",{className:"text-left p-2",children:t("finance.amount","Amount")}),e.jsx("th",{className:"text-left p-2",children:t("common.status","Status")}),e.jsx("th",{className:"text-left p-2",children:t("common.actions","Actions")})]})}),e.jsx("tbody",{children:r.data.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-2",children:e.jsx(m,{href:n("finance.quotations.show",s.id),className:"text-blue-600 hover:underline font-medium",children:s.quotation_number})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.lead.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.lead.company||s.lead.email})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),new Date(s.issue_date).toLocaleDateString()]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),new Date(s.expiry_date).toLocaleDateString()]}),V(s)]})}),e.jsx("td",{className:"p-2 font-medium",children:R(s.total_amount,s.currency)}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{className:H(s.status),variant:"secondary",children:[P(s.status),e.jsx("span",{className:"ml-1",children:f[s.status]||s.status})]}),s.is_converted&&e.jsx(o,{variant:"outline",className:"text-xs",children:"Converted"})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{href:n("finance.quotations.edit",s.id),children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),t("common.edit","Edit")]})}),s.status==="draft"&&e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>z(s.id),className:"text-blue-600",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),t("finance.send_quotation","Send")]})]})})]},s.id))})]})}),r.last_page>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",r.from," to ",r.to," of ",r.total," quotations"]}),e.jsx("div",{className:"flex gap-1",children:(v=r.links)==null?void 0:v.map((s,l)=>s.url===null?e.jsx(a,{variant:"outline",size:"sm",disabled:!0,dangerouslySetInnerHTML:{__html:s.label}},l):e.jsx(m,{href:s.url,children:e.jsx(a,{variant:s.active?"default":"outline",size:"sm",dangerouslySetInnerHTML:{__html:s.label}})},l))})]})]})]})})})]})}export{qe as default};
