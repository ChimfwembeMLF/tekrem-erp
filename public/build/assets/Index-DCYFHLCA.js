import{u as V,r as L,j as e,S as P,x as y,A as j}from"./app-BMIA6nir.js";import{A as U}from"./AppLayout-DbMk6clK.js";import{C as l,a as o,b as d,c as m}from"./card-BAsSN-2Z.js";import{B as f}from"./createLucideIcon-Cg8jdX0w.js";import{I as C}from"./input-Bg5GDATO.js";import{B as v}from"./x-C3KwZK3B.js";import{S as W,a as X,b as $,c as q,d as x}from"./select-B6KOX9nY.js";import{T as G,a as J,b as A,c as n,d as K,e as i}from"./table-DqBb-9tC.js";import{D as O,a as Q,b as Y,c as p}from"./NotificationComponent-CHA3vjZG.js";import{u as I}from"./useTranslate-ER5gAOX6.js";import{t as b}from"./index-Dj2TB_RL.js";import{R as g}from"./refresh-cw-CkrxGXg9.js";import{S as R}from"./shield-DwKJ9Ble.js";import{C as T}from"./clock-BTinGqFV.js";import{C as D}from"./circle-check-big-DCsv6rXk.js";import{C as N}from"./circle-x-D-Fm_LhT.js";import{F as ee}from"./funnel-v8IwREza.js";import{S as se}from"./search-_p1CX5vB.js";import{E as te}from"./ellipsis-DJ3pNpl6.js";import{E as ae}from"./eye-DdivFxyT.js";import{F as re}from"./file-text-D25AipK4.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./bell-5VRgJnzP.js";function rs({zraInvoices:r,stats:h,filters:u}){const{t}=I(),c=V(),[w,Z]=L.useState(u.search||""),z=s=>{s.preventDefault(),j.get(c("finance.zra.index"),{...u,search:w})},_=(s,a)=>{j.get(c("finance.zra.index"),{...u,[s]:a==="all"?"":a})},k=s=>{j.post(c("finance.zra.resubmit",s),{},{onSuccess:()=>{b.success(t("finance.zra.resubmission_started","ZRA resubmission started"))},onError:()=>{b.error(t("common.error_occurred","An error occurred"))}})},F=s=>{confirm(t("finance.zra.confirm_cancel","Are you sure you want to cancel this ZRA submission?"))&&j.post(c("finance.zra.cancel",s),{},{onSuccess:()=>{b.success(t("finance.zra.cancelled","ZRA submission cancelled"))},onError:()=>{b.error(t("common.error_occurred","An error occurred"))}})},E=s=>{const a={pending:{variant:"secondary",icon:T,color:"text-yellow-600"},submitted:{variant:"default",icon:g,color:"text-blue-600"},approved:{variant:"default",icon:D,color:"text-green-600"},rejected:{variant:"destructive",icon:N,color:"text-red-600"},cancelled:{variant:"secondary",icon:N,color:"text-gray-600"}},S=a[s]||a.pending,H=S.icon;return e.jsxs(v,{variant:S.variant,className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),t(`finance.zra.status.${s}`,s.replace("_"," "))]})},B=(s,a="ZMW")=>new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(s),M=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-";return e.jsxs(U,{title:t("finance.zra.title","ZRA Smart Invoices"),breadcrumbs:[{label:t("finance.title","Finance"),href:"/finance"},{label:t("finance.zra.title","ZRA Smart Invoices")}],children:[e.jsx(P,{title:t("finance.zra.title","ZRA Smart Invoices")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:t("finance.zra.title","ZRA Smart Invoices")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t("finance.zra.description","Manage ZRA Smart Invoice submissions and compliance")})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(f,{variant:"outline",onClick:()=>window.location.reload(),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),t("common.refresh","Refresh")]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsxs(l,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:t("finance.zra.total_submissions","Total Submissions")}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.total})})]}),e.jsxs(l,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:t("finance.zra.pending","Pending")}),e.jsx(T,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h.pending})})]}),e.jsxs(l,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:t("finance.zra.submitted","Submitted")}),e.jsx(g,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.submitted})})]}),e.jsxs(l,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:t("finance.zra.approved","Approved")}),e.jsx(D,{className:"h-4 w-4 text-green-600"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.approved})})]}),e.jsxs(l,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:t("finance.zra.rejected","Rejected")}),e.jsx(N,{className:"h-4 w-4 text-red-600"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.rejected})})]})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),t("common.filters","Filters")]})}),e.jsx(m,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx("form",{onSubmit:z,className:"lg:col-span-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{placeholder:t("finance.zra.search_placeholder","Search invoices, references..."),value:w,onChange:s=>Z(s.target.value),className:"flex-1"}),e.jsx(f,{type:"submit",size:"icon",variant:"outline",children:e.jsx(se,{className:"h-4 w-4"})})]})}),e.jsxs(W,{value:u.status||"all",onValueChange:s=>_("status",s),children:[e.jsx(X,{children:e.jsx($,{placeholder:t("finance.zra.all_statuses","All Statuses")})}),e.jsxs(q,{children:[e.jsx(x,{value:"all",children:t("finance.zra.all_statuses","All Statuses")}),e.jsx(x,{value:"pending",children:t("finance.zra.status.pending","Pending")}),e.jsx(x,{value:"submitted",children:t("finance.zra.status.submitted","Submitted")}),e.jsx(x,{value:"approved",children:t("finance.zra.status.approved","Approved")}),e.jsx(x,{value:"rejected",children:t("finance.zra.status.rejected","Rejected")}),e.jsx(x,{value:"cancelled",children:t("finance.zra.status.cancelled","Cancelled")})]})]}),e.jsx(C,{type:"date",placeholder:t("common.date_from","Date From"),value:u.date_from||"",onChange:s=>_("date_from",s.target.value)})]})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),t("finance.zra.smart_invoices","ZRA Smart Invoices")]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.from,"-",r.to," of ",r.total]})]})}),e.jsxs(m,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs(A,{children:[e.jsx(n,{children:t("finance.invoice_number","Invoice Number")}),e.jsx(n,{children:t("finance.zra.reference","ZRA Reference")}),e.jsx(n,{children:t("finance.client","Client")}),e.jsx(n,{children:t("finance.amount","Amount")}),e.jsx(n,{children:t("finance.zra.status","Status")}),e.jsx(n,{children:t("finance.zra.submitted_at","Submitted")}),e.jsx(n,{children:t("finance.zra.retry_count","Retries")}),e.jsx(n,{className:"w-[50px]"})]})}),e.jsx(K,{children:r.data.map(s=>{var a;return e.jsxs(A,{children:[e.jsx(i,{children:e.jsxs("div",{children:[e.jsx(y,{href:c("finance.invoices.show",s.invoice_id),className:"font-medium text-blue-600 hover:underline",children:s.invoice.invoice_number}),s.is_test_mode&&e.jsx(v,{variant:"outline",className:"ml-2 text-xs text-orange-600 border-orange-600",children:"Test"})]})}),e.jsx(i,{children:s.zra_reference?e.jsx("span",{className:"font-mono text-sm",children:s.zra_reference}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(i,{children:((a=s.invoice.billable)==null?void 0:a.name)||e.jsx("span",{className:"text-gray-400",children:"No client"})}),e.jsx(i,{className:"font-medium",children:B(s.invoice.total_amount,s.invoice.currency)}),e.jsx(i,{children:E(s.submission_status)}),e.jsx(i,{className:"text-sm text-gray-600 dark:text-gray-400",children:e.jsxs("div",{children:[e.jsx("div",{children:M(s.submitted_at)}),s.submitted_by&&e.jsxs("div",{className:"text-xs text-gray-500",children:["by ",s.submitted_by.name]})]})}),e.jsx(i,{children:s.retry_count>0?e.jsx(v,{variant:"outline",className:"text-orange-600 border-orange-600",children:s.retry_count}):e.jsx("span",{className:"text-gray-400",children:"0"})}),e.jsx(i,{children:e.jsxs(O,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",children:e.jsx(te,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(p,{asChild:!0,children:e.jsxs(y,{href:c("finance.zra.show",s.id),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),t("finance.zra.view_details","View Details")]})}),e.jsx(p,{asChild:!0,children:e.jsxs(y,{href:c("finance.invoices.show",s.invoice_id),children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),t("finance.view_invoice","View Invoice")]})}),(s.submission_status==="rejected"||s.submission_status==="cancelled")&&e.jsxs(p,{onClick:()=>k(s.invoice_id),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),t("finance.zra.resubmit","Resubmit")]}),(s.submission_status==="pending"||s.submission_status==="submitted")&&e.jsxs(p,{onClick:()=>F(s.invoice_id),className:"text-red-600",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),t("finance.zra.cancel","Cancel")]})]})]})})]},s.id)})})]})}),r.links&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",r.from," to ",r.to," of ",r.total," results"]}),e.jsx("div",{className:"flex gap-2",children:r.links.map((s,a)=>e.jsx(f,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&j.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},a))})]})]})]})]})]})}export{rs as default};
