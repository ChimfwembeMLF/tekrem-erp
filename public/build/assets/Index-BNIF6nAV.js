import{u as Y,r as i,j as e,S as Z,x as h,A as x}from"./app-BMIA6nir.js";import{A as $}from"./AppLayout-DbMk6clK.js";import{C as I,a as B,b as E,c as R,d as ee}from"./card-BAsSN-2Z.js";import{B as u}from"./createLucideIcon-Cg8jdX0w.js";import{I as f}from"./input-Bg5GDATO.js";import{B as M}from"./x-C3KwZK3B.js";import{S as P,a as U,b as V,c as H,d as p}from"./select-B6KOX9nY.js";import{T as se,a as re,b as L,c as t,d as ae,e as n}from"./table-DqBb-9tC.js";import{D as te,a as ne,b as ce,c as d}from"./NotificationComponent-CHA3vjZG.js";import{u as le}from"./useTranslate-ER5gAOX6.js";import{t as m}from"./index-Dj2TB_RL.js";import{P as oe}from"./plus-BjPf5uI-.js";import{S as ie}from"./search-_p1CX5vB.js";import{F as de}from"./funnel-v8IwREza.js";import{E as me}from"./ellipsis-DJ3pNpl6.js";import{E as he}from"./eye-DdivFxyT.js";import{S as q}from"./square-pen-CReBrXbl.js";import{D as xe}from"./download-CNZP3fGS.js";import{R as g}from"./refresh-cw-CkrxGXg9.js";import{T as ue}from"./trash-2-DZc0jDKK.js";import{F as K}from"./file-text-D25AipK4.js";import{C as pe}from"./circle-alert-DVIk47WR.js";import{C as je}from"./circle-check-big-DCsv6rXk.js";import{C as fe}from"./clock-BTinGqFV.js";import{U as ge}from"./upload-DoO0wQwa.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./bell-5VRgJnzP.js";function vs({statements:c,accounts:O,filters:l,statuses:N}){const{t:r}=le(),a=Y(),[S,b]=i.useState(l.search||""),[v,w]=i.useState(l.account_id||""),[C,y]=i.useState(l.status||""),[k,_]=i.useState(l.date_from||""),[T,A]=i.useState(l.date_to||""),D=()=>{x.get(a("finance.bank-statements.index"),{search:S,account_id:v,status:C,date_from:k,date_to:T},{preserveState:!0,preserveScroll:!0})},z=()=>{b(""),w(""),y(""),_(""),A(""),x.get(a("finance.bank-statements.index"))},G=s=>{confirm(r("Are you sure you want to delete this bank statement?"))&&x.delete(a("finance.bank-statements.destroy",s.id),{onSuccess:()=>{m.success(r("Bank statement deleted successfully"))},onError:o=>{m.error(o.error||r("Failed to delete bank statement"))}})},J=s=>{if(s.status!=="failed"){m.error(r("Can only reprocess failed imports"));return}x.post(a("finance.bank-statements.reprocess",s.id),{},{onSuccess:()=>{m.success(r("Statement reprocessing started"))},onError:o=>{m.error(o.error||r("Failed to reprocess statement"))}})},Q=s=>{switch(s){case"pending":return e.jsx(fe,{className:"h-4 w-4"});case"processing":return e.jsx(g,{className:"h-4 w-4 animate-spin"});case"completed":return e.jsx(je,{className:"h-4 w-4"});case"failed":return e.jsx(pe,{className:"h-4 w-4"});default:return e.jsx(K,{className:"h-4 w-4"})}},W=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},X=s=>{switch(s){case"manual":return e.jsx(q,{className:"h-4 w-4"});case"csv":case"excel":return e.jsx(ge,{className:"h-4 w-4"});case"api":return e.jsx(g,{className:"h-4 w-4"});default:return e.jsx(K,{className:"h-4 w-4"})}},j=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),F=s=>new Date(s).toLocaleDateString();return e.jsxs($,{children:[e.jsx(Z,{title:r("Bank Statements")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:r("Bank Statements")}),e.jsx("p",{className:"text-muted-foreground",children:r("Import and manage bank statements for reconciliation")})]}),e.jsx(u,{asChild:!0,children:e.jsxs(h,{href:a("finance.bank-statements.create"),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),r("Import Statement")]})})]}),e.jsxs(I,{children:[e.jsx(B,{children:e.jsx(E,{className:"text-lg",children:r("Filters")})}),e.jsxs(R,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:r("Search")}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(f,{placeholder:r("Search statements..."),value:S,onChange:s=>b(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&D()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:r("Account")}),e.jsxs(P,{value:v,onValueChange:w,children:[e.jsx(U,{children:e.jsx(V,{placeholder:r("All Accounts")})}),e.jsxs(H,{children:[e.jsx(p,{value:"",children:r("All Accounts")}),O.map(s=>e.jsxs(p,{value:s.id.toString(),children:[s.account_code," - ",s.name]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:r("Status")}),e.jsxs(P,{value:C,onValueChange:y,children:[e.jsx(U,{children:e.jsx(V,{placeholder:r("All Statuses")})}),e.jsxs(H,{children:[e.jsx(p,{value:"",children:r("All Statuses")}),Object.entries(N).map(([s,o])=>e.jsx(p,{value:s,children:r(o)},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:r("Date From")}),e.jsx(f,{type:"date",value:k,onChange:s=>_(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:r("Date To")}),e.jsx(f,{type:"date",value:T,onChange:s=>A(s.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 mt-4",children:[e.jsx(u,{variant:"outline",onClick:z,children:r("Reset")}),e.jsxs(u,{onClick:D,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),r("Apply Filters")]})]})]})]}),e.jsxs(I,{children:[e.jsxs(B,{children:[e.jsx(E,{children:r("Bank Statements")}),e.jsx(ee,{children:r("Showing :from to :to of :total statements",{from:c.from,to:c.to,total:c.total})})]}),e.jsxs(R,{children:[e.jsxs(se,{children:[e.jsx(re,{children:e.jsxs(L,{children:[e.jsx(t,{children:r("Statement #")}),e.jsx(t,{children:r("Account")}),e.jsx(t,{children:r("Period")}),e.jsx(t,{children:r("Import Method")}),e.jsx(t,{children:r("Status")}),e.jsx(t,{children:r("Transactions")}),e.jsx(t,{children:r("Net Change")}),e.jsx(t,{className:"w-[100px]",children:r("Actions")})]})}),e.jsx(ae,{children:c.data.map(s=>e.jsxs(L,{children:[e.jsx(n,{className:"font-mono",children:s.statement_number}),e.jsx(n,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.account.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.account.account_code})]})}),e.jsx(n,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:F(s.period_start)}),e.jsxs("div",{className:"text-muted-foreground",children:["to ",F(s.period_end)]})]})}),e.jsx(n,{children:e.jsxs(M,{variant:"outline",children:[X(s.import_method),e.jsx("span",{className:"ml-1",children:r(s.import_method.charAt(0).toUpperCase()+s.import_method.slice(1))})]})}),e.jsx(n,{children:e.jsxs(M,{variant:"secondary",className:W(s.status),children:[Q(s.status),e.jsx("span",{className:"ml-1",children:r(N[s.status])})]})}),e.jsx(n,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium",children:[s.transaction_count," transactions"]}),e.jsxs("div",{className:"text-muted-foreground",children:[j(s.total_debit_amount)," / ",j(s.total_credit_amount)]})]})}),e.jsx(n,{children:e.jsx("span",{className:s.net_change>=0?"text-green-600":"text-red-600",children:j(s.net_change)})}),e.jsx(n,{children:e.jsxs(te,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(u,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsxs(ce,{align:"end",children:[e.jsx(d,{asChild:!0,children:e.jsxs(h,{href:a("finance.bank-statements.show",s.id),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),r("View")]})}),s.import_method==="manual"&&e.jsx(d,{asChild:!0,children:e.jsxs(h,{href:a("finance.bank-statements.edit",s.id),children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),r("Edit")]})}),s.file_name&&e.jsx(d,{asChild:!0,children:e.jsxs(h,{href:a("finance.bank-statements.download",s.id),children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),r("Download File")]})}),s.status==="failed"&&e.jsxs(d,{onClick:()=>J(s),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),r("Reprocess")]}),e.jsxs(d,{onClick:()=>G(s),className:"text-red-600",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),r("Delete")]})]})]})})]},s.id))})]}),c.data.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:r("No bank statements found")})})]})]})]})]})}export{vs as default};
