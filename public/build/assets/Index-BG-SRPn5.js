import{u as q,r as p,j as e,S as R,x as i,A as C}from"./app-BMIA6nir.js";import{u as U,A as F,S as j}from"./AppLayout-DbMk6clK.js";import{C as c,a as o,b as m,c as d,d as G}from"./card-BAsSN-2Z.js";import{B as n}from"./createLucideIcon-Cg8jdX0w.js";import{I as J}from"./input-Bg5GDATO.js";import{B as T}from"./x-C3KwZK3B.js";import{S as P,a as A,b as _,c as B,d as a}from"./select-B6KOX9nY.js";import{C as K}from"./clock-BTinGqFV.js";import{T as D}from"./triangle-alert-BWIpgUmg.js";import{S as Q}from"./search-_p1CX5vB.js";import{C as W}from"./calendar-DTsvo4Hi.js";import{U as X}from"./users-3SuyoAg3.js";import{E as Y}from"./eye-DdivFxyT.js";import{S as Z}from"./square-pen-CReBrXbl.js";import{T as k}from"./trash-2-DZc0jDKK.js";import{P as I}from"./plus-BjPf5uI-.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./useTranslate-ER5gAOX6.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function Ze({auth:ee,project:t,tasks:r,filters:x}){const l=q(),{hasPermission:h}=U(),[w,H]=p.useState(x.search||""),[g,M]=p.useState(x.status||"all"),[f,$]=p.useState(x.priority||"all"),[b,se]=p.useState(x.assigned_to||"all"),E=s=>{s.preventDefault(),C.get(l("projects.tasks.index",t.id),{search:w||void 0,status:g!=="all"?g:void 0,priority:f!=="all"?f:void 0,assigned_to:b!=="all"?b:void 0},{preserveState:!0,replace:!0})},L=s=>{confirm(`Are you sure you want to delete the task "${s.title}"?`)&&C.delete(l("projects.tasks.destroy",[t.id,s.id]))},z=s=>{switch(s){case"pending":return"bg-gray-100 text-gray-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"on-hold":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},O=s=>{switch(s){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},V=s=>s?new Date(s).toLocaleDateString():"No due date",S=(s,y)=>!s||y==="completed"?!1:new Date(s)<new Date,N=r.data.filter(s=>s.status==="completed").length,u=r.data.length,v=r.data.filter(s=>S(s.due_date,s.status)).length;return e.jsxs(F,{title:`${t.name} - Tasks`,renderHeader:()=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:[t.name," - Tasks"]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:[N," of ",u," completed"]}),v>0&&e.jsxs("span",{className:"text-red-600",children:[v," overdue"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{href:l("projects.show",t.id),children:e.jsx(n,{variant:"outline",children:"Back to Project"})}),h("projects.tasks.create")&&e.jsx(i,{href:l("projects.tasks.create",t.id),children:e.jsxs(n,{children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Add Task"]})})]})]}),children:[e.jsx(R,{title:`${t.name} - Tasks`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold",children:u})})]}),e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Completed"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:N}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[u>0?Math.round(N/u*100):0,"% complete"]})]})]}),e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.data.filter(s=>s.status==="in-progress").length})})]}),e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:v})})]})]}),e.jsxs(c,{children:[e.jsx(o,{className:"flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0",children:e.jsxs("div",{children:[e.jsx(m,{children:"Project Tasks"}),e.jsxs(G,{children:["Manage tasks for ",t.name]})]})}),e.jsxs(d,{children:[e.jsx("form",{onSubmit:E,className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(J,{type:"text",placeholder:"Search tasks...",value:w,onChange:s=>H(s.target.value),className:"w-full"})}),e.jsxs(P,{value:g,onValueChange:M,children:[e.jsx(A,{children:e.jsx(_,{placeholder:"Status"})}),e.jsxs(B,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"in-progress",children:"In Progress"}),e.jsx(a,{value:"completed",children:"Completed"}),e.jsx(a,{value:"on-hold",children:"On Hold"}),e.jsx(a,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(P,{value:f,onValueChange:$,children:[e.jsx(A,{children:e.jsx(_,{placeholder:"Priority"})}),e.jsxs(B,{children:[e.jsx(a,{value:"all",children:"All Priority"}),e.jsx(a,{value:"low",children:"Low"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"high",children:"High"}),e.jsx(a,{value:"critical",children:"Critical"})]})]}),e.jsxs(n,{type:"submit",className:"w-full",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Search"]})]})}),e.jsx("div",{className:"space-y-4",children:r.data.length>0?r.data.map(s=>e.jsx(c,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(i,{href:l("projects.tasks.show",[t.id,s.id]),className:"text-lg font-semibold text-blue-600 hover:underline",children:s.title}),e.jsx(T,{variant:"outline",className:z(s.status),children:s.status}),e.jsx(T,{variant:"outline",className:O(s.priority),children:s.priority}),S(s.due_date,s.status)&&e.jsx(D,{className:"h-5 w-5 text-red-500"})]}),s.description&&e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.due_date&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Due: ",V(s.due_date)]})]}),s.assignee&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Assigned to: ",s.assignee.name]})]}),s.milestone&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Milestone: ",s.milestone.name]})]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(i,{href:l("projects.tasks.show",[t.id,s.id]),children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(Y,{className:"h-4 w-4"})})}),h("projects.tasks.edit")&&e.jsx(i,{href:l("projects.tasks.edit",[t.id,s.id]),children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(Z,{className:"h-4 w-4"})})}),h("projects.tasks.delete")&&e.jsx(n,{variant:"destructive",size:"sm",onClick:()=>L(s),children:e.jsx(k,{className:"h-4 w-4"})})]})]})})},s.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No tasks found."}),h("projects.tasks.create")&&e.jsx(i,{href:l("projects.tasks.create",t.id),className:"mt-4 inline-block",children:e.jsxs(n,{children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Create First Task"]})})]})}),r.data.length>0&&r.last_page>1&&e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",r.from," to ",r.to," of ",r.total," results"]}),e.jsx("div",{className:"flex gap-2",children:r.links.map((s,y)=>e.jsx(i,{href:s.url||"#",className:`px-3 py-1 rounded ${s.active?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} ${s.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},y))})]})]})]})]})})]})}export{Ze as default};
