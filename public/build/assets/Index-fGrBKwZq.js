import{u as M,r as o,j as e,S as q,x as i,A as u}from"./app-BMIA6nir.js";import{A as G}from"./AppLayout-DbMk6clK.js";import{C as O,a as X,b as J,d as K,c as Q}from"./card-BAsSN-2Z.js";import{B as a}from"./createLucideIcon-Cg8jdX0w.js";import{I as W}from"./input-Bg5GDATO.js";import{B as y}from"./x-C3KwZK3B.js";import{S,a as b,b as w,c as C,d}from"./select-B6KOX9nY.js";import{u as Y}from"./useTranslate-ER5gAOX6.js";import{t as _}from"./index-Dj2TB_RL.js";import{P as A}from"./plus-BjPf5uI-.js";import{T as Z}from"./trending-up-00s2SIxN.js";import{C as $}from"./calendar-DTsvo4Hi.js";import{S as ee}from"./square-pen-CReBrXbl.js";import{C as E}from"./circle-check-big-DCsv6rXk.js";import{C as T}from"./clock-BTinGqFV.js";import{C as se}from"./circle-x-D-Fm_LhT.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-DgfI6AGt.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./AppProvider-NPNBF0OW.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./file-text-D25AipK4.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./bot-COuCQh0r.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./chevron-down-CrO8JO_i.js";import"./log-out-B525vUfE.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";function Ye({expenses:r,filters:c,statuses:m,categories:D,accounts:te}){var v;const{t}=Y(),n=M(),[h,j]=o.useState(c.search||""),[x,f]=o.useState(c.status||"all"),[p,g]=o.useState(c.category||"all"),[N,I]=o.useState(c.account||"all"),[k,B]=o.useState(c.date_from||""),[z,L]=o.useState(c.date_to||""),R=()=>{u.get(n("finance.expenses.index"),{search:h,status:x==="all"?"":x,category:p==="all"?"":p,account:N==="all"?"":N,date_from:k,date_to:z},{preserveState:!0,replace:!0})},V=()=>{j(""),f("all"),g("all"),I("all"),B(""),L(""),u.get(n("finance.expenses.index"),{},{preserveState:!0,replace:!0})},F=s=>{u.post(n("finance.expenses.approve",s),{},{onSuccess:()=>{_.success(t("finance.expense_approved","Expense approved successfully"))},onError:()=>{_.error(t("common.error_occurred","An error occurred"))}})},H=(s,l="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:l}).format(s),P=s=>{switch(s){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},U=s=>{switch(s){case"approved":return e.jsx(E,{className:"h-4 w-4"});case"pending":return e.jsx(T,{className:"h-4 w-4"});case"rejected":return e.jsx(se,{className:"h-4 w-4"});default:return e.jsx(T,{className:"h-4 w-4"})}};return e.jsxs(G,{title:t("finance.expenses","Expenses"),children:[e.jsx(q,{title:t("finance.expenses","Expenses")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(O,{children:[e.jsxs(X,{className:"flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx(J,{children:t("finance.expenses","Expenses")}),e.jsx(K,{children:t("finance.expenses_description","Track and manage your business expenses")})]}),e.jsx(i,{href:n("finance.expenses.create"),children:e.jsxs(a,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),t("finance.add_expense","Add Expense")]})})]}),e.jsxs(Q,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mb-4 gap-2",children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),R()},className:"flex gap-2 flex-1",children:[e.jsx(W,{type:"text",placeholder:t("finance.search_expenses","Search expenses..."),value:h,onChange:s=>j(s.target.value),className:"max-w-sm"}),e.jsx(a,{type:"submit",variant:"secondary",children:t("common.search","Search")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{value:x,onValueChange:f,children:[e.jsx(b,{className:"w-40",children:e.jsx(w,{placeholder:t("common.all_statuses","All statuses")})}),e.jsxs(C,{children:[e.jsx(d,{value:"all",children:t("common.all_statuses","All statuses")}),m&&Object.entries(m).map(([s,l])=>e.jsx(d,{value:s,children:l},s))]})]}),e.jsxs(S,{value:p,onValueChange:g,children:[e.jsx(b,{className:"w-40",children:e.jsx(w,{placeholder:t("common.all_categories","All categories")})}),e.jsxs(C,{children:[e.jsx(d,{value:"all",children:t("common.all_categories","All categories")}),D.map(s=>e.jsx(d,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx(a,{variant:"outline",onClick:V,children:t("common.reset","Reset")})]})]}),r.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:t("finance.no_expenses","No expenses found")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t("finance.add_first_expense_desc","Get started by adding your first expense.")}),e.jsx(i,{href:n("finance.expenses.create"),children:e.jsxs(a,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),t("finance.add_expense","Add Expense")]})})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:t("finance.expense_number","Expense #")}),e.jsx("th",{className:"text-left p-2",children:t("finance.title","Title")}),e.jsx("th",{className:"text-left p-2",children:t("finance.category","Category")}),e.jsx("th",{className:"text-left p-2",children:t("finance.amount","Amount")}),e.jsx("th",{className:"text-left p-2",children:t("finance.vendor","Vendor")}),e.jsx("th",{className:"text-left p-2",children:t("finance.expense_date","Date")}),e.jsx("th",{className:"text-left p-2",children:t("common.status","Status")}),e.jsx("th",{className:"text-left p-2",children:t("common.actions","Actions")})]})}),e.jsx("tbody",{children:r.data.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-2",children:e.jsx(i,{href:n("finance.expenses.show",s.id),className:"text-blue-600 hover:underline font-medium",children:s.expense_number})}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"font-medium",children:s.title})}),e.jsx("td",{className:"p-2",children:s.category?e.jsx(y,{variant:"outline",children:s.category.name}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx("td",{className:"p-2 font-medium",children:H(s.amount,s.account.currency)}),e.jsx("td",{className:"p-2",children:s.vendor||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-muted-foreground"}),new Date(s.expense_date).toLocaleDateString()]})}),e.jsx("td",{className:"p-2",children:e.jsxs(y,{className:P(s.status),variant:"secondary",children:[e.jsx("span",{className:"mr-1",children:U(s.status)}),m&&m[s.status]||s.status]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{href:n("finance.expenses.edit",s.id),children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),t("common.edit","Edit")]})}),s.status==="pending"&&e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>F(s.id),className:"text-green-600",children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),t("finance.approve","Approve")]})]})})]},s.id))})]})}),r.last_page>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",r.from," to ",r.to," of ",r.total," expenses"]}),e.jsx("div",{className:"flex gap-1",children:(v=r.links)==null?void 0:v.map((s,l)=>s.url===null?e.jsx(a,{variant:"outline",size:"sm",disabled:!0,dangerouslySetInnerHTML:{__html:s.label}},l):e.jsx(i,{href:s.url,children:e.jsx(a,{variant:s.active?"default":"outline",size:"sm",dangerouslySetInnerHTML:{__html:s.label}})},l))})]})]})]})})})]})}export{Ye as default};
