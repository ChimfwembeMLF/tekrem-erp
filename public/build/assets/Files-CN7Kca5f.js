import{u as z,j as e,S as B,x as k}from"./app-BMIA6nir.js";import{C as S}from"./CustomerLayout-7LFTkDxI.js";import{C as i,a as l,b as r,c as a,d as I}from"./card-BAsSN-2Z.js";import{B as M,U as L}from"./x-C3KwZK3B.js";import{B as o}from"./createLucideIcon-Cg8jdX0w.js";import{A as P}from"./arrow-left-UX2kDF52.js";import{P as w}from"./paperclip-BkqMpcId.js";import{I as f}from"./image-Ct2miMof.js";import{F as u}from"./file-text-D25AipK4.js";import{H as v}from"./hard-drive-B7d7LCs2.js";import{C as U}from"./calendar-DTsvo4Hi.js";import{D as j}from"./download-CNZP3fGS.js";import{F as y}from"./file-CV9MO8iA.js";import"./avatar-DdiG0YBt.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";import"./NotificationComponent-CHA3vjZG.js";import"./index-BN56TOeV.js";import"./index-BeGDJhOY.js";import"./index-DgfI6AGt.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";import"./sheet-1SUjjT9Y.js";import"./users-3SuyoAg3.js";import"./log-out-B525vUfE.js";import"./message-square-32k9udjC.js";function de({project:x,attachments:t}){const p=z(),b=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=s=>{if(s===0)return"0 Bytes";const n=1024,D=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(s)/Math.log(n));return parseFloat((s/Math.pow(n,g)).toFixed(2))+" "+D[g]},F=s=>s.startsWith("image/")?e.jsx(f,{className:"h-5 w-5"}):s.includes("pdf")||s.includes("document")?e.jsx(u,{className:"h-5 w-5"}):e.jsx(y,{className:"h-5 w-5"}),_=s=>s.startsWith("image/")?"secondary":s.includes("pdf")?"destructive":s.includes("document")||s.includes("text")?"default":"outline",h=s=>{window.open(p("customer.projects.attachments.download",[x.id,s.id]),"_blank")},C=t.reduce((s,n)=>s+n.file_size,0),c=t.filter(s=>s.file_type.startsWith("image/")),d=t.filter(s=>s.file_type.includes("pdf")||s.file_type.includes("document")),m=t.filter(s=>!s.file_type.startsWith("image/")&&!s.file_type.includes("pdf")&&!s.file_type.includes("document"));return e.jsxs(S,{children:[e.jsx(B,{title:`${x.name} - Files`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{href:p("customer.projects.show",x.id),children:e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Back to Project"]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[x.name," - Files"]}),e.jsx("p",{className:"text-muted-foreground",children:"Download and view project files shared with you"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Files"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Images"}),e.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Documents"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Size"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:N(C)})})]})]}),e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(r,{children:"Project Files"}),e.jsx(I,{children:"Files and documents shared with you for this project"})]}),e.jsx(a,{children:e.jsx("div",{className:"space-y-4",children:t.length>0?t.map(s=>{var n;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:F(s.file_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium truncate",children:s.file_name}),e.jsx(M,{variant:_(s.file_type),className:"text-xs",children:((n=s.file_type.split("/")[1])==null?void 0:n.toUpperCase())||"FILE"})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),N(s.file_size)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),b(s.created_at)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),s.uploadedBy.name]})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>h(s),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Download"]})})]},s.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No files available"}),e.jsx("p",{className:"text-muted-foreground",children:"No files have been shared with you for this project yet."})]})})})]}),t.length>0&&e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[c.length>0&&e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Images (",c.length,")"]})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-2",children:[c.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"truncate flex-1",children:s.file_name}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>h(s),children:e.jsx(j,{className:"h-3 w-3"})})]},s.id)),c.length>5&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:["+",c.length-5," more images"]})]})})]}),d.length>0&&e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Documents (",d.length,")"]})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-2",children:[d.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"truncate flex-1",children:s.file_name}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>h(s),children:e.jsx(j,{className:"h-3 w-3"})})]},s.id)),d.length>5&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:["+",d.length-5," more documents"]})]})})]}),m.length>0&&e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Other Files (",m.length,")"]})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-2",children:[m.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"truncate flex-1",children:s.file_name}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>h(s),children:e.jsx(j,{className:"h-3 w-3"})})]},s.id)),m.length>5&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:["+",m.length-5," more files"]})]})})]})]})]})]})}export{de as default};
