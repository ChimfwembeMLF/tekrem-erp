import{u as B,r as y,j as e,S as A,x as j,A as i}from"./app-BMIA6nir.js";import{C as z}from"./CustomerLayout-7LFTkDxI.js";import{C as d,c as m,a as f,b as g,d as v}from"./card-BAsSN-2Z.js";import{B as x}from"./x-C3KwZK3B.js";import{B as t}from"./createLucideIcon-Cg8jdX0w.js";import{I as F}from"./input-Bg5GDATO.js";import{S as k,a as D,b as E,c as _,d as N}from"./select-B6KOX9nY.js";import{A as K}from"./arrow-left-UX2kDF52.js";import{S as b}from"./search-_p1CX5vB.js";import{F as L}from"./funnel-v8IwREza.js";import{e as R}from"./NotificationComponent-CHA3vjZG.js";import{E as I}from"./eye-DdivFxyT.js";import{B as P}from"./book-B8h2_Mez.js";import"./avatar-DdiG0YBt.js";import"./index-DdwO_6Rs.js";import"./index-DwXxsQvB.js";import"./sheet-1SUjjT9Y.js";import"./users-3SuyoAg3.js";import"./log-out-B525vUfE.js";import"./message-square-32k9udjC.js";import"./file-text-D25AipK4.js";import"./index-BN56TOeV.js";import"./index-BeGDJhOY.js";import"./index-DgfI6AGt.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";import"./useTypedPage-hmuARwun.js";import"./bell-5VRgJnzP.js";function ue({articles:l,categories:n,query:a,selectedCategory:r}){var p;const o=B(),[h,w]=y.useState(a),S=s=>{s.preventDefault(),i.get(o("customer.support.knowledge-base.index"),{q:h||void 0,category_id:r||void 0},{preserveState:!0,replace:!0})},u=s=>{i.get(o("customer.support.knowledge-base.index"),{q:a||void 0,category_id:s==="all"?void 0:s},{preserveState:!0,replace:!0})},C=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(z,{children:[e.jsx(A,{title:"Knowledge Base"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{href:o("customer.support.index"),children:e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Back to Support"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Knowledge Base"}),e.jsx("p",{className:"text-muted-foreground",children:"Find answers to common questions and helpful guides"})]})]})}),e.jsx(d,{children:e.jsxs(m,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("form",{onSubmit:S,className:"flex-1 flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(F,{placeholder:"Search articles...",value:h,onChange:s=>w(s.target.value),className:"pl-10"})]}),e.jsx(t,{type:"submit",children:e.jsx(b,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(k,{value:(r==null?void 0:r.toString())||"all",onValueChange:u,children:[e.jsx(D,{className:"w-48",children:e.jsx(E,{placeholder:"All Categories"})}),e.jsxs(_,{children:[e.jsx(N,{value:"all",children:"All Categories"}),n.map(s=>e.jsx(N,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),(a||r)&&e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),a&&e.jsxs(x,{variant:"secondary",children:['Search: "',a,'"']}),r&&e.jsxs(x,{variant:"secondary",children:["Category: ",(p=n.find(s=>s.id===r))==null?void 0:p.name]}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>i.get(o("customer.support.knowledge-base.index")),children:"Clear all"})]})]})}),e.jsx("div",{className:"space-y-4",children:l.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",l.from,"-",l.to," of ",l.total," articles"]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.data.map(s=>e.jsx(j,{href:o("customer.support.knowledge-base.show",s.id),children:e.jsxs(d,{className:"h-full hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(g,{className:"text-lg line-clamp-2",children:s.title}),s.category&&e.jsx(x,{variant:"outline",className:"mt-2",style:{backgroundColor:s.category.color+"20",color:s.category.color},children:s.category.name})]}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]})}),e.jsxs(m,{children:[e.jsx(v,{className:"line-clamp-3 mb-4",children:s.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.view_count," views"]})]}),e.jsx("span",{children:C(s.created_at)})]})]})]})},s.id))}),l.last_page>1&&e.jsx("div",{className:"flex items-center justify-center space-x-2 pt-4",children:l.links.map((s,c)=>s.label==="&laquo; Previous"?e.jsx(t,{variant:"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&i.get(s.url),children:"Previous"},c):s.label==="Next &raquo;"?e.jsx(t,{variant:"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&i.get(s.url),children:"Next"},c):s.label.includes("...")?e.jsx("span",{className:"px-2 text-muted-foreground",children:"..."},c):e.jsx(t,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&i.get(s.url),children:s.label},c))})]}):e.jsx(d,{children:e.jsxs(m,{className:"text-center py-12",children:[e.jsx(P,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a||r?"No articles match your search criteria.":"No articles are available at the moment."}),(a||r)&&e.jsx(t,{variant:"outline",onClick:()=>i.get(o("customer.support.knowledge-base.index")),children:"Clear Filters"})]})})}),!a&&!r&&n.length>0&&e.jsxs(d,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"Browse by Category"}),e.jsx(v,{children:"Explore articles organized by topic"})]}),e.jsx(m,{children:e.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:n.map(s=>e.jsx(t,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>u(s.id.toString()),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{children:s.name})]})},s.id))})})]})]})]})}export{ue as default};
