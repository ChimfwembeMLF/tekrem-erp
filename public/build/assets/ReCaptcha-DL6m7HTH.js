import{j as t,r as a,R as j}from"./app-BMIA6nir.js";import{C as y}from"./checkbox-B8CiFAgv.js";import{L as b}from"./label-CM6YsqH1.js";import{a as C}from"./createLucideIcon-Cg8jdX0w.js";function F({id:d,label:r,checked:c,onChange:e,name:i,className:n,labelClassName:f,wrapperClassName:l,disabled:m}){const o=d||Math.random().toString(36).substring(2,9);return t.jsxs("div",{className:C("flex items-center space-x-2",l),children:[t.jsx(y,{id:o,checked:c,onCheckedChange:e,name:i,className:n,disabled:m}),r&&t.jsx(b,{htmlFor:o,className:C("text-sm font-medium cursor-pointer",f),children:r})]})}function H({siteKey:d,onVerify:r,onExpired:c,onError:e,theme:i="light",size:n="normal",className:f="",label:l,error:m,required:o=!1}){const u=a.useRef(null),[p,N]=a.useState(null),[g,R]=a.useState(!1),[x,w]=a.useState(!1);a.useEffect(()=>{if(window.grecaptcha){w(!0);return}const s=document.createElement("script");return s.src="https://www.google.com/recaptcha/api.js",s.async=!0,s.defer=!0,s.onload=()=>w(!0),s.onerror=()=>{console.error("Failed to load reCAPTCHA script"),e==null||e()},document.head.appendChild(s),()=>{const h=document.querySelector('script[src="https://www.google.com/recaptcha/api.js"]');h&&document.head.removeChild(h)}},[e]),a.useEffect(()=>{!x||!u.current||g||window.grecaptcha.ready(()=>{if(u.current)try{const s=window.grecaptcha.render(u.current,{sitekey:d,theme:i,size:n,callback:h=>{r(h)},"expired-callback":()=>{c==null||c()},"error-callback":()=>{e==null||e()}});N(s),R(!0)}catch(s){console.error("Failed to render reCAPTCHA:",s),e==null||e()}})},[x,d,i,n,r,c,e,g]);const v=()=>{p!==null&&window.grecaptcha&&window.grecaptcha.reset(p)},k=()=>p!==null&&window.grecaptcha?window.grecaptcha.getResponse(p):"";return j.useImperativeHandle(j.forwardRef(()=>null),()=>({reset:v,getResponse:k})),t.jsxs("div",{className:`space-y-2 ${f}`,children:[l&&t.jsxs(b,{className:"text-sm font-medium",children:[l,o&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{ref:u,className:"flex justify-center"}),m&&t.jsx("p",{className:"text-sm font-medium text-destructive",children:m}),!x&&t.jsx("div",{className:"flex items-center justify-center p-4 border border-dashed border-gray-300 rounded-md",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading reCAPTCHA..."})]})})]})}export{F,H as R};
