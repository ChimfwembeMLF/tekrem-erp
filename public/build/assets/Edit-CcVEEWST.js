import{r as x,G as B,j as e,S as U,x as A}from"./app-BMIA6nir.js";import{C as g,a as f,b as v,d as y,c as _}from"./card-BAsSN-2Z.js";import{B as h}from"./createLucideIcon-Cg8jdX0w.js";import{I as d}from"./input-Bg5GDATO.js";import{L as i}from"./label-CM6YsqH1.js";import{T as L}from"./textarea-CP26afIU.js";import{S as P,a as O,b as z,c as H,d as R}from"./select-B6KOX9nY.js";import{S as D}from"./switch-_qD_kSA5.js";import{B as u}from"./x-C3KwZK3B.js";import{A as V,a as Z}from"./alert-CNp8ZuHk.js";import{A as G}from"./AppLayout-DbMk6clK.js";import{u as K}from"./useTranslate-ER5gAOX6.js";import{B as I}from"./bot-COuCQh0r.js";import{S as N}from"./sheet-1SUjjT9Y.js";import{D as J}from"./dollar-sign-Cli0KufN.js";import{Z as Q}from"./zap-CQoeASxN.js";import{L as W}from"./loader-circle-BUEefOfS.js";import{S as X}from"./save-D6UyxhH5.js";import{C as Y}from"./circle-alert-DVIk47WR.js";import{A as $}from"./arrow-left-UX2kDF52.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";import"./index-DgfI6AGt.js";import"./useTypedPage-hmuARwun.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./file-text-D25AipK4.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./globe-S29F6yCY.js";import"./share-2-cOWypco3.js";import"./log-out-B525vUfE.js";function ts({model:a,services:o}){const{t:s}=K(),[ee,b]=x.useState(null),[m,C]=x.useState(a.capabilities||[]),[p,S]=x.useState(""),{data:r,setData:l,put:T,processing:k,errors:n,reset:se}=B({ai_service_id:a.ai_service_id.toString(),name:a.name,model_identifier:a.model_identifier,type:a.type,description:a.description||"",is_enabled:a.is_enabled,is_default:a.is_default,capabilities:a.capabilities||[],max_tokens:a.max_tokens.toString(),temperature:a.temperature.toString(),top_p:a.top_p.toString(),frequency_penalty:a.frequency_penalty.toString(),presence_penalty:a.presence_penalty.toString(),cost_per_input_token:a.cost_per_input_token.toString(),cost_per_output_token:a.cost_per_output_token.toString(),configuration:a.configuration||{}});x.useEffect(()=>{const t=o.find(c=>c.id===a.ai_service_id);b(t||null)},[a.ai_service_id,o]);const M=t=>{t.preventDefault(),T(route("ai.models.update",a.id))},E=t=>{l("ai_service_id",t);const c=o.find(j=>j.id.toString()===t);b(c||null)},w=()=>{if(p.trim()&&!m.includes(p.trim())){const t=[...m,p.trim()];C(t),l("capabilities",t),S("")}},F=t=>{const c=m.filter(j=>j!==t);C(c),l("capabilities",c)},q=t=>({chat:"bg-blue-100 text-blue-800",completion:"bg-green-100 text-green-800",embedding:"bg-purple-100 text-purple-800",image:"bg-orange-100 text-orange-800",audio:"bg-pink-100 text-pink-800"})[t]||"bg-gray-100 text-gray-800";return e.jsxs(G,{title:s("Edit AI Model"),renderHeader:()=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(A,{href:route("ai.models.show",a.id),children:e.jsxs(h,{variant:"ghost",size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),s("Back to Model")]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:s("Edit AI Model")}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:s("Update model configuration and settings")})]})]})}),children:[e.jsx(U,{title:s("Edit AI Model")}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsxs(v,{className:"flex items-center",children:[e.jsx(I,{className:"h-5 w-5 mr-2"}),s("Model Information")]}),e.jsx(y,{children:s("Current model details and status")})]}),e.jsx(_,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-600",children:s("Current Service")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:a.service.name}),e.jsx(u,{variant:"outline",children:a.service.provider})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-600",children:s("Current Type")}),e.jsx(u,{className:q(a.type),children:a.type.toUpperCase()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-600",children:s("Model ID")}),e.jsx("div",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:a.id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-600",children:s("Status")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{variant:a.is_enabled?"default":"secondary",children:a.is_enabled?s("Enabled"):s("Disabled")}),a.is_default&&e.jsx(u,{variant:"default",children:s("Default")})]})]})]})})]}),e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsxs(v,{className:"flex items-center",children:[e.jsx(I,{className:"h-5 w-5 mr-2"}),s("Basic Information")]}),e.jsx(y,{children:s("Update the basic details of your AI model")})]}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"ai_service_id",children:[s("AI Service")," *"]}),e.jsxs(P,{value:r.ai_service_id,onValueChange:E,children:[e.jsx(O,{className:n.ai_service_id?"border-red-500":"",children:e.jsx(z,{placeholder:s("Select an AI service")})}),e.jsx(H,{children:o.filter(t=>t.is_enabled).map(t=>e.jsx(R,{value:t.id.toString(),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.provider})]})]})},t.id))})]}),n.ai_service_id&&e.jsx("p",{className:"text-sm text-red-600",children:n.ai_service_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"name",children:[s("Model Name")," *"]}),e.jsx(d,{id:"name",type:"text",value:r.name,onChange:t=>l("name",t.target.value),placeholder:s("Enter a descriptive name for the model"),className:n.name?"border-red-500":""}),n.name&&e.jsx("p",{className:"text-sm text-red-600",children:n.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"model_identifier",children:[s("Model Identifier")," *"]}),e.jsx(d,{id:"model_identifier",type:"text",value:r.model_identifier,onChange:t=>l("model_identifier",t.target.value),placeholder:s("e.g., mistral-large-latest, gpt-4, claude-3"),className:n.model_identifier?"border-red-500":""}),n.model_identifier&&e.jsx("p",{className:"text-sm text-red-600",children:n.model_identifier}),e.jsx("p",{className:"text-sm text-gray-600",children:s("The exact model identifier used by the AI service")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:s("Description")}),e.jsx(L,{id:"description",value:r.description,onChange:t=>l("description",t.target.value),placeholder:s("Describe the model capabilities and use cases"),rows:3,className:"resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:s("Enable Model")}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Make this model available for use")})]}),e.jsx(D,{checked:r.is_enabled,onCheckedChange:t=>l("is_enabled",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:s("Set as Default")}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Use as default for this model type")})]}),e.jsx(D,{checked:r.is_default,onCheckedChange:t=>l("is_default",t)})]})]})]})]}),e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsxs(v,{className:"flex items-center",children:[e.jsx(N,{className:"h-5 w-5 mr-2"}),s("Advanced Configuration")]}),e.jsx(y,{children:s("Update model parameters and capabilities")})]}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"max_tokens",children:s("Max Tokens")}),e.jsx(d,{id:"max_tokens",type:"number",value:r.max_tokens,onChange:t=>l("max_tokens",t.target.value),placeholder:"4096",min:"1"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Maximum number of tokens the model can process")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"temperature",children:s("Temperature")}),e.jsx(d,{id:"temperature",type:"number",value:r.temperature,onChange:t=>l("temperature",t.target.value),placeholder:"0.7",min:"0",max:"2",step:"0.1"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Controls randomness (0.0 = deterministic, 2.0 = very random)")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"top_p",children:s("Top P")}),e.jsx(d,{id:"top_p",type:"number",value:r.top_p,onChange:t=>l("top_p",t.target.value),placeholder:"1.0",min:"0",max:"1",step:"0.1"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Nucleus sampling parameter")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"frequency_penalty",children:s("Frequency Penalty")}),e.jsx(d,{id:"frequency_penalty",type:"number",value:r.frequency_penalty,onChange:t=>l("frequency_penalty",t.target.value),placeholder:"0",min:"-2",max:"2",step:"0.1"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Reduces repetition of frequent tokens")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-4 w-4 text-gray-600"}),e.jsx(i,{className:"text-base font-medium",children:s("Cost Configuration")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cost_per_input_token",children:s("Cost per Input Token")}),e.jsx(d,{id:"cost_per_input_token",type:"number",value:r.cost_per_input_token,onChange:t=>l("cost_per_input_token",t.target.value),placeholder:"0.000001",min:"0",step:"0.000001"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Cost in USD per input token")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cost_per_output_token",children:s("Cost per Output Token")}),e.jsx(d,{id:"cost_per_output_token",type:"number",value:r.cost_per_output_token,onChange:t=>l("cost_per_output_token",t.target.value),placeholder:"0.000003",min:"0",step:"0.000001"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Cost in USD per output token")})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-600"}),e.jsx(i,{className:"text-base font-medium",children:s("Capabilities")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{value:p,onChange:t=>S(t.target.value),placeholder:s("Add a capability (e.g., function_calling, vision)"),onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),w())}),e.jsx(h,{type:"button",onClick:w,variant:"outline",children:s("Add")})]}),m.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.map((t,c)=>e.jsxs("div",{className:"flex items-center space-x-1 bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:[e.jsx("span",{children:t}),e.jsx("button",{type:"button",onClick:()=>F(t),className:"text-blue-600 hover:text-blue-800",children:"×"})]},c))}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Update capabilities that this model supports")})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(A,{href:route("ai.models.show",a.id),children:e.jsx(h,{type:"button",variant:"outline",children:s("Cancel")})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[k&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(W,{className:"h-4 w-4 mr-2 animate-spin"}),s("Saving changes...")]}),e.jsxs(h,{type:"submit",disabled:k||!r.name||!r.ai_service_id||!r.model_identifier,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),s("Save Changes")]})]})]}),Object.keys(n).length>0&&e.jsxs(V,{variant:"destructive",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs(Z,{children:[s("Please fix the following errors:"),e.jsx("ul",{className:"mt-2 list-disc list-inside",children:Object.entries(n).map(([t,c])=>e.jsx("li",{className:"text-sm",children:c},t))})]})]})]})})})]})}export{ts as default};
