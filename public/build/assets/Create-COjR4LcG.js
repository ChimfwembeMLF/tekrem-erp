import{r as x,G as R,j as e,S as q}from"./app-BMIA6nir.js";import{C as f,a as v,b,d as y,c as w}from"./card-BAsSN-2Z.js";import{B as n}from"./createLucideIcon-Cg8jdX0w.js";import{I as C}from"./input-Bg5GDATO.js";import{L as c}from"./label-CM6YsqH1.js";import{T as D}from"./textarea-CP26afIU.js";import{S as O,a as W,b as J,c as Q,d as X}from"./select-B6KOX9nY.js";import{S as L}from"./switch-_qD_kSA5.js";import{A as Y,a as Z}from"./alert-CNp8ZuHk.js";import{A as ee,T as _}from"./AppLayout-DbMk6clK.js";import{u as se}from"./useTranslate-ER5gAOX6.js";import{F as T}from"./file-text-D25AipK4.js";import{G as ae}from"./globe-S29F6yCY.js";import{L as te}from"./lock-uJsQfGf1.js";import{H as u}from"./hash-DHWgar7Q.js";import{E as re}from"./eye-DdivFxyT.js";import{L as le}from"./loader-circle-BUEefOfS.js";import{C as ie}from"./circle-alert-DVIk47WR.js";import{A as ce}from"./arrow-left-UX2kDF52.js";import"./index-BN56TOeV.js";import"./index-DdwO_6Rs.js";import"./index-BeGDJhOY.js";import"./index-DwXxsQvB.js";import"./index-BDIc0y8N.js";import"./index-DTi2vEM4.js";import"./chevron-down-CrO8JO_i.js";import"./useTypedPage-hmuARwun.js";import"./sheet-1SUjjT9Y.js";import"./x-C3KwZK3B.js";import"./index-DgfI6AGt.js";import"./AppProvider-NPNBF0OW.js";import"./index-Dj2TB_RL.js";import"./users-3SuyoAg3.js";import"./message-square-32k9udjC.js";import"./message-circle-CVsRMw7b.js";import"./NotificationComponent-CHA3vjZG.js";import"./bell-5VRgJnzP.js";import"./dollar-sign-Cli0KufN.js";import"./trending-up-00s2SIxN.js";import"./smartphone-BqGcJ2Wh.js";import"./shield-DwKJ9Ble.js";import"./building-DIkCZBBP.js";import"./ticket-B_Ks_Sjf.js";import"./book-open-DEtrBf1m.js";import"./image-Ct2miMof.js";import"./calendar-DTsvo4Hi.js";import"./clock-BTinGqFV.js";import"./graduation-cap-leaforsl.js";import"./brain-D-NomhzH.js";import"./user-cog-hTW3YbTW.js";import"./key-Qw2I2-NE.js";import"./plus-BjPf5uI-.js";import"./bot-COuCQh0r.js";import"./share-2-cOWypco3.js";import"./log-out-B525vUfE.js";function ds({categories:F}){const{t:a}=se(),[m,g]=x.useState([]),[d,k]=x.useState([]),[h,S]=x.useState(""),[j,V]=x.useState(""),[N,B]=x.useState(!1),{data:r,setData:l,post:I,processing:A,errors:i,reset:me}=R({name:"",description:"",category:"",template:"",variables:[],tags:[],is_public:!1,is_system:!1,metadata:{}}),M=s=>{s.preventDefault(),I(route("ai.prompt-templates.store"))},E=()=>{if(h.trim()&&!m.includes(h.trim())){const s=[...m,h.trim()];g(s),l("variables",s),S("")}},H=s=>{const t=m.filter(p=>p!==s);g(t),l("variables",t)},P=()=>{if(j.trim()&&!d.includes(j.trim())){const s=[...d,j.trim()];k(s),l("tags",s),V("")}},U=s=>{const t=d.filter(p=>p!==s);k(t),l("tags",t)},$=()=>{const s=/\{\{(\w+)\}\}/g,t=r.template.match(s);if(t){const p=t.map(o=>o.replace(/[{}]/g,"")),z=[...new Set(p)].filter(o=>!m.includes(o));if(z.length>0){const o=[...m,...z];g(o),l("variables",o)}}},G=s=>({crm:"bg-blue-100 text-blue-800",finance:"bg-green-100 text-green-800",support:"bg-orange-100 text-orange-800",marketing:"bg-purple-100 text-purple-800",general:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",K=()=>{let s=r.template;return m.forEach(t=>{s=s.replace(new RegExp(`\\{\\{${t}\\}\\}`,"g"),`[${t.toUpperCase()}]`)}),s};return e.jsxs(ee,{title:a("Create Prompt Template"),renderHeader:()=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),a("Back")]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:a("Create Prompt Template")}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:a("Create a reusable prompt template for AI interactions")})]})]})}),children:[e.jsx(q,{title:a("Create Prompt Template")}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs(f,{children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2"}),a("Basic Information")]}),e.jsx(y,{children:a("Configure the basic details of your prompt template")})]}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"name",children:[a("Template Name")," *"]}),e.jsx(C,{id:"name",type:"text",value:r.name,onChange:s=>l("name",s.target.value),placeholder:a("Enter a descriptive name for the template"),className:i.name?"border-red-500":""}),i.name&&e.jsx("p",{className:"text-sm text-red-600",children:i.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:a("Description")}),e.jsx(D,{id:"description",value:r.description,onChange:s=>l("description",s.target.value),placeholder:a("Describe what this template is used for"),rows:3,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"category",children:[a("Category")," *"]}),e.jsxs(O,{value:r.category,onValueChange:s=>l("category",s),children:[e.jsx(W,{className:i.category?"border-red-500":"",children:e.jsx(J,{placeholder:a("Select a category")})}),e.jsx(Q,{children:F.map(s=>e.jsx(X,{value:s,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${G(s)}`,children:s.toUpperCase()}),e.jsx("span",{className:"capitalize",children:s})]})},s))})]}),i.category&&e.jsx("p",{className:"text-sm text-red-600",children:i.category})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(c,{className:"flex items-center",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),a("Public Template")]}),e.jsx("p",{className:"text-sm text-gray-600",children:a("Make this template available to all users")})]}),e.jsx(L,{checked:r.is_public,onCheckedChange:s=>l("is_public",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(c,{className:"flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),a("System Template")]}),e.jsx("p",{className:"text-sm text-gray-600",children:a("Mark as system template (admin only)")})]}),e.jsx(L,{checked:r.is_system,onCheckedChange:s=>l("is_system",s)})]})]})]})]}),e.jsxs(f,{children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(b,{className:"flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2"}),a("Template Content")]}),e.jsx(y,{children:a("Write your prompt template with variables")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:$,children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),a("Extract Variables")]}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>B(!N),children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),a(N?"Edit":"Preview")]})]})]})}),e.jsx(w,{className:"space-y-4",children:N?e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("Template Preview")}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-md border min-h-[200px]",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:K()||a("No template content to preview")})}),e.jsx("p",{className:"text-sm text-gray-600",children:a("Variables are shown in [BRACKETS] in the preview")})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"template",children:[a("Template")," *"]}),e.jsx(D,{id:"template",value:r.template,onChange:s=>l("template",s.target.value),placeholder:a("Write your prompt template here. Use {{variable}} for dynamic content."),rows:8,className:`resize-none font-mono ${i.template?"border-red-500":""}`}),i.template&&e.jsx("p",{className:"text-sm text-red-600",children:i.template}),e.jsx("p",{className:"text-sm text-gray-600",children:a("Use {{variable_name}} syntax for variables that will be replaced at runtime")})]})})]}),e.jsxs(f,{children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center",children:[e.jsx(u,{className:"h-5 w-5 mr-2"}),a("Variables and Tags")]}),e.jsx(y,{children:a("Manage template variables and tags for organization")})]}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-4 w-4 text-gray-600"}),e.jsx(c,{className:"text-base font-medium",children:a("Variables")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(C,{value:h,onChange:s=>S(s.target.value),placeholder:a("Add a variable name (e.g., customer_name, product)"),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),E())}),e.jsx(n,{type:"button",onClick:E,variant:"outline",children:a("Add")})]}),m.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-1 bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:[e.jsx(u,{className:"h-3 w-3"}),e.jsx("span",{children:s}),e.jsx("button",{type:"button",onClick:()=>H(s),className:"text-blue-600 hover:text-blue-800",children:"Ã—"})]},t))}),e.jsx("p",{className:"text-sm text-gray-600",children:a("Variables will be replaced with actual values when the template is used")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-4 w-4 text-gray-600"}),e.jsx(c,{className:"text-base font-medium",children:a("Tags")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(C,{value:j,onChange:s=>V(s.target.value),placeholder:a("Add a tag (e.g., email, sales, support)"),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),P())}),e.jsx(n,{type:"button",onClick:P,variant:"outline",children:a("Add")})]}),d.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:d.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-1 bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:[e.jsx(_,{className:"h-3 w-3"}),e.jsx("span",{children:s}),e.jsx("button",{type:"button",onClick:()=>U(s),className:"text-green-600 hover:text-green-800",children:"Ã—"})]},t))}),e.jsx("p",{className:"text-sm text-gray-600",children:a("Tags help organize and search for templates")})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:a("Cancel")}),e.jsxs("div",{className:"flex items-center space-x-3",children:[A&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(le,{className:"h-4 w-4 mr-2 animate-spin"}),a("Creating template...")]}),e.jsxs(n,{type:"submit",disabled:A||!r.name||!r.category||!r.template,children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),a("Create Template")]})]})]}),Object.keys(i).length>0&&e.jsxs(Y,{variant:"destructive",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsxs(Z,{children:[a("Please fix the following errors:"),e.jsx("ul",{className:"mt-2 list-disc list-inside",children:Object.entries(i).map(([s,t])=>e.jsx("li",{className:"text-sm",children:t},s))})]})]})]})})})]})}export{ds as default};
